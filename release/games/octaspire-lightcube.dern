#!*****************************************************************************
Octaspire Lightcube - Puzzle game
Copyright 2018 www.octaspire.com

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
*****************************************************************************!#
(require 'dern_sdl2)

(define RO as {D+7}  [open])
(define RC as {D+15} [closed])
(define PO as {D+23} [popen])
(define PC as {D+31} [pclosed])
(define LO as {D+39} [lopen])
(define LH as {D+55} [lhopenfromclosed])
(define LC as {D+63} [lclosed])
(define XX as {D+71} [cross])

(define top-faces as (vector
                         (vector RO RC RC
                                 RO RO RC
                                 RO RO RO)
                         (vector RO RO RO
                                 RO RO RO
                                 RO RO RO)) [top faces])

(define left-faces as (vector
                         (vector RO RO RO
                                 RO RO RO
                                 RO RO RO)
                         (vector RO RO RO
                                 RO RO RO
                                 RO RO RO)) [left faces])

(define right-faces as (vector
                         (vector RO RO RO
                                 RO RO RO
                                 RO RO RO)
                         (vector RO RO RO
                                 RO RO RC
                                 RO RC RC)) [right faces])

(define levelnum   as {D-1}                   [current level number])
(define top-face   as (ln@ top-faces   {D+0}) [current top   face])
(define left-face  as (ln@ left-faces  {D+0}) [current left  face])
(define right-face as (ln@ right-faces {D+0}) [current right face])

(define load-next-level as (fn ()
    (++ levelnum)
    (if (>= levelnum (len top-faces)) (= levelnum {D+0}))
    (= top-face (ln@ top-faces levelnum))
    (= left-face (ln@ left-faces levelnum))
    (= right-face (ln@ right-faces levelnum)))
  [load the next level] '() howto-no)

(define is-idx-passed as (fn (idx)
    (if (and (>= idx {D+0})  (<= idx {D+7}))  (return true))
    (if (and (>= idx {D+16}) (<= idx {D+23})) (return true))
    (if (and (>= idx {D+32}) (<= idx {D+39})) (return true))
    (if (and (>= idx {D+64}) (<= idx {D+71})) (return true))
    (return false))
  [is a given index in passed state] '(idx [animation index]) howto-no)

(define is-level-passed as (fn ()
    (for i in top-face   (if (not (is-idx-passed i)) (return false)))
    (for i in left-face  (if (not (is-idx-passed i)) (return false)))
    (for i in right-face (if (not (is-idx-passed i)) (return false)))
    (return true))
  [is current level passed] '() howto-no)

(sdl2-Init 'VIDEO)

(define window   as (sdl2-CreateWindow [octaspire-maze] 'CENTERED 'CENTERED {D+640} {D+640}) [window])
(define renderer as (sdl2-CreateRenderer window {D-1} 'SOFTWARE) [renderer])

(sdl2-glClearColor {D+0} {D+0} {D+0} {D+1})
(sdl2-glClearDepth {D+1.0})
(sdl2-load-texture-base64 true [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])

(sdl2-glMatrixMode 'GL_PROJECTION)
(sdl2-glLoadIdentity)
(sdl2-gluPerspective {D+45} {D+1} {D+0.1} {D+100})

(sdl2-glMatrixMode 'GL_MODELVIEW)
(sdl2-glLoadIdentity)
(sdl2-gluLookAt {D+0.5} {D+7} {D+8}  ; eye
                {D+0.5} {D+0} {D+0}  ; target
                {D+0}   {D+1} {D+0}) ; up direction

(define idx2stat as (fn (idx)
    (if (and (>= idx {D+0})  (<= idx {D+7}))  (return [open]))
    (if (and (>= idx {D+8})  (<= idx {D+15})) (return [closed]))
    (if (and (>= idx {D+16}) (<= idx {D+23})) (return [popen]))
    (if (and (>= idx {D+24}) (<= idx {D+31})) (return [pclosed]))
    (if (and (>= idx {D+32}) (<= idx {D+39})) (return [lopen]))
    (if (and (>= idx {D+40}) (<= idx {D+47})) (return [lhopenfromopen]))
    (if (and (>= idx {D+48}) (<= idx {D+55})) (return [lhopenfromclosed]))
    (if (and (>= idx {D+56}) (<= idx {D+63})) (return [lclosed]))
    (if (and (>= idx {D+64}) (<= idx {D+71})) (return [cross]))
    (return [unkown]))
  [frame index to slot state] '(idx [idx]) howto-ok)

(define isidxlasting as (fn (idx)
    (if (== idx {D+0})  (return true))
    (if (== idx {D+8})  (return true))
    (if (== idx {D+16}) (return true))
    (if (== idx {D+24}) (return true))
    (if (== idx {D+32}) (return true))
    (if (== idx {D+40}) (return true))
    (if (== idx {D+48}) (return true))
    (if (== idx {D+56}) (return true))
    (if (== idx {D+64}) (return true))
    (return false))
  [is frame index fully animated] '(idx [idx]) howto-ok)

(define state2idx as (fn (stat)
    (if (== stat [open])             (return {D+7}))
    (if (== stat [closed])           (return {D+15}))
    (if (== stat [popen])            (return {D+23}))
    (if (== stat [pclosed])          (return {D+31}))
    (if (== stat [lopen])            (return {D+39}))
    (if (== stat [lhopenfromopen])   (return {D+47}))
    (if (== stat [lhopenfromclosed]) (return {D+55}))
    (if (== stat [lclosed])          (return {D+63}))
    (if (== stat [cross])            (return {D+71}))
    (return {D-1}))
  [state name to (max) frame index] '(stat [state name]) howto-ok)

(define updateidx as (fn (idx)
    (if (and (> idx {D+0})  (<= idx {D+7}))  (return (- idx {D+1})))
    (if (and (> idx {D+8})  (<= idx {D+15})) (return (- idx {D+1})))
    (if (and (> idx {D+16}) (<= idx {D+23})) (return (- idx {D+1})))
    (if (and (> idx {D+24}) (<= idx {D+31})) (return (- idx {D+1})))
    (if (and (> idx {D+32}) (<= idx {D+39})) (return (- idx {D+1})))
    (if (and (> idx {D+40}) (<= idx {D+47})) (return (- idx {D+1})))
    (if (and (> idx {D+48}) (<= idx {D+55})) (return (- idx {D+1})))
    (if (and (> idx {D+56}) (<= idx {D+63})) (return (- idx {D+1})))
    (if (and (> idx {D+64}) (<= idx {D+71})) (return (- idx {D+1})))
    (return idx))
  [step frame index towards lasting value] '(idx [idx]) howto-ok)

(define render-slot as (fn (f x y index pick)
    (sdl2-glPushMatrix)

    (if (== f |L|)
        (do
            (sdl2-glRotatef {D-45} {D+0} {D+1} {D+0})
            (sdl2-glTranslatef (+ {D-1.5} x) (+ {D-0.5} (* y {D-1})) {D+0})))

    (if (== f |R|)
        (do
            (sdl2-glRotatef {D+45} {D+0} {D+1} {D+0})
            (sdl2-glTranslatef (+ {D+0.5} x) (+ {D-0.5} (* y {D-1})) {D+1})))

    (if (== f |T|)
        (do
            (sdl2-glRotatef {D+90} {D+1} {D+0} {D+0})
            (sdl2-glRotatef {D+45} {D+0} {D+0} {D+1})
            (sdl2-glTranslatef (+ {D-1.5} y) (+ {D-0.5} (* x {D-1})) {D+0})))

    (define fenv as (env-current) [local envinronment inside this function])

    (if (not pick) (do
        (define side as {D+0.0625} [width of frame inside texture] in fenv)
        (define s1 as (/ (mod (* {D+32} index) {D+256}) {D+512}) [s1] in fenv)
        (define t1 as (/ (* (to-integer (/ index {D+8})) {D+32}) {D+512}) [t1] in fenv)
        (define s2 as (+ s1 side) [s2] in fenv)
        (define t2 as (+ t1 side) [t2] in fenv)))

    (sdl2-glBegin 'GL_QUADS)

    (if pick (sdl2-glColor4ub (to-integer f) x y {X+FF}))

    (if (not pick) (sdl2-glTexCoord2f s1 (if (== f |T|) t1 t2)))
    (sdl2-glVertex3 {D-0.5} {D-0.5} {D+0})

    (if (not pick) (sdl2-glTexCoord2f s2 (if (== f |T|) t1 t2)))
    (sdl2-glVertex3 {D+0.5} {D-0.5} {D+0})

    (if (not pick) (sdl2-glTexCoord2f s2 (if (== f |T|) t2 t1)))
    (sdl2-glVertex3 {D+0.5} {D+0.5} {D+0})

    (if (not pick) (sdl2-glTexCoord2f s1 (if (== f |T|) t2 t1)))
    (sdl2-glVertex3 {D-0.5} {D+0.5} {D+0})

    (if pick (sdl2-glColor4ub {X+FF} {X+FF} {X+FF} {X+FF}))

    (sdl2-glEnd)
    (sdl2-glPopMatrix))

  [Draw one slot of the left face] '(f [face]
                                     x [x]
                                     y [y]
                                     index [animation frame index]
                                     pick [render for picking if true]) howto-no)

(define render-cube as (fn (index x y pick)
    (if pick
        (do (sdl2-glDisable 'GL_TEXTURE_2D)))

    (sdl2-glClear)

    (for y from {D+0} to {D+2}
         (for x from {D+0} to {D+2}
              (do (render-slot |L| x y (ln@ left-face  (+ x (* y {D+3}))) pick)
                  (render-slot |R| x y (ln@ right-face (+ x (* y {D+3}))) pick)
                  (render-slot |T| x y (ln@ top-face   (+ x (* y {D+3}))) pick))))

    (define picked as nil [optional pick result])

    (if pick (= picked (sdl2-glReadPixel x y)))

    (if (not pick)
        (sdl2-GL-SwapWindow window))

    (if pick (do
                 (sdl2-glEnable 'GL_TEXTURE_2D)
                 (return picked))))

  [Render the cube] '(index [animation frame index]
                      x [x]
                      y [y]
                      pick [render for picking if true]) howto-no)

(define update-cube as (fn ()
    (for y from {D+0} to {D+2}
         (for x from {D+0} to {D+2}
              (do (= (ln@ left-face  (+ x (* y {D+3}))) (updateidx (ln@ left-face  (+ x (* y {D+3})))))
                  (= (ln@ top-face   (+ x (* y {D+3}))) (updateidx (ln@ top-face   (+ x (* y {D+3})))))
                  (= (ln@ right-face (+ x (* y {D+3}))) (updateidx (ln@ right-face (+ x (* y {D+3})))))))))
  [Update the cube] '() howto-no)

(define press-all as (fn (vec)
    (for i in vec (do (press i false))))
  [press all in the vector] '(vec [elements]) howto-no)

(define press-neighbors as (fn (face x y)
    (select
        ; Top face
        (and (== face |T|) (== x {D+0}) (== y {D+0})) (press-all (vector '(|L| {D+0} {D+0}) '(|T| {D+1} {D+0}) '(|T| {D+0} {D+1})                   ))
        (and (== face |T|) (== x {D+1}) (== y {D+0})) (press-all (vector '(|T| {D+0} {D+0}) '(|T| {D+1} {D+1}) '(|T| {D+2} {D+0})                   ))
        (and (== face |T|) (== x {D+2}) (== y {D+0})) (press-all (vector '(|T| {D+1} {D+0}) '(|T| {D+2} {D+1})                                      ))
        (and (== face |T|) (== x {D+0}) (== y {D+1})) (press-all (vector '(|L| {D+1} {D+0}) '(|T| {D+1} {D+1}) '(|T| {D+0} {D+0}) '(|T| {D+0} {D+2})))
        (and (== face |T|) (== x {D+1}) (== y {D+1})) (press-all (vector '(|T| {D+0} {D+1}) '(|T| {D+1} {D+0}) '(|T| {D+2} {D+1}) '(|T| {D+1} {D+2})))
        (and (== face |T|) (== x {D+2}) (== y {D+1})) (press-all (vector '(|T| {D+1} {D+1}) '(|T| {D+2} {D+0}) '(|T| {D+2} {D+2})                   ))
        (and (== face |T|) (== x {D+0}) (== y {D+2})) (press-all (vector '(|L| {D+2} {D+0}) '(|T| {D+0} {D+1}) '(|T| {D+1} {D+2}) '(|R| {D+0} {D+0})))
        (and (== face |T|) (== x {D+1}) (== y {D+2})) (press-all (vector '(|T| {D+0} {D+2}) '(|T| {D+1} {D+1}) '(|T| {D+2} {D+2}) '(|R| {D+1} {D+0})))
        (and (== face |T|) (== x {D+2}) (== y {D+2})) (press-all (vector '(|T| {D+1} {D+2}) '(|T| {D+2} {D+1}) '(|R| {D+2} {D+0})                   ))

        ; Left face
        (and (== face |L|) (== x {D+0}) (== y {D+0})) (press-all (vector '(|L| {D+0} {D+1}) '(|T| {D+0} {D+0}) '(|L| {D+1} {D+0})                   ))
        (and (== face |L|) (== x {D+1}) (== y {D+0})) (press-all (vector '(|L| {D+0} {D+0}) '(|T| {D+0} {D+1}) '(|L| {D+2} {D+0}) '(|L| {D+1} {D+1})))
        (and (== face |L|) (== x {D+2}) (== y {D+0})) (press-all (vector '(|L| {D+1} {D+0}) '(|T| {D+0} {D+2}) '(|R| {D+0} {D+0}) '(|L| {D+2} {D+1})))
        (and (== face |L|) (== x {D+0}) (== y {D+1})) (press-all (vector '(|L| {D+0} {D+0}) '(|L| {D+0} {D+2}) '(|L| {D+1} {D+1})                   ))
        (and (== face |L|) (== x {D+1}) (== y {D+1})) (press-all (vector '(|L| {D+0} {D+1}) '(|L| {D+1} {D+0}) '(|L| {D+2} {D+1}) '(|L| {D+1} {D+2})))
        (and (== face |L|) (== x {D+2}) (== y {D+1})) (press-all (vector '(|L| {D+1} {D+1}) '(|L| {D+2} {D+0}) '(|L| {D+2} {D+2}) '(|R| {D+0} {D+1})))
        (and (== face |L|) (== x {D+0}) (== y {D+2})) (press-all (vector '(|L| {D+0} {D+1}) '(|L| {D+1} {D+2})                                      ))
        (and (== face |L|) (== x {D+1}) (== y {D+2})) (press-all (vector '(|L| {D+0} {D+2}) '(|L| {D+1} {D+1}) '(|L| {D+2} {D+2})                   ))
        (and (== face |L|) (== x {D+2}) (== y {D+2})) (press-all (vector '(|L| {D+1} {D+2}) '(|L| {D+2} {D+1}) '(|R| {D+0} {D+2})                   ))

        ; Right face
        (and (== face |R|) (== x {D+0}) (== y {D+0})) (press-all (vector '(|T| {D+0} {D+2}) '(|R| {D+1} {D+0}) '(|R| {D+0} {D+1}) '(|L| {D+2} {D+0})))
        (and (== face |R|) (== x {D+1}) (== y {D+0})) (press-all (vector '(|R| {D+0} {D+0}) '(|R| {D+2} {D+0}) '(|R| {D+1} {D+1}) '(|T| {D+1} {D+2})))
        (and (== face |R|) (== x {D+2}) (== y {D+0})) (press-all (vector '(|R| {D+1} {D+0}) '(|R| {D+2} {D+1}) '(|T| {D+2} {D+2})                   ))
        (and (== face |R|) (== x {D+0}) (== y {D+1})) (press-all (vector '(|R| {D+0} {D+0}) '(|R| {D+0} {D+2}) '(|R| {D+1} {D+1}) '(|L| {D+2} {D+1})))
        (and (== face |R|) (== x {D+1}) (== y {D+1})) (press-all (vector '(|R| {D+0} {D+1}) '(|R| {D+1} {D+0}) '(|R| {D+2} {D+1}) '(|R| {D+1} {D+2})))
        (and (== face |R|) (== x {D+2}) (== y {D+1})) (press-all (vector '(|R| {D+1} {D+1}) '(|R| {D+2} {D+0}) '(|R| {D+2} {D+2})                   ))
        (and (== face |R|) (== x {D+0}) (== y {D+2})) (press-all (vector '(|R| {D+0} {D+1}) '(|R| {D+1} {D+2}) '(|L| {D+2} {D+2})                   ))
        (and (== face |R|) (== x {D+1}) (== y {D+2})) (press-all (vector '(|R| {D+0} {D+2}) '(|R| {D+1} {D+1}) '(|R| {D+2} {D+2})                   ))
        (and (== face |R|) (== x {D+2}) (== y {D+2})) (press-all (vector '(|R| {D+1} {D+2}) '(|R| {D+2} {D+1})                                      ))
        ))
  [press neighbors of a slot] '(face [face] x [x] y [y]) howto-no)

(define press-top as (fn (x y is-user-press)
    (define idx   as (ln@ top-face (+ x (* y {D+3}))) [idx])
    (define state as (idx2stat idx) [state])

    (select (== state [open])                              (do (= top-face (+ x (* y {D+3})) (state2idx [closed]))               (if is-user-press (press-neighbors |T| x y)))
            (== state [closed])                            (do (= top-face (+ x (* y {D+3})) (state2idx [open]))                 (if is-user-press (press-neighbors |T| x y)))
            (and (== state [popen])   (not is-user-press)) (do (= top-face (+ x (* y {D+3})) (state2idx [pclosed]))              (if is-user-press (press-neighbors |T| x y)))
            (and (== state [pclosed]) (not is-user-press)) (do (= top-face (+ x (* y {D+3})) (state2idx [popen]))                (if is-user-press (press-neighbors |T| x y)))
            (== state [lopen])                             (do (= top-face (+ x (* y {D+3})) (state2idx [lhalfopenfromopen]))    (if is-user-press (press-neighbors |T| x y)))
            (== state [lhopenfromopen])                    (do (= top-face (+ x (* y {D+3})) (state2idx [lclosed]))              (if is-user-press (press-neighbors |T| x y)))
            (== state [lhopenfromclosed])                  (do (= top-face (+ x (* y {D+3})) (state2idx [lopen]))                (if is-user-press (press-neighbors |T| x y)))
            (== state [lclosed])                           (do (= top-face (+ x (* y {D+3})) (state2idx [lhalfopenfromclosed]))  (if is-user-press (press-neighbors |T| x y)))))

  [press the top face of the cube] '(x [x]
                                     y [y]
                                     is-user-press [was press initiated directly by the user]) howto-no)

(define press-left as (fn (x y is-user-press)
    (define idx   as (ln@ left-face (+ x (* y {D+3}))) [idx])
    (define state as (idx2stat idx) [state])

    (select (== state [open])                              (do (= left-face (+ x (* y {D+3})) (state2idx [closed]))               (if is-user-press (press-neighbors |L| x y)))
            (== state [closed])                            (do (= left-face (+ x (* y {D+3})) (state2idx [open]))                 (if is-user-press (press-neighbors |L| x y)))
            (and (== state [popen])   (not is-user-press)) (do (= left-face (+ x (* y {D+3})) (state2idx [pclosed]))              (if is-user-press (press-neighbors |L| x y)))
            (and (== state [pclosed]) (not is-user-press)) (do (= left-face (+ x (* y {D+3})) (state2idx [popen]))                (if is-user-press (press-neighbors |L| x y)))
            (== state [lopen])                             (do (= left-face (+ x (* y {D+3})) (state2idx [lhalfopenfromopen]))    (if is-user-press (press-neighbors |L| x y)))
            (== state [lhopenfromopen])                    (do (= left-face (+ x (* y {D+3})) (state2idx [lclosed]))              (if is-user-press (press-neighbors |L| x y)))
            (== state [lhopenfromclosed])                  (do (= left-face (+ x (* y {D+3})) (state2idx [lopen]))                (if is-user-press (press-neighbors |L| x y)))
            (== state [lclosed])                           (do (= left-face (+ x (* y {D+3})) (state2idx [lhalfopenfromclosed]))  (if is-user-press (press-neighbors |L| x y)))))

  [press the left face of the cube] '(x [x]
                                     y [y]
                                     is-user-press [was press initiated directly by the user]) howto-no)

(define press-right as (fn (x y is-user-press)
    (define idx   as (ln@ right-face (+ x (* y {D+3}))) [idx])
    (define state as (idx2stat idx) [state])

    (select (== state [open])                              (do (= right-face (+ x (* y {D+3})) (state2idx [closed]))               (if is-user-press (press-neighbors |R| x y)))
            (== state [closed])                            (do (= right-face (+ x (* y {D+3})) (state2idx [open]))                 (if is-user-press (press-neighbors |R| x y)))
            (and (== state [popen])   (not is-user-press)) (do (= right-face (+ x (* y {D+3})) (state2idx [pclosed]))              (if is-user-press (press-neighbors |R| x y)))
            (and (== state [pclosed]) (not is-user-press)) (do (= right-face (+ x (* y {D+3})) (state2idx [popen]))                (if is-user-press (press-neighbors |R| x y)))
            (== state [lopen])                             (do (= right-face (+ x (* y {D+3})) (state2idx [lhalfopenfromopen]))    (if is-user-press (press-neighbors |R| x y)))
            (== state [lhopenfromopen])                    (do (= right-face (+ x (* y {D+3})) (state2idx [lclosed]))              (if is-user-press (press-neighbors |R| x y)))
            (== state [lhopenfromclosed])                  (do (= right-face (+ x (* y {D+3})) (state2idx [lopen]))                (if is-user-press (press-neighbors |R| x y)))
            (== state [lclosed])                           (do (= right-face (+ x (* y {D+3})) (state2idx [lhalfopenfromclosed]))  (if is-user-press (press-neighbors |R| x y)))))
  [press the right face of the cube] '(x [x]
                                     y [y]
                                     is-user-press [was press initiated directly by the user]) howto-no)

(define press as (fn (pickdata is-user-press)
    (define face as (to-integer(ln@ pickdata {D+0})) [what face, if any, was pressed])

    (select (== face (to-integer |T|)) (press-top   (ln@ pickdata {D+1}) (ln@ pickdata {D+2}) is-user-press)
            (== face (to-integer |L|)) (press-left  (ln@ pickdata {D+1}) (ln@ pickdata {D+2}) is-user-press)
            (== face (to-integer |R|)) (press-right (ln@ pickdata {D+1}) (ln@ pickdata {D+2}) is-user-press)))

  [press the cube, if necessary] '(pickdata      [color picking results]
                                   is-user-press [is direct press from the user]) howto-no)

(define running             as true                  [running])
(define targetFPS           as {D+20}                [target FPS])
(define targetFrameDuration as (/ {D+1.0} targetFPS) [time for a frame to last])

(define dt as targetFrameDuration [delta time])
(define idx as (state2idx [lclosed]) [frame index])

(load-next-level)

(while running
       ; TODO get actual position from SDL
       (define mx as {D+0} [mouse x])
       (define my as {D+0} [mouse y])

       (sdl2-TimerReset)

       (define event as (sdl2-PollEvent) [event from sdl2])
       (define type  as nil              [type of event])
       (if (and (!= event nil) (> (len event) {D+0})) (= type (ln@ event {D+0})))

       (select (== type 'QUIT)            (= running false)
               (== type 'MOUSEBUTTONDOWN) (do
                                              (= mx (ln@ event {D+1}))
                                              (= my (- {D+640} (ln@ event {D+2})))
                                              (press (render-cube idx mx my true) true)))

       (update-cube)
       (render-cube idx mx my false)
       (= idx (updateidx idx))

       (if (is-level-passed) (load-next-level))

       (if (> targetFrameDuration dt)
           (do
               (define delayInSeconds as (- targetFrameDuration dt) [time to sleep])
               (if (> delayInSeconds {D+0})
                   (sdl2-Delay delayInSeconds))))

       (sdl2-TimerUpdate)
       (= dt (sdl2-TimerGetSeconds)))

(sdl2-Quit)
