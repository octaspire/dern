<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.6.1">
<meta name="author" content="www.octaspire.com">
<title>Programming in Octaspire Dern</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove comment around @import statement below when using as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.spread{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
*:not(pre)>code.nobreak{word-wrap:normal}
*:not(pre)>code.nowrap{white-space:nowrap}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:initial}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px 0}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:.4em .75em 0 .75em;line-height:1;vertical-align:top}
.colist>table tr>td:first-of-type img{max-width:initial}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;text-indent:-1.05em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
<style>
.listingblock .pygments .hll { background-color: #ffffcc }
.listingblock .pygments, .listingblock .pygments code { background: #f8f8f8; }
.listingblock .pygments .tok-c { color: #408080; font-style: italic } /* Comment */
.listingblock .pygments .tok-err { border: 1px solid #FF0000 } /* Error */
.listingblock .pygments .tok-k { color: #008000; font-weight: bold } /* Keyword */
.listingblock .pygments .tok-o { color: #666666 } /* Operator */
.listingblock .pygments .tok-ch { color: #408080; font-style: italic } /* Comment.Hashbang */
.listingblock .pygments .tok-cm { color: #408080; font-style: italic } /* Comment.Multiline */
.listingblock .pygments .tok-cp { color: #BC7A00 } /* Comment.Preproc */
.listingblock .pygments .tok-cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */
.listingblock .pygments .tok-c1 { color: #408080; font-style: italic } /* Comment.Single */
.listingblock .pygments .tok-cs { color: #408080; font-style: italic } /* Comment.Special */
.listingblock .pygments .tok-gd { color: #A00000 } /* Generic.Deleted */
.listingblock .pygments .tok-ge { font-style: italic } /* Generic.Emph */
.listingblock .pygments .tok-gr { color: #FF0000 } /* Generic.Error */
.listingblock .pygments .tok-gh { color: #000080; font-weight: bold } /* Generic.Heading */
.listingblock .pygments .tok-gi { color: #00A000 } /* Generic.Inserted */
.listingblock .pygments .tok-go { color: #888888 } /* Generic.Output */
.listingblock .pygments .tok-gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.listingblock .pygments .tok-gs { font-weight: bold } /* Generic.Strong */
.listingblock .pygments .tok-gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.listingblock .pygments .tok-gt { color: #0044DD } /* Generic.Traceback */
.listingblock .pygments .tok-kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.listingblock .pygments .tok-kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.listingblock .pygments .tok-kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.listingblock .pygments .tok-kp { color: #008000 } /* Keyword.Pseudo */
.listingblock .pygments .tok-kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.listingblock .pygments .tok-kt { color: #B00040 } /* Keyword.Type */
.listingblock .pygments .tok-m { color: #666666 } /* Literal.Number */
.listingblock .pygments .tok-s { color: #BA2121 } /* Literal.String */
.listingblock .pygments .tok-na { color: #7D9029 } /* Name.Attribute */
.listingblock .pygments .tok-nb { color: #008000 } /* Name.Builtin */
.listingblock .pygments .tok-nc { color: #0000FF; font-weight: bold } /* Name.Class */
.listingblock .pygments .tok-no { color: #880000 } /* Name.Constant */
.listingblock .pygments .tok-nd { color: #AA22FF } /* Name.Decorator */
.listingblock .pygments .tok-ni { color: #999999; font-weight: bold } /* Name.Entity */
.listingblock .pygments .tok-ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.listingblock .pygments .tok-nf { color: #0000FF } /* Name.Function */
.listingblock .pygments .tok-nl { color: #A0A000 } /* Name.Label */
.listingblock .pygments .tok-nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.listingblock .pygments .tok-nt { color: #008000; font-weight: bold } /* Name.Tag */
.listingblock .pygments .tok-nv { color: #19177C } /* Name.Variable */
.listingblock .pygments .tok-ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.listingblock .pygments .tok-w { color: #bbbbbb } /* Text.Whitespace */
.listingblock .pygments .tok-mb { color: #666666 } /* Literal.Number.Bin */
.listingblock .pygments .tok-mf { color: #666666 } /* Literal.Number.Float */
.listingblock .pygments .tok-mh { color: #666666 } /* Literal.Number.Hex */
.listingblock .pygments .tok-mi { color: #666666 } /* Literal.Number.Integer */
.listingblock .pygments .tok-mo { color: #666666 } /* Literal.Number.Oct */
.listingblock .pygments .tok-sa { color: #BA2121 } /* Literal.String.Affix */
.listingblock .pygments .tok-sb { color: #BA2121 } /* Literal.String.Backtick */
.listingblock .pygments .tok-sc { color: #BA2121 } /* Literal.String.Char */
.listingblock .pygments .tok-dl { color: #BA2121 } /* Literal.String.Delimiter */
.listingblock .pygments .tok-sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.listingblock .pygments .tok-s2 { color: #BA2121 } /* Literal.String.Double */
.listingblock .pygments .tok-se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.listingblock .pygments .tok-sh { color: #BA2121 } /* Literal.String.Heredoc */
.listingblock .pygments .tok-si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.listingblock .pygments .tok-sx { color: #008000 } /* Literal.String.Other */
.listingblock .pygments .tok-sr { color: #BB6688 } /* Literal.String.Regex */
.listingblock .pygments .tok-s1 { color: #BA2121 } /* Literal.String.Single */
.listingblock .pygments .tok-ss { color: #19177C } /* Literal.String.Symbol */
.listingblock .pygments .tok-bp { color: #008000 } /* Name.Builtin.Pseudo */
.listingblock .pygments .tok-fm { color: #0000FF } /* Name.Function.Magic */
.listingblock .pygments .tok-vc { color: #19177C } /* Name.Variable.Class */
.listingblock .pygments .tok-vg { color: #19177C } /* Name.Variable.Global */
.listingblock .pygments .tok-vi { color: #19177C } /* Name.Variable.Instance */
.listingblock .pygments .tok-vm { color: #19177C } /* Name.Variable.Magic */
.listingblock .pygments .tok-il { color: #666666 } /* Literal.Number.Integer.Long */
</style>
</head>
<body class="article">
<div id="header">
<h1>Programming in Octaspire Dern</h1>
<div class="details">
<span id="author" class="author">www.octaspire.com</span><br>
</div>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_about">About</a></li>
<li><a href="#_see_dern_in_action">See Dern in action</a></li>
<li><a href="#_building_the_amalgamated_source_release">Building the amalgamated source release</a>
<ul class="sectlevel2">
<li><a href="#_linux_freebsd_openbsd_netbsd_openindiana_dragonfly_bsd_midnightbsd_minix_3_haiku_syllable_desktop">Linux, FreeBSD, OpenBSD, NetBSD, OpenIndiana, DragonFly BSD, MidnightBSD, MINIX 3, Haiku, Syllable Desktop</a></li>
<li><a href="#_plan9">Plan9</a></li>
<li><a href="#_windows_using_mingw">Windows using MinGW</a></li>
</ul>
</li>
<li><a href="#_hello_world">Hello world</a></li>
<li><a href="#_values">Values</a></li>
<li><a href="#_single_and_multiline_comments_making_script_files_executable">Single and multiline comments, making script files executable</a></li>
<li><a href="#_binding_names_to_values_with_define">Binding names to values with define</a>
<ul class="sectlevel2">
<li><a href="#_binding_in_other_environments_than_the_current_one">Binding in other environments than the current one</a></li>
</ul>
</li>
<li><a href="#_iteration">Iteration</a></li>
<li><a href="#_comparing_and_changing_values_predicates">Comparing and changing values, predicates</a></li>
<li><a href="#_branching_and_selection">Branching and selection</a></li>
<li><a href="#_formatted_and_regular_printing">Formatted and regular printing</a></li>
<li><a href="#_formatted_string_creation">Formatted string creation</a></li>
<li><a href="#_functions_with_variable_number_of_arguments">Functions with variable number of arguments</a></li>
<li><a href="#_environments">Environments</a></li>
<li><a href="#_returning_from_functions_early">Returning from functions early</a></li>
<li><a href="#_evaluating_values">Evaluating values</a></li>
<li><a href="#_input_and_output_ports">Input and output ports</a></li>
<li><a href="#_converting_between_types">Converting between types</a></li>
<li><a href="#_searching_and_indexing">Searching and indexing</a></li>
<li><a href="#_loading_libraries_with_code_require_code">Loading libraries with <code>require</code></a>
<ul class="sectlevel2">
<li><a href="#_building_and_using_a_binary_library_in_haiku">Building and using a binary library in Haiku</a></li>
<li><a href="#_building_and_using_a_binary_library_in_minix_3">Building and using a binary library in MINIX 3</a></li>
<li><a href="#_building_and_using_a_binary_library_in_linux">Building and using a binary library in Linux</a></li>
<li><a href="#_building_and_using_a_binary_library_in_freebsd">Building and using a binary library in FreeBSD</a></li>
<li><a href="#_building_and_using_a_binary_library_in_netbsd">Building and using a binary library in NetBSD</a></li>
</ul>
</li>
<li><a href="#_embedding_in_c_programs">Embedding in C programs</a></li>
<li><a href="#_tool_support">Tool support</a></li>
<li><a href="#_building_the_development_repository">Building the development repository</a>
<ul class="sectlevel2">
<li><a href="#_raspberry_pi_debian_and_ubuntu">Raspberry Pi, Debian and Ubuntu</a></li>
<li><a href="#_arch_linux">Arch Linux</a></li>
<li><a href="#_haiku">Haiku</a></li>
<li><a href="#_freebsd">FreeBSD</a></li>
<li><a href="#_netbsd">NetBSD</a></li>
<li><a href="#_minix_3">MINIX 3</a></li>
<li><a href="#_other_systems">Other systems</a></li>
</ul>
</li>
<li><a href="#_running_dern">Running Dern</a></li>
<li><a href="#_using_the_amalgamated_source">Using the amalgamated source</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Documentation for Octaspire Dern programming language version 0.191.0</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_about">About</h2>
<div class="sectionbody">
<a href="https://travis-ci.org/octaspire/dern"><img src="https://travis-ci.org/octaspire/dern.svg?branch=master" alt="Build status" /></a>
<a href="https://codecov.io/gh/octaspire/dern/"><img src="https://codecov.io/gh/octaspire/dern/coverage.svg?branch=master" alt="Code coverage" /></a>
<a href="https://opensource.org/licenses/Apache-2.0"><img src="https://img.shields.io/badge/License-Apache%202.0-blue.svg" alt="License badge" /></a>
<div class="paragraph">
<p>Octaspire Dern is a programming language. It is a dialect of Lisp, having taken influences from
languages scheme, emacs lisp and C. The name of the language means
an <strong>obscure language</strong>. <sup class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnote_1" title="View footnote.">1</a>]</sup></p>
</div>
<div class="paragraph">
<p>Dern should support imperative and functional programming. It has atomic types
<strong>integer</strong>, <strong>real</strong>, (utf-8) <strong>string</strong>, (utf-8) <strong>character</strong>, (utf-8) <strong>symbol</strong>, <strong>boolean</strong>,
<strong>nil</strong>, (input/output) <strong>port</strong>, <strong>hash-map</strong>, <strong>list</strong>, <strong>queue</strong>, <strong>environment</strong>, first class <strong>function</strong>,
<strong>special</strong> and <strong>builtin</strong>. As non-atomic type it has <strong>vector</strong>. So, where in scheme <code>'(1 2 3)</code>
is a list, in Dern it is a vector.</p>
</div>
<div class="paragraph">
<p>Every variable and function definition in Dern must be documented by a <strong>documentation string</strong>.
Dern also makes sure that every formal function parameter is documented in the
documentation of function definition. The documentation can be accessed with <strong>doc</strong>-function.</p>
</div>
<div class="paragraph">
<p>Dern can also be extended with functions written in C; C-functions can be registered
as <strong>builtins</strong> or <strong>specials</strong>. Arguments to builtins are evaluated normally, but to specials
are not, so specials can be used to implement special forms like <strong>if</strong>, etc.</p>
</div>
<div class="paragraph">
<p>Dern has also library system, that allows one to load libraries using builtin <code>require</code>.
On Unix-like systems Dern also supports loading of binary libraries (.so files). For the
end user, it doesn&#8217;t matter whether the library she loaded was binary or written in Dern;
it can be used exactly the same way.</p>
</div>
<div class="paragraph">
<p>Dern is dynamically typed language and has <strong>mark and sweep</strong> garbage collector. Functions
in dern are first class values. Dern is written in standard <strong>C99</strong> and depends only on C99 compiler,
standard library and <strong>octaspire-core</strong> (container, utf-8, and utility library). Dern should
compile cleanly without any warnings using <code>-Wall -Wextra</code> on any compiler supporting C99.
Currently it is tested with <strong>gcc</strong>, <strong>clang</strong>, <strong>Tiny C Compiler (tcc)</strong> and <strong>Portable C compiler
(pcc)</strong>.</p>
</div>
<div class="paragraph">
<p>By using the amalgamated version of Dern, you need only one file. This same single source file
can be compiled into (1) stand-alone unit test runner, (2) interactive Dern-REPL and (3) used
as single header file library in programs that want to embed the Dern-language. The amalgamated
source file <strong>octaspire_dern_amalgamated.c</strong> can be found from the <strong>etc</strong>-directory of the
version controlled source distribution. The whole amalgamated release can be found from
the <strong>release</strong>-directory of the version controlled source distribution and from
<a href="http://www.octaspire.com/dern/release.tar.bz2">octaspire.com/dern/release.tar.bz2</a>.</p>
</div>
<div class="paragraph">
<p>Dern is portable and is tested and known to run in Linux, FreeBSD, OpenBSD, NetBSD, OpenIndiana,
DragonFly BSD, MidnightBSD, MINIX 3, Haiku, and Windows. The <code>how-to-build</code>-directory of
the amalgamated source release contains build script for all tested platforms.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
This is the first language I have ever designed or implemented. There
are also a lot of features not yet implemented and probably bugs not yet fixed. The interpreter
is currently also just a tree walker, and not a faster bytecode vm.
Also, English in not my native language, so please bear with me, especially
when this first piece/draft of documentation is written in a hurry.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Dern uses
<a href="http://semver.org">Semantic Versioning 2.0.0</a> version numbering scheme.
As long as the MAJOR version number is zero anything can change at any time,
even in backwards incompatible manner.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_see_dern_in_action">See Dern in action</h2>
<div class="sectionbody">
<script type="text/javascript" src="https://asciinema.org/a/123972.js" id="asciicast-123972" async></script>
<div class="paragraph">
<p>You can also see Dern in "real" use at:
<a href="http://www.octaspire.com/maze">Maze</a> and <a href="http://www.octaspire.com/lightboard">Lightboard</a>.</p>
</div>
<div class="paragraph">
<p>Octaspire Maze and Lightboard are games (work in progress) that are being written using Dern and C99.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_building_the_amalgamated_source_release">Building the amalgamated source release</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The amalgamated source release is the recommended way of using Dern, if you don&#8217;t need to
modify Dern itself. To use the amalgamated release, you will need only a C compiler and
C standard library supporting C99.</p>
</div>
<div class="sect2">
<h3 id="_linux_freebsd_openbsd_netbsd_openindiana_dragonfly_bsd_midnightbsd_minix_3_haiku_syllable_desktop">Linux, FreeBSD, OpenBSD, NetBSD, OpenIndiana, DragonFly BSD, MidnightBSD, MINIX 3, Haiku, Syllable Desktop</h3>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>curl -O octaspire.com/dern/release.tar.bz2
tar jxf release.tar.bz2
<span class="tok-nb">cd</span> release/*
curl -O https://octaspire.github.io/dern/checksums
sha512sum -c checksums
sh how-to-build/YOUR_PLATFORM_NAME_HERE.XX</code></pre>
</div>
</div>
<div class="paragraph">
<p>replace <strong>YOUR_PLATFORM_NAME_HERE.XX</strong> with <strong>FreeBSD.sh</strong>, <strong>NetBSD.sh</strong>, <strong>OpenBSD.sh</strong>, <strong>OpenIndiana.sh</strong>,
<strong>DragonFlyBSD.sh</strong>, <strong>MidnightBSD</strong>, <strong>linux.sh</strong>, <strong>minix3.sh</strong>, <strong>haiku.sh</strong> or <strong>SyllableDesktop.sh</strong>.
More scripts for different platforms will be added later.</p>
</div>
</div>
<div class="sect2">
<h3 id="_plan9">Plan9</h3>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>hget -o release.tar.bz2 http://octaspire.com/dern/release.tar.bz2
bunzip2 release.tar.bz2
tar xf release.tar
<span class="tok-nb">cd</span> release/*
rc how-to-build/Plan9.sh</code></pre>
</div>
</div>
<div class="paragraph">
<p>Please note, that Dern in Plan9 is currently EXPERIMENTAL, can crash and should be used only for
testing and development/fixing purposes.</p>
</div>
</div>
<div class="sect2">
<h3 id="_windows_using_mingw">Windows using MinGW</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Download and install <strong>MinGW</strong> from
<a href="http://www.mingw.org">www.mingw.org</a> into directory <code>C:\MinGW</code>. Please note, that you might need
to add <code>C:\MinGW</code> and <code>C:\MinGW\bin</code> into the <code>PATH</code>.
If you cannot install into <code>C:\MinGW</code>, you can install MinGW to some other place.
Remember the installation path, because later you can write it into the
<code>WindowsMinGW.bat</code> file, so that the script finds MinGW.</p>
</li>
<li>
<p>Download and install <strong>7-Zip</strong> from
<a href="http://www.7-zip.org">www.7-zip.org</a>.</p>
</li>
<li>
<p>Download
<a href="http://www.octaspire.com/dern/release.tar.bz2">www.octaspire.com/dern/release.tar.bz2</a> and
extract it with 7-Zip. You might need to extract it twice; first into file <code>release.tar</code>
and then again to get the directory.</p>
</li>
<li>
<p>Start <strong>shell</strong> and change directory to the extracted release directory
and then into directory <code>version-x.y.z</code>, where x, y and z are some version
numbers.</p>
</li>
<li>
<p>When you are in the directory <code>version-x.y.z</code> run command <code>how-to-build\WindowsMinGW.bat</code></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>More scripts for different tools might be added later.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_hello_world">Hello world</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Here we have a version of the classic <em>Hello World</em>-program in Octaspire Dern.
Instead of just printing <em>Hello, World!</em>, it is a bit more complex to give
you some feeling for the language. If you are in Unix-like system and
have <strong>octaspire-dern-repl</strong> in somewhere on your PATH, you can make the
script executable using the shebang. You can also run the file by
<code>octaspire-dern-repl hello-world.dern</code> or by writing it or parts
of it directly to the interactive REPL.</p>
</div>
<div class="listingblock">
<div class="title">hello-world.dern</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="dern"><span></span><span class="tok-cm">#!/usr/bin/env octaspire-dern-repl</span>
<span class="tok-cm">This is a multiline comment.    !#</span>

<span class="tok-c tok-c-Singleline">; 1. Print once &#39;Hello, World!&#39; and newline</span>
<span class="tok-p">(</span><span class="tok-nb">println </span><span class="tok-s">[Hello, World!]</span><span class="tok-p">)</span>
<span class="tok-p">(</span><span class="tok-nb">println)</span>

<span class="tok-c tok-c-Singleline">; 2. Print 11 times &#39;Hello x World!&#39; where x goes from 0 to 10</span>
<span class="tok-p">(</span><span class="tok-nb">for </span><span class="tok-nv">i</span> <span class="tok-nv">from</span> <span class="tok-mi">0</span> <span class="tok-nv">to</span> <span class="tok-mi">10</span> <span class="tok-p">(</span><span class="tok-nb">println </span><span class="tok-s">[Hello </span><span class="tok-se">{}</span><span class="tok-s"> World!]</span> <span class="tok-nv">i</span><span class="tok-p">))</span>
<span class="tok-p">(</span><span class="tok-nb">println)</span>

<span class="tok-c tok-c-Singleline">; 3. Print greetings to everybody on the vector</span>
<span class="tok-p">(</span><span class="tok-nb">define </span><span class="tok-nv">names</span> <span class="tok-s">[Christmas card list]</span> <span class="tok-o">&#39;</span><span class="tok-p">(</span><span class="tok-nv">John</span> <span class="tok-nv">Alice</span> <span class="tok-nv">Mark</span><span class="tok-p">))</span>
<span class="tok-p">(</span><span class="tok-nb">for </span><span class="tok-nv">i</span> <span class="tok-nv">in</span> <span class="tok-nv">names</span> <span class="tok-p">(</span><span class="tok-nb">println </span><span class="tok-s">[Happy holidays, </span><span class="tok-se">{}</span><span class="tok-s">!]</span> <span class="tok-nv">i</span><span class="tok-p">))</span>
<span class="tok-p">(</span><span class="tok-nb">println)</span>

<span class="tok-c tok-c-Singleline">; 4. Add new name, &#39;Lola&#39;, to the names to be greeted</span>
<span class="tok-p">(</span><span class="tok-nb">+= </span><span class="tok-nv">names</span> <span class="tok-ss">&#39;Lola</span><span class="tok-p">)</span>
<span class="tok-p">(</span><span class="tok-nb">for </span><span class="tok-nv">i</span> <span class="tok-nv">in</span> <span class="tok-nv">names</span> <span class="tok-p">(</span><span class="tok-nb">println </span><span class="tok-s">[Happy holidays, </span><span class="tok-se">{}</span><span class="tok-s">!]</span> <span class="tok-nv">i</span><span class="tok-p">))</span>
<span class="tok-p">(</span><span class="tok-nb">println)</span>

<span class="tok-c tok-c-Singleline">; 5. Remove one name &#39;Mark&#39;, from the names to be greeted</span>
<span class="tok-p">(</span><span class="tok-nb">-= </span><span class="tok-nv">names</span> <span class="tok-ss">&#39;Mark</span><span class="tok-p">)</span>
<span class="tok-p">(</span><span class="tok-nb">for </span><span class="tok-nv">i</span> <span class="tok-nv">in</span> <span class="tok-nv">names</span> <span class="tok-p">(</span><span class="tok-nb">println </span><span class="tok-s">[Happy holidays, </span><span class="tok-se">{}</span><span class="tok-s">!]</span> <span class="tok-nv">i</span><span class="tok-p">))</span>
<span class="tok-p">(</span><span class="tok-nb">println)</span>

<span class="tok-c tok-c-Singleline">; 6. Define new function to greet people and use it</span>
<span class="tok-p">(</span><span class="tok-nb">define </span><span class="tok-nv">greeter</span> <span class="tok-s">[My greeter function]</span> <span class="tok-o">&#39;</span><span class="tok-p">(</span><span class="tok-nv">greeting</span> <span class="tok-s">[the greeting]</span> <span class="tok-nv">name</span> <span class="tok-s">[who to greet]</span><span class="tok-p">)</span> <span class="tok-p">(</span><span class="tok-nb">fn </span><span class="tok-p">(</span><span class="tok-nv">greeting</span> <span class="tok-nv">name</span><span class="tok-p">)</span>
    <span class="tok-p">(</span><span class="tok-nb">println </span><span class="tok-s">[</span><span class="tok-se">{}</span><span class="tok-s">, </span><span class="tok-se">{}</span><span class="tok-s">!]</span> <span class="tok-nv">greeting</span> <span class="tok-nv">name</span><span class="tok-p">)))</span>

<span class="tok-p">(</span><span class="tok-nf">greeter</span> <span class="tok-ss">&#39;Hi</span> <span class="tok-ss">&#39;Alice</span><span class="tok-p">)</span>

<span class="tok-c tok-c-Singleline">; 7. Redefine greeter-function with early exit using &#39;return&#39;</span>
<span class="tok-p">(</span><span class="tok-nb">define </span><span class="tok-nv">grumpy</span> <span class="tok-s">[is our hero grumpy, or not]</span> <span class="tok-no">true</span><span class="tok-p">)</span>

<span class="tok-p">(</span><span class="tok-nb">define </span><span class="tok-nv">greeter</span> <span class="tok-s">[My greeter function]</span> <span class="tok-o">&#39;</span><span class="tok-p">(</span><span class="tok-nv">greeting</span> <span class="tok-s">[the greeting]</span> <span class="tok-nv">name</span> <span class="tok-s">[who to greet]</span><span class="tok-p">)</span> <span class="tok-p">(</span><span class="tok-nb">fn </span><span class="tok-p">(</span><span class="tok-nv">greeting</span> <span class="tok-nv">name</span><span class="tok-p">)</span>
    <span class="tok-p">(</span><span class="tok-nb">if </span><span class="tok-nv">grumpy</span> <span class="tok-p">(</span><span class="tok-nb">return </span><span class="tok-s">[I am grumpy and will not greet anyone. Hmpfh!]</span><span class="tok-p">))</span>
    <span class="tok-p">(</span><span class="tok-nb">println </span><span class="tok-s">[</span><span class="tok-se">{}</span><span class="tok-s">, </span><span class="tok-se">{}</span><span class="tok-s">!]</span> <span class="tok-nv">greeting</span> <span class="tok-nv">name</span><span class="tok-p">)</span>
    <span class="tok-p">(</span><span class="tok-nb">string-format </span><span class="tok-s">[I greeted &quot;</span><span class="tok-se">{}</span><span class="tok-s">&quot;, as requested]</span> <span class="tok-nv">name</span><span class="tok-p">)))</span>

<span class="tok-p">(</span><span class="tok-nb">println </span><span class="tok-p">(</span><span class="tok-nf">greeter</span> <span class="tok-ss">&#39;Hi</span> <span class="tok-ss">&#39;Alice</span><span class="tok-p">))</span>
<span class="tok-p">(</span><span class="tok-nb">= </span><span class="tok-nv">grumpy</span> <span class="tok-no">false</span><span class="tok-p">)</span>
<span class="tok-p">(</span><span class="tok-nb">println </span><span class="tok-p">(</span><span class="tok-nf">greeter</span> <span class="tok-ss">&#39;Hi</span> <span class="tok-ss">&#39;Alice</span><span class="tok-p">))</span>
<span class="tok-p">(</span><span class="tok-nb">println)</span>

<span class="tok-c tok-c-Singleline">; 8. Add names and custom greetings into a hash map and use it to greet people</span>
<span class="tok-p">(</span><span class="tok-nb">define </span><span class="tok-nv">names</span> <span class="tok-s">[My custom greetings]</span> <span class="tok-p">(</span><span class="tok-nb">hash-map </span><span class="tok-ss">&#39;John</span> <span class="tok-ss">&#39;Hi</span>
                                              <span class="tok-ss">&#39;Lola</span> <span class="tok-ss">&#39;Hello</span>
                                              <span class="tok-ss">&#39;Mike</span> <span class="tok-ss">&#39;Bonjour</span><span class="tok-p">))</span>

<span class="tok-p">(</span><span class="tok-nb">for </span><span class="tok-nv">i</span> <span class="tok-nv">in</span> <span class="tok-nv">names</span> <span class="tok-p">(</span><span class="tok-nf">greeter</span> <span class="tok-p">(</span><span class="tok-nb">nth </span><span class="tok-mi">1</span> <span class="tok-nv">i</span><span class="tok-p">)</span> <span class="tok-p">(</span><span class="tok-nb">nth </span><span class="tok-mi">0</span> <span class="tok-nv">i</span><span class="tok-p">)))</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_values">Values</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="dern"><span></span> <span class="tok-mi">128</span>              <span class="tok-c tok-c-Singleline">; These are integers</span>
<span class="tok-mi">-100</span>
 <span class="tok-mf">3.14</span>             <span class="tok-c tok-c-Singleline">; These are real</span>
<span class="tok-mf">-1.12</span>
<span class="tok-s">[Hello]</span>           <span class="tok-c tok-c-Singleline">; These are strings (utf-8)</span>
<span class="tok-s">[Hello</span><span class="tok-se">|newline|</span><span class="tok-s">]</span>
<span class="tok-sc">|a|</span>               <span class="tok-c tok-c-Singleline">; These are characters (utf-8)</span>
<span class="tok-sc">|newline|</span>
<span class="tok-sc">|tab|</span>
<span class="tok-sc">|bar|</span>
<span class="tok-no">true</span>              <span class="tok-c tok-c-Singleline">; These are booleans</span>
<span class="tok-no">false</span>
<span class="tok-no">nil</span>               <span class="tok-c tok-c-Singleline">; Nil</span>
<span class="tok-o">&#39;</span><span class="tok-p">(</span><span class="tok-mi">1</span> <span class="tok-mi">2</span> <span class="tok-sc">|a|</span> <span class="tok-s">[cat]</span><span class="tok-p">)</span>                                   <span class="tok-c tok-c-Singleline">; These are vectors</span>
<span class="tok-o">&#39;</span><span class="tok-p">()</span>
<span class="tok-p">(</span><span class="tok-nb">hash-map </span><span class="tok-ss">&#39;John</span> <span class="tok-s">[likes cats]</span>                       <span class="tok-c tok-c-Singleline">; This is hash map</span>
          <span class="tok-ss">&#39;Lisa</span> <span class="tok-s">[likes dogs]</span>
          <span class="tok-ss">&#39;Mike</span> <span class="tok-o">&#39;</span><span class="tok-p">(</span><span class="tok-s">[likes numbers]</span> <span class="tok-mi">1</span> <span class="tok-mi">2</span> <span class="tok-mi">3</span> <span class="tok-mi">4</span><span class="tok-p">)</span>
           <span class="tok-mi">1</span>    <span class="tok-sc">|a|</span>
           <span class="tok-s">[Hi]</span> <span class="tok-mi">2</span><span class="tok-p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The text after character <code>;</code> is a <strong>single line comment</strong>. Single line comments run until the end
of the line. Dern has also <strong>multiline comments</strong> that are written between <code>\#!</code> and <code>!#</code>.
Note that string delimiters in Dern are <code>[</code> and <code>]</code> and not <code>"</code>;
this way dern code can be written inside C-programs without escaping.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_single_and_multiline_comments_making_script_files_executable">Single and multiline comments, making script files executable</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Below are examples of single and multiline comments:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="dern"><span></span><span class="tok-c tok-c-Singleline">; This is single line comment.</span>

<span class="tok-cm">#! This is multiline comment.</span>
<span class="tok-cm">   It can contain multiple lines...</span>
<span class="tok-cm">   ... !#</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Multiline comments can be used to make script files executable in UNIX-like systems:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="dern"><span></span><span class="tok-cm">#!/usr/bin/env octaspire-dern-repl</span>
<span class="tok-cm">!#</span>

<span class="tok-p">(</span><span class="tok-nb">println </span><span class="tok-s">[Hello World]</span><span class="tok-p">)</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_binding_names_to_values_with_define">Binding names to values with define</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="dern"><span></span><span class="tok-p">(</span><span class="tok-nb">define </span><span class="tok-nv">pi</span> <span class="tok-s">[value for pi]</span> <span class="tok-mf">3.14</span><span class="tok-p">)</span>
<span class="tok-p">(</span><span class="tok-nb">define </span><span class="tok-nv">names</span> <span class="tok-s">[names list]</span> <span class="tok-o">&#39;</span><span class="tok-p">(</span><span class="tok-nv">John</span> <span class="tok-nv">Lisa</span> <span class="tok-nv">Mark</span><span class="tok-p">))</span>
<span class="tok-p">(</span><span class="tok-nb">define </span><span class="tok-nv">double</span> <span class="tok-s">[doubles numbers]</span> <span class="tok-o">&#39;</span><span class="tok-p">(</span><span class="tok-nv">x</span> <span class="tok-s">[this is doubled]</span><span class="tok-p">)</span> <span class="tok-p">(</span><span class="tok-nb">fn </span><span class="tok-p">(</span><span class="tok-nv">x</span><span class="tok-p">)</span> <span class="tok-p">(</span><span class="tok-nb">* </span><span class="tok-mi">2</span> <span class="tok-nv">x</span><span class="tok-p">)))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Here we bind three values to a name: one real, one vector and one function taking one argument.
Here is an example of using those names:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="dern"><span></span><span class="tok-nv">pi</span>
<span class="tok-nv">names</span>
<span class="tok-p">(</span><span class="tok-nf">double</span> <span class="tok-mi">1</span><span class="tok-p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>And to see the documentation for these values:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="dern"><span></span><span class="tok-p">(</span><span class="tok-nb">doc </span><span class="tok-nv">pi</span><span class="tok-p">)</span>
<span class="tok-p">(</span><span class="tok-nb">doc </span><span class="tok-nv">names</span><span class="tok-p">)</span>
<span class="tok-p">(</span><span class="tok-nb">doc </span><span class="tok-nv">double</span><span class="tok-p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The documentation of the function contains also documentation for the parameters.</p>
</div>
<div class="paragraph">
<p>Function <code>doc</code> can also be used with builtins and specials defined by the standard
library or user in C.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Please note that at the time of writing most of the functions
in Dern&#8217;s standard library are not yet documented properly. This is a work in progress.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_binding_in_other_environments_than_the_current_one">Binding in other environments than the current one</h3>
<div class="paragraph">
<p>By using an explicit environment argument as the first argument to <code>define</code>, we can bind
names to values in other environments than the current one. Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="dern"><span></span><span class="tok-p">(</span><span class="tok-nb">define </span><span class="tok-nv">myEnv</span> <span class="tok-s">[my own environment]</span> <span class="tok-p">(</span><span class="tok-nb">env-new))</span>
<span class="tok-p">(</span><span class="tok-nb">define </span><span class="tok-nv">myEnv</span> <span class="tok-nv">pi</span> <span class="tok-s">[value for pi]</span> <span class="tok-mf">3.14</span><span class="tok-p">)</span>

<span class="tok-nv">pi</span>                  <span class="tok-c tok-c-Singleline">; &lt;error&gt;: Unbound symbol &#39;pi&#39;</span>
<span class="tok-p">(</span><span class="tok-nb">eval </span><span class="tok-nv">pi</span> <span class="tok-nv">myEnv</span><span class="tok-p">)</span>     <span class="tok-c tok-c-Singleline">; 3.14</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In the example above, <code>pi</code> is undefined in the current (global) environment, but it
is defined in the <code>myEnv</code>-environment. We use special <code>eval</code> to evaluate <code>pi</code> in the
<code>myEnv</code>-environment.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_iteration">Iteration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Dern has two looping constructs: <code>while</code> and <code>for</code>. For can be used numerically, with a
container (vector, string, hash-map, etc.) and with (input) <strong>ports</strong>. Below is couple of examples:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="dern"><span></span><span class="tok-p">(</span><span class="tok-nb">define </span><span class="tok-nv">i</span> <span class="tok-s">[my counter]</span> <span class="tok-mi">0</span><span class="tok-p">)</span>
<span class="tok-p">(</span><span class="tok-nb">while </span><span class="tok-p">(</span><span class="tok-nb">&lt;= </span><span class="tok-nv">i</span> <span class="tok-mi">10</span><span class="tok-p">)</span> <span class="tok-p">(</span><span class="tok-nb">println </span><span class="tok-s">[Counting at </span><span class="tok-se">{}</span><span class="tok-s">...]</span> <span class="tok-nv">i</span><span class="tok-p">)</span> <span class="tok-p">(</span><span class="tok-nb">++ </span><span class="tok-nv">i</span><span class="tok-p">))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Numerical for:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="dern"><span></span><span class="tok-p">(</span><span class="tok-nb">for </span><span class="tok-nv">i</span> <span class="tok-nv">from</span> <span class="tok-mi">0</span> <span class="tok-nv">to</span> <span class="tok-mi">10</span> <span class="tok-p">(</span><span class="tok-nb">println </span><span class="tok-s">[Hello </span><span class="tok-se">{}</span><span class="tok-s"> World!]</span> <span class="tok-nv">i</span><span class="tok-p">))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Container for:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="dern"><span></span><span class="tok-p">(</span><span class="tok-nb">define </span><span class="tok-nv">names</span> <span class="tok-s">[names list]</span> <span class="tok-o">&#39;</span><span class="tok-p">(</span><span class="tok-nv">John</span> <span class="tok-nv">Mark</span> <span class="tok-nv">Lisa</span><span class="tok-p">))</span>
<span class="tok-p">(</span><span class="tok-nb">for </span><span class="tok-nv">i</span> <span class="tok-nv">in</span> <span class="tok-nv">names</span> <span class="tok-p">(</span><span class="tok-nb">println </span><span class="tok-s">[Hello </span><span class="tok-se">{}</span><span class="tok-s"> World!]</span> <span class="tok-nv">i</span><span class="tok-p">))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Both the <strong>numerical for</strong> and <strong>container for</strong> support the use of optional <code>step</code> to change the
way the iterator is incremented:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="dern"><span></span><span class="tok-p">(</span><span class="tok-nb">for </span><span class="tok-nv">i</span> <span class="tok-nv">from</span> <span class="tok-mi">0</span> <span class="tok-nv">to</span> <span class="tok-mi">10</span> <span class="tok-nv">step</span> <span class="tok-mi">3</span> <span class="tok-p">(</span><span class="tok-nb">println </span><span class="tok-s">[Hello </span><span class="tok-se">{}</span><span class="tok-s"> World!]</span> <span class="tok-nv">i</span><span class="tok-p">))</span>

<span class="tok-p">(</span><span class="tok-nb">define </span><span class="tok-nv">names</span> <span class="tok-s">[names list]</span> <span class="tok-o">&#39;</span><span class="tok-p">(</span><span class="tok-nv">John</span> <span class="tok-nv">Mark</span> <span class="tok-nv">Lisa</span><span class="tok-p">))</span>
<span class="tok-p">(</span><span class="tok-nb">for </span><span class="tok-nv">i</span> <span class="tok-nv">in</span> <span class="tok-nv">names</span> <span class="tok-nv">step</span> <span class="tok-mi">2</span> <span class="tok-p">(</span><span class="tok-nb">println </span><span class="tok-s">[Hello </span><span class="tok-se">{}</span><span class="tok-s"> World!]</span> <span class="tok-nv">i</span><span class="tok-p">))</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comparing_and_changing_values_predicates">Comparing and changing values, predicates</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Here are few examples:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="dern"><span></span><span class="tok-p">(</span><span class="tok-nb">&lt;  </span><span class="tok-mi">1</span> <span class="tok-mi">2</span><span class="tok-p">)</span>   <span class="tok-c tok-c-Singleline">; true</span>
<span class="tok-p">(</span><span class="tok-nb">&lt;  </span><span class="tok-mi">2</span> <span class="tok-mi">2</span><span class="tok-p">)</span>   <span class="tok-c tok-c-Singleline">; false</span>
<span class="tok-p">(</span><span class="tok-nb">&gt;  </span><span class="tok-mi">2</span> <span class="tok-mi">1</span><span class="tok-p">)</span>   <span class="tok-c tok-c-Singleline">; true</span>
<span class="tok-p">(</span><span class="tok-nb">&lt;= </span><span class="tok-mi">1</span> <span class="tok-mi">1</span><span class="tok-p">)</span>   <span class="tok-c tok-c-Singleline">; true</span>
<span class="tok-p">(</span><span class="tok-nb">&gt;= </span><span class="tok-mi">1</span> <span class="tok-mi">1</span><span class="tok-p">)</span>   <span class="tok-c tok-c-Singleline">; true</span>
<span class="tok-p">(</span><span class="tok-nb">== </span><span class="tok-mi">3</span> <span class="tok-mi">3</span><span class="tok-p">)</span>   <span class="tok-c tok-c-Singleline">; true</span>
<span class="tok-p">(</span><span class="tok-nb">== </span><span class="tok-mi">3</span> <span class="tok-mi">1</span><span class="tok-p">)</span>   <span class="tok-c tok-c-Singleline">; false</span>
<span class="tok-p">(</span><span class="tok-nb">!= </span><span class="tok-mi">3</span> <span class="tok-mi">1</span><span class="tok-p">)</span>   <span class="tok-c tok-c-Singleline">; true</span>
<span class="tok-p">(</span><span class="tok-nb">+ </span><span class="tok-mi">1</span><span class="tok-p">)</span>      <span class="tok-c tok-c-Singleline">;  1</span>
<span class="tok-p">(</span><span class="tok-nb">+ </span><span class="tok-mi">1</span> <span class="tok-mi">1</span><span class="tok-p">)</span>    <span class="tok-c tok-c-Singleline">;  2</span>
<span class="tok-p">(</span><span class="tok-nb">- </span><span class="tok-mi">1</span><span class="tok-p">)</span>      <span class="tok-c tok-c-Singleline">; -1</span>
<span class="tok-p">(</span><span class="tok-nb">- </span><span class="tok-mi">1</span> <span class="tok-mi">2</span> <span class="tok-mi">3</span><span class="tok-p">)</span>  <span class="tok-c tok-c-Singleline">; -4</span>

<span class="tok-p">(</span><span class="tok-nb">not </span><span class="tok-no">true</span><span class="tok-p">)</span>     <span class="tok-c tok-c-Singleline">; false</span>

<span class="tok-p">(</span><span class="tok-nb">uid </span><span class="tok-nv">+</span><span class="tok-p">)</span>        <span class="tok-c tok-c-Singleline">; unique id of +</span>

<span class="tok-p">(</span><span class="tok-nb">len </span><span class="tok-o">&#39;</span><span class="tok-p">(</span><span class="tok-mi">1</span> <span class="tok-mi">2</span> <span class="tok-mi">3</span><span class="tok-p">))</span>          <span class="tok-c tok-c-Singleline">; length of vector:   3</span>
<span class="tok-p">(</span><span class="tok-nb">len </span><span class="tok-s">[abc]</span><span class="tok-p">)</span>             <span class="tok-c tok-c-Singleline">; length of string:   3</span>
<span class="tok-p">(</span><span class="tok-nb">len </span><span class="tok-p">(</span><span class="tok-nb">hash-map </span><span class="tok-mi">1</span> <span class="tok-sc">|a|</span><span class="tok-p">))</span>  <span class="tok-c tok-c-Singleline">; length of hash-map: 1</span>

<span class="tok-p">(</span><span class="tok-nb">define </span><span class="tok-nv">number</span> <span class="tok-s">[my number]</span> <span class="tok-mi">1</span><span class="tok-p">)</span>
<span class="tok-p">(</span><span class="tok-nb">++ </span><span class="tok-nv">number</span><span class="tok-p">)</span>                      <span class="tok-c tok-c-Singleline">; number is 2</span>
<span class="tok-p">(</span><span class="tok-nb">-- </span><span class="tok-nv">number</span><span class="tok-p">)</span>                      <span class="tok-c tok-c-Singleline">; number is 1</span>
<span class="tok-p">(</span><span class="tok-nb">+= </span><span class="tok-nv">number</span> <span class="tok-mi">2</span><span class="tok-p">)</span>                    <span class="tok-c tok-c-Singleline">; number is 3</span>

<span class="tok-p">(</span><span class="tok-nb">+ </span><span class="tok-s">[Hello]</span> <span class="tok-s">[ ]</span> <span class="tok-s">[World.]</span> <span class="tok-s">[ Bye.]</span><span class="tok-p">)</span> <span class="tok-c tok-c-Singleline">; Hello World. Bye.</span>

<span class="tok-p">(</span><span class="tok-nb">define </span><span class="tok-nv">greeting</span> <span class="tok-s">[my greeting]</span> <span class="tok-s">[Hello]</span><span class="tok-p">)</span>
<span class="tok-p">(</span><span class="tok-nb">+= </span><span class="tok-nv">greeting</span> <span class="tok-s">[ World!]</span><span class="tok-p">)</span>                 <span class="tok-c tok-c-Singleline">; Hello World!</span>
<span class="tok-p">(</span><span class="tok-nb">+= </span><span class="tok-nv">greeting</span> <span class="tok-sc">|!|</span><span class="tok-p">)</span>                       <span class="tok-c tok-c-Singleline">; Hello World!!</span>

<span class="tok-p">(</span><span class="tok-nb">+= </span><span class="tok-o">&#39;</span><span class="tok-p">(</span><span class="tok-mi">1</span> <span class="tok-mi">2</span> <span class="tok-mi">3</span><span class="tok-p">)</span> <span class="tok-o">&#39;</span><span class="tok-p">(</span><span class="tok-mi">4</span> <span class="tok-mi">5</span> <span class="tok-mi">6</span><span class="tok-p">))</span>                  <span class="tok-c tok-c-Singleline">; (1 2 3 (4 5 6))</span>

<span class="tok-p">(</span><span class="tok-nb">define </span><span class="tok-nv">capitals</span> <span class="tok-s">[country -&gt; capital]</span> <span class="tok-p">(</span><span class="tok-nb">hash-map </span><span class="tok-s">[United Kingdom]</span> <span class="tok-s">[London]</span> <span class="tok-s">[Spain]</span> <span class="tok-s">[Madrid]</span><span class="tok-p">))</span>
<span class="tok-p">(</span><span class="tok-nb">+= </span><span class="tok-nv">capitals</span> <span class="tok-s">[Nepal]</span> <span class="tok-s">[Kathmandu]</span><span class="tok-p">)</span>
<span class="tok-p">(</span><span class="tok-nb">+= </span><span class="tok-nv">capitals</span> <span class="tok-o">&#39;</span><span class="tok-p">(</span><span class="tok-s">[Norway]</span> <span class="tok-s">[Oslo]</span> <span class="tok-s">[Poland]</span> <span class="tok-s">[Warsaw]</span><span class="tok-p">))</span>
<span class="tok-p">(</span><span class="tok-nb">+= </span><span class="tok-nv">capitals</span> <span class="tok-p">(</span><span class="tok-nb">hash-map </span><span class="tok-s">[Peru]</span> <span class="tok-s">[Lima]</span><span class="tok-p">))</span>

<span class="tok-p">(</span><span class="tok-nb">-= </span><span class="tok-mi">10</span> <span class="tok-mi">1</span> <span class="tok-mi">2</span> <span class="tok-mi">3</span><span class="tok-p">)</span>                 <span class="tok-c tok-c-Singleline">; 4</span>
<span class="tok-p">(</span><span class="tok-nb">-= </span><span class="tok-sc">|x|</span> <span class="tok-mi">2</span><span class="tok-p">)</span>                    <span class="tok-c tok-c-Singleline">; |v|</span>
<span class="tok-p">(</span><span class="tok-nb">-= </span><span class="tok-sc">|x|</span> <span class="tok-sc">|!|</span><span class="tok-p">)</span>                  <span class="tok-c tok-c-Singleline">; |W|</span>
<span class="tok-p">(</span><span class="tok-nb">-= </span><span class="tok-s">[abba]</span> <span class="tok-sc">|a|</span><span class="tok-p">)</span>               <span class="tok-c tok-c-Singleline">; [bb]</span>
<span class="tok-p">(</span><span class="tok-nb">-= </span><span class="tok-p">(</span><span class="tok-nb">hash-map </span><span class="tok-mi">1</span> <span class="tok-sc">|a|</span> <span class="tok-mi">2</span> <span class="tok-sc">|b|</span><span class="tok-p">)</span> <span class="tok-mi">1</span><span class="tok-p">)</span> <span class="tok-c tok-c-Singleline">; (hash-map 2 |b|)</span>
<span class="tok-p">(</span><span class="tok-nb">-= </span><span class="tok-o">&#39;</span><span class="tok-p">(</span><span class="tok-mi">1</span> <span class="tok-mi">1</span> <span class="tok-mi">2</span> <span class="tok-mi">2</span> <span class="tok-mi">3</span><span class="tok-p">)</span> <span class="tok-mi">1</span> <span class="tok-mi">2</span><span class="tok-p">)</span>         <span class="tok-c tok-c-Singleline">; (3)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Operators <code>++</code>, <code>--</code>, <code>+=</code>, <code>-=</code>, <code>==</code> and <code>!=</code> are similar to those in C. Note also that
<strong>the operands need not to be numbers</strong>. You can, for example, use <code>+=</code> to push values to the
back of a vector, add characters into a string, write values into a port, etc.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
All the examples above should work, but support for non-numeric types is not finished
on most of the operators. Using those operators with non-numeric arguments
aborts the program or returns error. Complete support for non numeric operands
for the above operators should be implemented in the standard library eventually.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_branching_and_selection">Branching and selection</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Here are some examples using <code>if</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="dern"><span></span><span class="tok-p">(</span><span class="tok-nb">if </span><span class="tok-no">true</span>  <span class="tok-s">[Yes]</span><span class="tok-p">)</span>         <span class="tok-c tok-c-Singleline">; Yes</span>
<span class="tok-p">(</span><span class="tok-nb">if </span><span class="tok-no">false</span> <span class="tok-s">[Yes]</span><span class="tok-p">)</span>         <span class="tok-c tok-c-Singleline">; nil</span>
<span class="tok-p">(</span><span class="tok-nb">if </span><span class="tok-no">false</span> <span class="tok-s">[Yes]</span> <span class="tok-s">[No]</span><span class="tok-p">)</span>    <span class="tok-c tok-c-Singleline">; No</span>

<span class="tok-p">(</span><span class="tok-nb">if </span><span class="tok-no">true</span>  <span class="tok-p">(</span><span class="tok-nb">println </span><span class="tok-s">[Yes]</span><span class="tok-p">)</span> <span class="tok-p">(</span><span class="tok-nb">println </span><span class="tok-s">[No]</span><span class="tok-p">))</span>         <span class="tok-c tok-c-Singleline">; Prints Yes</span>

<span class="tok-p">(</span><span class="tok-nb">if </span><span class="tok-no">true</span>  <span class="tok-p">(</span><span class="tok-nb">do </span><span class="tok-p">(</span><span class="tok-nb">println </span><span class="tok-s">[Yes]</span><span class="tok-p">)</span> <span class="tok-p">(</span><span class="tok-nb">println </span><span class="tok-s">[OK]</span><span class="tok-p">)))</span>    <span class="tok-c tok-c-Singleline">; Prints Yes|newline|OK</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Here are some examples using <code>select</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="dern"><span></span><span class="tok-p">(</span><span class="tok-nb">select </span><span class="tok-no">true</span> <span class="tok-s">[Yes]</span><span class="tok-p">)</span>            <span class="tok-c tok-c-Singleline">; Yes</span>

<span class="tok-p">(</span><span class="tok-nb">select </span><span class="tok-no">false</span> <span class="tok-s">[No]</span>
        <span class="tok-no">true</span>  <span class="tok-s">[Yes]</span><span class="tok-p">)</span>           <span class="tok-c tok-c-Singleline">; Yes</span>

<span class="tok-p">(</span><span class="tok-nb">select </span><span class="tok-nv">default</span> <span class="tok-s">[Yes]</span><span class="tok-p">)</span>         <span class="tok-c tok-c-Singleline">; Yes</span>

<span class="tok-p">(</span><span class="tok-nb">select </span><span class="tok-no">false</span>   <span class="tok-s">[No]</span>
        <span class="tok-nv">default</span> <span class="tok-s">[Yes]</span><span class="tok-p">)</span>         <span class="tok-c tok-c-Singleline">; Yes</span>

<span class="tok-p">(</span><span class="tok-nb">select </span><span class="tok-no">false</span>   <span class="tok-s">[No]</span>
        <span class="tok-no">true</span>    <span class="tok-s">[Maybe]</span>
        <span class="tok-nv">default</span> <span class="tok-s">[Yes]</span><span class="tok-p">)</span>         <span class="tok-c tok-c-Singleline">; Maybe</span>

<span class="tok-p">(</span><span class="tok-nb">select </span><span class="tok-no">false</span> <span class="tok-s">[Yes]</span><span class="tok-p">)</span>           <span class="tok-c tok-c-Singleline">; nil</span>


<span class="tok-p">(</span><span class="tok-nb">define </span><span class="tok-nv">f1</span> <span class="tok-s">[f1]</span> <span class="tok-o">&#39;</span><span class="tok-p">()</span> <span class="tok-p">(</span><span class="tok-nb">fn </span><span class="tok-p">()</span> <span class="tok-no">true</span><span class="tok-p">))</span>
<span class="tok-p">(</span><span class="tok-nb">define </span><span class="tok-nv">f2</span> <span class="tok-s">[f2]</span> <span class="tok-o">&#39;</span><span class="tok-p">()</span> <span class="tok-p">(</span><span class="tok-nb">fn </span><span class="tok-p">()</span> <span class="tok-no">false</span><span class="tok-p">))</span>

<span class="tok-p">(</span><span class="tok-nb">select </span><span class="tok-p">(</span><span class="tok-nf">f1</span><span class="tok-p">)</span>  <span class="tok-s">[Yes]</span>
        <span class="tok-p">(</span><span class="tok-nf">f2</span><span class="tok-p">)</span>  <span class="tok-s">[No]</span>
        <span class="tok-no">false</span> <span class="tok-s">[Maybe]</span><span class="tok-p">)</span>                      <span class="tok-c tok-c-Singleline">; Yes</span>

<span class="tok-p">(</span><span class="tok-nb">select </span><span class="tok-p">(</span><span class="tok-nf">f1</span><span class="tok-p">)</span>  <span class="tok-p">(</span><span class="tok-nb">println </span><span class="tok-s">[Sun is shining]</span><span class="tok-p">)</span>
        <span class="tok-p">(</span><span class="tok-nf">f2</span><span class="tok-p">)</span>  <span class="tok-p">(</span><span class="tok-nb">println </span><span class="tok-s">[It rains]</span><span class="tok-p">)</span>
        <span class="tok-no">false</span> <span class="tok-s">[Maybe]</span>
        <span class="tok-no">false</span> <span class="tok-mi">2</span>
        <span class="tok-no">false</span> <span class="tok-mf">3.14</span>
        <span class="tok-no">false</span> <span class="tok-sc">|a|</span>
        <span class="tok-no">false</span> <span class="tok-s">[There can be as many selectors as needed]</span><span class="tok-p">)</span>   <span class="tok-c tok-c-Singleline">; Prints: Sun is shining</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_formatted_and_regular_printing">Formatted and regular printing</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Here are few examples:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="dern"><span></span><span class="tok-p">(</span><span class="tok-nb">print   </span><span class="tok-s">[Hi]</span><span class="tok-p">)</span>   <span class="tok-c tok-c-Singleline">; Prints Hi without newline</span>
<span class="tok-p">(</span><span class="tok-nb">println </span><span class="tok-s">[Hi]</span><span class="tok-p">)</span>   <span class="tok-c tok-c-Singleline">; Prints Hi and newline</span>

<span class="tok-p">(</span><span class="tok-nb">define </span><span class="tok-nv">name1</span>  <span class="tok-s">[some name 1]</span> <span class="tok-ss">&#39;Jim</span><span class="tok-p">)</span>
<span class="tok-p">(</span><span class="tok-nb">define </span><span class="tok-nv">name2</span>  <span class="tok-s">[some name 2]</span> <span class="tok-ss">&#39;Alice</span><span class="tok-p">)</span>
<span class="tok-p">(</span><span class="tok-nb">define </span><span class="tok-nv">number</span> <span class="tok-s">[some number]</span> <span class="tok-mi">30</span><span class="tok-p">)</span>

<span class="tok-p">(</span><span class="tok-nb">println </span><span class="tok-s">[Hi </span><span class="tok-se">{}</span><span class="tok-s"> and </span><span class="tok-se">{}</span><span class="tok-s">! It is </span><span class="tok-se">{}</span><span class="tok-s"> degrees outside.]</span> <span class="tok-nv">name1</span> <span class="tok-nv">name2</span> <span class="tok-nv">number</span><span class="tok-p">)</span>  <span class="tok-c tok-c-Singleline">; Prints Hi Jim and Alice! It is 30 degrees outside.</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_formatted_string_creation">Formatted string creation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Here are few examples:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="dern"><span></span><span class="tok-p">(</span><span class="tok-nb">define </span><span class="tok-nv">name1</span>  <span class="tok-s">[some name 1]</span> <span class="tok-ss">&#39;Jim</span><span class="tok-p">)</span>
<span class="tok-p">(</span><span class="tok-nb">define </span><span class="tok-nv">name2</span>  <span class="tok-s">[some name 2]</span> <span class="tok-ss">&#39;Alice</span><span class="tok-p">)</span>
<span class="tok-p">(</span><span class="tok-nb">define </span><span class="tok-nv">number</span> <span class="tok-s">[some number]</span> <span class="tok-mi">30</span><span class="tok-p">)</span>

<span class="tok-p">(</span><span class="tok-nb">string-format </span><span class="tok-s">[Hi </span><span class="tok-se">{}</span><span class="tok-s"> and </span><span class="tok-se">{}</span><span class="tok-s">! It is </span><span class="tok-se">{}</span><span class="tok-s"> degrees outside.]</span> <span class="tok-nv">name1</span> <span class="tok-nv">name2</span> <span class="tok-nv">number</span><span class="tok-p">)</span>  <span class="tok-c tok-c-Singleline">; Creates a sting [Hi Jim and Alice! It is 30 degrees outside.]</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_functions_with_variable_number_of_arguments">Functions with variable number of arguments</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Here are few examples:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="dern"><span></span><span class="tok-p">(</span><span class="tok-nb">define </span><span class="tok-nv">f</span> <span class="tok-s">[f]</span> <span class="tok-o">&#39;</span><span class="tok-p">(</span><span class="tok-nv">x</span> <span class="tok-s">[x]</span> <span class="tok-nv">...</span> <span class="tok-s">[varargs]</span><span class="tok-p">)</span> <span class="tok-p">(</span><span class="tok-nb">fn </span><span class="tok-p">(</span><span class="tok-nv">x</span> <span class="tok-nv">...</span><span class="tok-p">)</span> <span class="tok-nv">x</span><span class="tok-p">))</span>

<span class="tok-p">(</span><span class="tok-nf">f</span> <span class="tok-mi">1</span> <span class="tok-mi">2</span> <span class="tok-mi">3</span><span class="tok-p">)</span>   <span class="tok-c tok-c-Singleline">; (1 2 3)</span>


<span class="tok-p">(</span><span class="tok-nb">define </span><span class="tok-nv">f</span> <span class="tok-s">[f]</span> <span class="tok-o">&#39;</span><span class="tok-p">(</span><span class="tok-nv">x</span> <span class="tok-s">[x]</span> <span class="tok-nv">y</span> <span class="tok-s">[rest of the args]</span> <span class="tok-nv">...</span> <span class="tok-s">[varargs]</span><span class="tok-p">)</span> <span class="tok-p">(</span><span class="tok-nb">fn </span><span class="tok-p">(</span><span class="tok-nv">x</span> <span class="tok-nv">y</span> <span class="tok-nv">...</span><span class="tok-p">)</span> <span class="tok-p">(</span><span class="tok-nb">println </span><span class="tok-nv">x</span><span class="tok-p">)</span> <span class="tok-p">(</span><span class="tok-nb">println </span><span class="tok-nv">y</span><span class="tok-p">)))</span>

<span class="tok-p">(</span><span class="tok-nf">f</span> <span class="tok-mi">1</span> <span class="tok-mi">2</span> <span class="tok-mi">3</span><span class="tok-p">)</span>   <span class="tok-c tok-c-Singleline">; Prints 1|newline|(2 3)</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_environments">Environments</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Here are few examples:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="dern"><span></span><span class="tok-p">(</span><span class="tok-nb">env-global)</span>
<span class="tok-p">(</span><span class="tok-nb">env-current)</span>
<span class="tok-p">(</span><span class="tok-nb">env-new)</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_returning_from_functions_early">Returning from functions early</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The value of the last expression of function is usually the return value from that function.
However, by using <code>return</code> one can return early and have multiple exit points from a function.
Small example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="dern"><span></span><span class="tok-p">(</span><span class="tok-nb">define </span><span class="tok-nv">errorCode</span> <span class="tok-s">[0 means no error.]</span> <span class="tok-mi">1</span><span class="tok-p">)</span>

<span class="tok-p">(</span><span class="tok-nb">define </span><span class="tok-nv">start-engine</span> <span class="tok-s">[Start engine if all OK]</span> <span class="tok-o">&#39;</span><span class="tok-p">()</span> <span class="tok-p">(</span><span class="tok-nb">fn </span><span class="tok-p">()</span>
    <span class="tok-p">(</span><span class="tok-nb">if </span><span class="tok-p">(</span><span class="tok-nb">!= </span><span class="tok-nv">errorCode</span> <span class="tok-mi">0</span><span class="tok-p">)</span> <span class="tok-p">(</span><span class="tok-nb">return </span><span class="tok-s">[Cannot start the engine]</span><span class="tok-p">))</span>
    <span class="tok-c tok-c-Singleline">; .... Start the engine here...))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>Return</code> can be called with zero or one argument. If no arguments are given, then <code>return</code>
will return the value <code>nil</code>. Short example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="dern"><span></span><span class="tok-p">((</span><span class="tok-nb">fn </span><span class="tok-p">()</span> <span class="tok-p">(</span><span class="tok-nb">return </span><span class="tok-no">nil</span><span class="tok-p">)))</span>   <span class="tok-c tok-c-Singleline">; Evaluates into &#39;nil&#39;.</span>
<span class="tok-p">((</span><span class="tok-nb">fn </span><span class="tok-p">()</span> <span class="tok-p">(</span><span class="tok-nb">return)))       </span><span class="tok-c tok-c-Singleline">; Evaluates into &#39;nil&#39;.</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_evaluating_values">Evaluating values</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Special <code>eval</code> can be used to evaluate a given value. It can be called with one or two arguments.
The second argument, if present, must be an environment that is used while evaluating. If no
environment is given, the global environment is used instead.</p>
</div>
<div class="paragraph">
<p><code>Eval</code> is useful, for example, in situations where you build the name of the function to be
called at runtime. Small example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="dern"><span></span><span class="tok-p">(</span><span class="tok-nb">define </span><span class="tok-nv">level-next</span> <span class="tok-s">[next level]</span> <span class="tok-o">&#39;</span><span class="tok-p">()</span> <span class="tok-p">(</span><span class="tok-nb">fn </span><span class="tok-p">()</span>
    <span class="tok-p">(</span><span class="tok-nf">level-reset</span><span class="tok-p">)</span>

    <span class="tok-p">(</span><span class="tok-nb">define </span><span class="tok-nv">lnum</span> <span class="tok-s">[level number]</span> <span class="tok-p">(</span><span class="tok-nb">+ </span><span class="tok-nv">level-current-number</span> <span class="tok-mi">1</span><span class="tok-p">))</span>

    <span class="tok-p">(</span><span class="tok-nb">if </span><span class="tok-p">(</span><span class="tok-nb">&gt; </span><span class="tok-nv">lnum</span> <span class="tok-nv">number-of-levels</span><span class="tok-p">)</span> <span class="tok-p">(</span><span class="tok-nb">= </span><span class="tok-nv">lnum</span> <span class="tok-mi">1</span><span class="tok-p">))</span>

    <span class="tok-p">(</span><span class="tok-nb">define </span><span class="tok-nv">name-of-fn-to-call</span> <span class="tok-s">[name of the level builder function to call]</span> <span class="tok-ss">&#39;level-</span><span class="tok-p">)</span>
    <span class="tok-p">(</span><span class="tok-nb">+= </span><span class="tok-nv">name-of-fn-to-call</span> <span class="tok-nv">lnum</span><span class="tok-p">)</span>
    <span class="tok-p">(</span><span class="tok-nb">eval </span><span class="tok-p">((</span><span class="tok-nb">eval </span><span class="tok-nv">name-of-fn-to-call</span><span class="tok-p">)))))</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_input_and_output_ports">Input and output ports</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Input and output can be done through ports. Ports can be created and attached to different
sources and sinks of data (for example the file system).</p>
</div>
<div class="paragraph">
<p>VM will prevent access to those resources that are not configured to be allowed.
For example, trying to open a file in the REPL will result in error if the
<strong>octaspire-dern-repl</strong> was not started with flag <code>-f</code> or <code>--allow-file-system-access</code>.</p>
</div>
<div class="paragraph">
<p>Here is small example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="dern"><span></span><span class="tok-p">(</span><span class="tok-nb">define </span><span class="tok-nv">f</span> <span class="tok-s">[f]</span> <span class="tok-p">(</span><span class="tok-nb">io-file-open </span><span class="tok-s">[/path/goes/here.xy]</span><span class="tok-p">))</span>

<span class="tok-p">(</span><span class="tok-nb">port-read </span><span class="tok-nv">f</span><span class="tok-p">)</span>
<span class="tok-p">(</span><span class="tok-nb">port-read </span><span class="tok-nv">f</span> <span class="tok-mi">3</span><span class="tok-p">)</span>

<span class="tok-p">(</span><span class="tok-nb">port-write </span><span class="tok-nv">f</span> <span class="tok-mi">65</span><span class="tok-p">)</span>
<span class="tok-p">(</span><span class="tok-nb">port-write </span><span class="tok-nv">f</span> <span class="tok-o">&#39;</span><span class="tok-p">(</span><span class="tok-mi">65</span> <span class="tok-mi">66</span> <span class="tok-mi">67</span><span class="tok-p">))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Ports can be explicitly closed, but it is not required; port will close automatically when the
garbage collector collects it. Some ports might also support <strong>seeking</strong>, <strong>distance measurement</strong>,
<strong>length measurement</strong> and <strong>flushing</strong>. Here is another small example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="dern"><span></span><span class="tok-p">(</span><span class="tok-nb">define </span><span class="tok-nv">f</span> <span class="tok-s">[f]</span> <span class="tok-p">(</span><span class="tok-nb">io-file-open </span><span class="tok-s">[/path/goes/here.xy]</span><span class="tok-p">))</span>

<span class="tok-p">(</span><span class="tok-nb">port-seek </span><span class="tok-nv">f</span> <span class="tok-mi">-1</span><span class="tok-p">)</span>  <span class="tok-c tok-c-Singleline">; Seek to the end</span>
<span class="tok-p">(</span><span class="tok-nb">port-write </span><span class="tok-nv">f</span> <span class="tok-mi">65</span><span class="tok-p">)</span>

<span class="tok-p">(</span><span class="tok-nb">port-seek </span><span class="tok-nv">f</span> <span class="tok-mi">0</span><span class="tok-p">)</span>   <span class="tok-c tok-c-Singleline">; Seek to the beginning</span>
<span class="tok-p">(</span><span class="tok-nb">port-write </span><span class="tok-nv">f</span> <span class="tok-mi">65</span><span class="tok-p">)</span>

<span class="tok-p">(</span><span class="tok-nb">port-seek </span><span class="tok-nv">f</span> <span class="tok-mi">-2</span><span class="tok-p">)</span>  <span class="tok-c tok-c-Singleline">; Seek to one octet from the end</span>
<span class="tok-p">(</span><span class="tok-nb">port-write </span><span class="tok-nv">f</span> <span class="tok-mi">66</span><span class="tok-p">)</span>

<span class="tok-p">(</span><span class="tok-nb">port-seek </span><span class="tok-nv">f</span> <span class="tok-mi">1</span><span class="tok-p">)</span>   <span class="tok-c tok-c-Singleline">; Seek to one octet from the beginning</span>
<span class="tok-p">(</span><span class="tok-nb">port-write </span><span class="tok-nv">f</span> <span class="tok-mi">65</span><span class="tok-p">)</span>

<span class="tok-p">(</span><span class="tok-nb">port-seek </span><span class="tok-nv">f</span>  <span class="tok-mi">1</span> <span class="tok-ss">&#39;from-current</span><span class="tok-p">)</span>  <span class="tok-c tok-c-Singleline">; Seek one octet forward  from the current position</span>
<span class="tok-p">(</span><span class="tok-nb">port-seek </span><span class="tok-nv">f</span> <span class="tok-mi">-1</span> <span class="tok-ss">&#39;from-current</span><span class="tok-p">)</span>  <span class="tok-c tok-c-Singleline">; Seek one octet backward from the current position</span>

<span class="tok-p">(</span><span class="tok-nb">port-dist </span><span class="tok-nv">f</span><span class="tok-p">)</span>     <span class="tok-c tok-c-Singleline">; Tell the distance (in octets) from the beginning of the port</span>

<span class="tok-p">(</span><span class="tok-nb">port-length </span><span class="tok-nv">f</span><span class="tok-p">)</span>   <span class="tok-c tok-c-Singleline">; Tell the size (in octets) of the port</span>

<span class="tok-p">(</span><span class="tok-nb">port-flush </span><span class="tok-nv">f</span><span class="tok-p">)</span>    <span class="tok-c tok-c-Singleline">; Buffer is flushed to disk. Happens also automatically on close.</span>
<span class="tok-p">(</span><span class="tok-nb">port-close </span><span class="tok-nv">f</span><span class="tok-p">)</span>    <span class="tok-c tok-c-Singleline">; Close port. This happens also automatically.</span>

<span class="tok-p">(</span><span class="tok-nb">port-length </span><span class="tok-nv">f</span><span class="tok-p">)</span>   <span class="tok-c tok-c-Singleline">; -1</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Input ports can be iterated with <code>for</code> in similar way that containers are iterated:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="dern"><span></span><span class="tok-p">(</span><span class="tok-nb">define </span><span class="tok-nv">f</span> <span class="tok-s">[f]</span> <span class="tok-p">(</span><span class="tok-nb">io-file-open </span><span class="tok-s">[/path/goes/here.xy]</span><span class="tok-p">))</span>

<span class="tok-p">(</span><span class="tok-nb">for </span><span class="tok-nv">i</span> <span class="tok-nv">in</span> <span class="tok-nv">f</span> <span class="tok-p">(</span><span class="tok-nb">println </span><span class="tok-nv">i</span><span class="tok-p">))</span>           <span class="tok-c tok-c-Singleline">; Print every octet</span>

<span class="tok-p">(</span><span class="tok-nb">port-seek </span><span class="tok-nv">f</span> <span class="tok-mi">0</span><span class="tok-p">)</span>                    <span class="tok-c tok-c-Singleline">; Seek to the beginning</span>
<span class="tok-p">(</span><span class="tok-nb">for </span><span class="tok-nv">i</span> <span class="tok-nv">in</span> <span class="tok-nv">f</span> <span class="tok-nv">step</span> <span class="tok-mi">2</span> <span class="tok-p">(</span><span class="tok-nb">println </span><span class="tok-nv">i</span><span class="tok-p">))</span>    <span class="tok-c tok-c-Singleline">; Print every other octet</span>

<span class="tok-p">(</span><span class="tok-nb">port-seek </span><span class="tok-nv">f</span> <span class="tok-mi">0</span><span class="tok-p">)</span>                    <span class="tok-c tok-c-Singleline">; Seek to the beginning</span>
<span class="tok-p">(</span><span class="tok-nb">for </span><span class="tok-nv">i</span> <span class="tok-nv">in</span> <span class="tok-nv">f</span> <span class="tok-nv">step</span> <span class="tok-mi">3</span> <span class="tok-p">(</span><span class="tok-nb">println </span><span class="tok-nv">i</span><span class="tok-p">))</span>    <span class="tok-c tok-c-Singleline">; Print every third octet</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>io-file-open</code> will open a file for reading and writing, <code>input-file-open</code> will open a file
only for reading and <code>output-file-open</code> will open file only for writing.</p>
</div>
<div class="paragraph">
<p>Below is short example about querying a port for supported operations:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="dern"><span></span><span class="tok-p">(</span><span class="tok-nb">define </span><span class="tok-nv">f</span> <span class="tok-s">[f]</span> <span class="tok-p">(</span><span class="tok-nb">io-file-open </span><span class="tok-s">[/path/goes/here.xy]</span><span class="tok-p">))</span>

<span class="tok-p">(</span><span class="tok-nb">port-supports-output? </span><span class="tok-nv">f</span><span class="tok-p">)</span>          <span class="tok-c tok-c-Singleline">; true</span>
<span class="tok-p">(</span><span class="tok-nb">port-supports-input?  </span><span class="tok-nv">f</span><span class="tok-p">)</span>          <span class="tok-c tok-c-Singleline">; true</span>

<span class="tok-p">(</span><span class="tok-nb">define </span><span class="tok-nv">f</span> <span class="tok-s">[f]</span> <span class="tok-p">(</span><span class="tok-nb">output-file-open </span><span class="tok-s">[/path/goes/here.xy]</span><span class="tok-p">))</span>

<span class="tok-p">(</span><span class="tok-nb">port-supports-output? </span><span class="tok-nv">f</span><span class="tok-p">)</span>          <span class="tok-c tok-c-Singleline">; true</span>
<span class="tok-p">(</span><span class="tok-nb">port-supports-input?  </span><span class="tok-nv">f</span><span class="tok-p">)</span>          <span class="tok-c tok-c-Singleline">; false</span>

<span class="tok-p">(</span><span class="tok-nb">define </span><span class="tok-nv">f</span> <span class="tok-s">[f]</span> <span class="tok-p">(</span><span class="tok-nb">input-file-open </span><span class="tok-s">[/path/goes/here.xy]</span><span class="tok-p">))</span>

<span class="tok-p">(</span><span class="tok-nb">port-supports-output? </span><span class="tok-nv">f</span><span class="tok-p">)</span>          <span class="tok-c tok-c-Singleline">; false</span>
<span class="tok-p">(</span><span class="tok-nb">port-supports-input?  </span><span class="tok-nv">f</span><span class="tok-p">)</span>          <span class="tok-c tok-c-Singleline">; true</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You can use <code>port-write</code> and <code>+=</code> to write to a port octets with values <code>integer</code>, <code>character</code>,
<code>string</code> and <code>vector</code> of these types. Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="dern"><span></span><span class="tok-p">(</span><span class="tok-nb">define </span><span class="tok-nv">f</span> <span class="tok-s">[f]</span> <span class="tok-p">(</span><span class="tok-nb">io-file-open </span><span class="tok-s">[/path/goes/here.xy]</span><span class="tok-p">))</span>

<span class="tok-p">(</span><span class="tok-nb">+= </span><span class="tok-nv">f</span> <span class="tok-sc">|a|</span> <span class="tok-sc">|b|</span> <span class="tok-s">[ cat]</span> <span class="tok-sc">|!|</span><span class="tok-p">)</span>  <span class="tok-c tok-c-Singleline">; ab cat!</span>

<span class="tok-p">(</span><span class="tok-nb">port-write </span><span class="tok-nv">f</span> <span class="tok-o">&#39;</span><span class="tok-p">(</span><span class="tok-mi">65</span> <span class="tok-sc">|A|</span> <span class="tok-s">[ Hi!]</span><span class="tok-p">))</span> <span class="tok-c tok-c-Singleline">; AA Hi!</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_converting_between_types">Converting between types</h2>
<div class="sectionbody">
<div class="paragraph">
<p>TODO</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_searching_and_indexing">Searching and indexing</h2>
<div class="sectionbody">
<div class="paragraph">
<p>TODO</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_loading_libraries_with_code_require_code">Loading libraries with <code>require</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Dern has support for loading libraries or "plugins" during run time with the builtin <code>require</code>.
Before loading the requested library, <code>require</code> checks whether the library is already loaded,
and loads it only if it isn&#8217;t already loaded.</p>
</div>
<div class="paragraph">
<p>It first tries to find a source library (.dern file) with the given name. If it finds, it loads
that. Next it tries to find a binary library (.so file in Unix) and loads that if found.</p>
</div>
<div class="paragraph">
<p>So, in the example below, <code>require</code> tries first to find file named <strong>mylib.dern</strong> and then,
if the system is Unix, file named <strong>libmylib.so</strong>.</p>
</div>
<div class="paragraph">
<p>Here is small example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="dern"><span></span><span class="tok-p">(</span><span class="tok-nb">require </span><span class="tok-ss">&#39;mylib</span><span class="tok-p">)</span>
<span class="tok-p">(</span><span class="tok-nf">mylib-say</span> <span class="tok-s">[Hello world from library]</span><span class="tok-p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If <code>mylib</code>-library is required later again, there is no need to search and load it again, because
<code>require</code> know that a library with that name is already loaded.</p>
</div>
<div class="paragraph">
<p>Below is a small example of a binary library for <strong>Linux</strong>, <strong>FreeBSD</strong>, <strong>NetBSD</strong>, <strong>Haiku</strong> and
<strong>MINIX 3</strong> systems.</p>
</div>
<div class="listingblock">
<div class="title">mylib.c</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><span></span><span class="tok-cm">/***</span>
<span class="tok-cm">  To build this file into a shared library in Linux system:</span>

<span class="tok-cm">  gcc -c -fPIC mylib.c -I ../../../include -I ../../../external/octaspire_core/include</span>
<span class="tok-cm">  gcc -shared -o libmylib.so mylib.o</span>
<span class="tok-cm">***/</span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;octaspire/core/octaspire_helpers.h&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&quot;octaspire/dern/octaspire_dern_vm.h&quot;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&quot;octaspire/dern/octaspire_dern_environment.h&quot;</span><span class="tok-cp"></span>

<span class="tok-n">octaspire_dern_value_t</span> <span class="tok-o">*</span><span class="tok-nf">mylib_say</span><span class="tok-p">(</span>
    <span class="tok-n">octaspire_dern_vm_t</span> <span class="tok-o">*</span><span class="tok-n">vm</span><span class="tok-p">,</span>
    <span class="tok-n">octaspire_dern_value_t</span> <span class="tok-o">*</span><span class="tok-n">arguments</span><span class="tok-p">,</span>
    <span class="tok-n">octaspire_dern_value_t</span> <span class="tok-o">*</span><span class="tok-n">environment</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-n">OCTASPIRE_HELPERS_UNUSED_PARAMETER</span><span class="tok-p">(</span><span class="tok-n">environment</span><span class="tok-p">);</span>

    <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">octaspire_dern_value_as_vector_get_length</span><span class="tok-p">(</span><span class="tok-n">arguments</span><span class="tok-p">)</span> <span class="tok-o">!=</span> <span class="tok-mi">1</span><span class="tok-p">)</span>
    <span class="tok-p">{</span>
        <span class="tok-k">return</span> <span class="tok-n">octaspire_dern_vm_create_new_value_error_from_c_string</span><span class="tok-p">(</span>
            <span class="tok-n">vm</span><span class="tok-p">,</span>
            <span class="tok-s">&quot;mylib-say expects one argument&quot;</span><span class="tok-p">);</span>
    <span class="tok-p">}</span>

    <span class="tok-n">octaspire_dern_value_t</span> <span class="tok-k">const</span> <span class="tok-o">*</span> <span class="tok-k">const</span> <span class="tok-n">messageVal</span> <span class="tok-o">=</span>
        <span class="tok-n">octaspire_dern_value_as_vector_get_element_at_const</span><span class="tok-p">(</span><span class="tok-n">arguments</span><span class="tok-p">,</span> <span class="tok-mi">0</span><span class="tok-p">);</span>

    <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">messageVal</span><span class="tok-o">-&gt;</span><span class="tok-n">typeTag</span> <span class="tok-o">!=</span> <span class="tok-n">OCTASPIRE_DERN_VALUE_TAG_STRING</span><span class="tok-p">)</span>
    <span class="tok-p">{</span>
        <span class="tok-k">return</span> <span class="tok-n">octaspire_dern_vm_create_new_value_error_from_c_string</span><span class="tok-p">(</span>
            <span class="tok-n">vm</span><span class="tok-p">,</span>
            <span class="tok-s">&quot;mylib-say expects string argument&quot;</span><span class="tok-p">);</span>
    <span class="tok-p">}</span>

    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;%s</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">octaspire_dern_value_as_string_get_c_string</span><span class="tok-p">(</span><span class="tok-n">messageVal</span><span class="tok-p">));</span>

    <span class="tok-k">return</span> <span class="tok-n">octaspire_dern_vm_create_new_value_boolean</span><span class="tok-p">(</span><span class="tok-n">vm</span><span class="tok-p">,</span> <span class="tok-nb">true</span><span class="tok-p">);</span>
<span class="tok-p">}</span>

<span class="tok-kt">bool</span> <span class="tok-nf">mylib_init</span><span class="tok-p">(</span><span class="tok-n">octaspire_dern_vm_t</span> <span class="tok-o">*</span> <span class="tok-k">const</span> <span class="tok-n">vm</span><span class="tok-p">,</span> <span class="tok-n">octaspire_dern_environment_t</span> <span class="tok-o">*</span> <span class="tok-k">const</span> <span class="tok-n">targetEnv</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-n">octaspire_helpers_verify</span><span class="tok-p">(</span><span class="tok-n">vm</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-n">targetEnv</span><span class="tok-p">);</span>

    <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-o">!</span><span class="tok-n">octaspire_dern_vm_create_and_register_new_builtin</span><span class="tok-p">(</span>
        <span class="tok-n">vm</span><span class="tok-p">,</span>
        <span class="tok-s">&quot;mylib-say&quot;</span><span class="tok-p">,</span>
        <span class="tok-n">mylib_say</span><span class="tok-p">,</span>
        <span class="tok-mi">1</span><span class="tok-p">,</span>
        <span class="tok-s">&quot;mylib says something&quot;</span><span class="tok-p">,</span>
        <span class="tok-n">targetEnv</span><span class="tok-p">))</span>
    <span class="tok-p">{</span>
        <span class="tok-k">return</span> <span class="tok-nb">false</span><span class="tok-p">;</span>
    <span class="tok-p">}</span>

    <span class="tok-k">return</span> <span class="tok-nb">true</span><span class="tok-p">;</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>See directory doc/examples/plugin in the source distribution for an example with Makefiles
for different systems.</p>
</div>
<div class="sect2">
<h3 id="_building_and_using_a_binary_library_in_haiku">Building and using a binary library in Haiku</h3>
<div class="paragraph">
<p>Run these commands from the <strong>build</strong>-directory of the source distribution:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>make -C ../doc/examples/plugin -f Makefile.Haiku
<span class="tok-nv">LIBRARY_PATH</span><span class="tok-o">=</span><span class="tok-nv">$LIBRARY_PATH</span>:../doc/examples/plugin ./octaspire-dern-repl -c</code></pre>
</div>
</div>
<div class="paragraph">
<p>Write into the REPL:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="dern"><span></span><span class="tok-p">(</span><span class="tok-nb">require </span><span class="tok-ss">&#39;mylib</span><span class="tok-p">)</span>
<span class="tok-p">(</span><span class="tok-nf">mylib-say</span> <span class="tok-s">[Hello world from library]</span><span class="tok-p">)</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_building_and_using_a_binary_library_in_minix_3">Building and using a binary library in MINIX 3</h3>
<div class="paragraph">
<p>Run these commands from the <strong>build</strong>-directory of the source distribution:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>make -C ../doc/examples/plugin -f Makefile.MINIX3
<span class="tok-nv">LD_LIBRARY_PATH</span><span class="tok-o">=</span>../doc/examples/plugin ./octaspire-dern-repl -c</code></pre>
</div>
</div>
<div class="paragraph">
<p>Write into the REPL:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="dern"><span></span><span class="tok-p">(</span><span class="tok-nb">require </span><span class="tok-ss">&#39;mylib</span><span class="tok-p">)</span>
<span class="tok-p">(</span><span class="tok-nf">mylib-say</span> <span class="tok-s">[Hello world from library]</span><span class="tok-p">)</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_building_and_using_a_binary_library_in_linux">Building and using a binary library in Linux</h3>
<div class="paragraph">
<p>Run these commands from the <strong>build</strong>-directory of the source distribution:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>make -C ../doc/examples/plugin
<span class="tok-nv">LD_LIBRARY_PATH</span><span class="tok-o">=</span>../doc/examples/plugin ./octaspire-dern-repl -c</code></pre>
</div>
</div>
<div class="paragraph">
<p>Write into the REPL:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="dern"><span></span><span class="tok-p">(</span><span class="tok-nb">require </span><span class="tok-ss">&#39;mylib</span><span class="tok-p">)</span>
<span class="tok-p">(</span><span class="tok-nf">mylib-say</span> <span class="tok-s">[Hello world from library]</span><span class="tok-p">)</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_building_and_using_a_binary_library_in_freebsd">Building and using a binary library in FreeBSD</h3>
<div class="paragraph">
<p>Run these commands from the <strong>build</strong>-directory of the source distribution:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>make -C ../doc/examples/plugin -f Makefile.FreeBSD
<span class="tok-nv">LD_LIBRARY_PATH</span><span class="tok-o">=</span>../doc/examples/plugin ./octaspire-dern-repl -c</code></pre>
</div>
</div>
<div class="paragraph">
<p>Write into the REPL:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="dern"><span></span><span class="tok-p">(</span><span class="tok-nb">require </span><span class="tok-ss">&#39;mylib</span><span class="tok-p">)</span>
<span class="tok-p">(</span><span class="tok-nf">mylib-say</span> <span class="tok-s">[Hello world from library]</span><span class="tok-p">)</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_building_and_using_a_binary_library_in_netbsd">Building and using a binary library in NetBSD</h3>
<div class="paragraph">
<p>Run these commands from the <strong>build</strong>-directory of the source distribution:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>make -C ../doc/examples/plugin
<span class="tok-nv">LD_LIBRARY_PATH</span><span class="tok-o">=</span>../doc/examples/plugin ./octaspire-dern-repl -c</code></pre>
</div>
</div>
<div class="paragraph">
<p>Write into the REPL:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="dern"><span></span><span class="tok-p">(</span><span class="tok-nb">require </span><span class="tok-ss">&#39;mylib</span><span class="tok-p">)</span>
<span class="tok-p">(</span><span class="tok-nf">mylib-say</span> <span class="tok-s">[Hello world from library]</span><span class="tok-p">)</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_embedding_in_c_programs">Embedding in C programs</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section is not ready yet. In the meantime you can see Dern in "real" use at:
<a href="http://www.octaspire.com/maze">Maze</a> and <a href="http://www.octaspire.com/lightboard">Lightboard</a>.</p>
</div>
<div class="paragraph">
<p>Octaspire Maze and Lightboard are games (work in progress) that are being written using Dern and C99.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tool_support">Tool support</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>etc</strong>-directory of the source distribution contains syntax files for <strong>vim</strong>, <strong>emacs</strong>,
<strong>pygments</strong> and <strong>GNU source-highlight</strong>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_building_the_development_repository">Building the development repository</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To build Dern without the unit tests, replace <strong>cmake ..</strong> with
<strong>cmake -DOCTASPIRE_DERN_UNIT_TEST=OFF ..</strong> in the instructions that follow.</p>
</div>
<div class="sect2">
<h3 id="_raspberry_pi_debian_and_ubuntu">Raspberry Pi, Debian and Ubuntu</h3>
<div class="paragraph">
<p>To build Dern from the regular source distribution in Raspberry Pi (Raspbian), Debian or Ubuntu (16.04 LTS) system:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>sudo apt-get install cmake git
git clone https://github.com/octaspire/dern.git
<span class="tok-nb">cd</span> dern/build
cmake ..
make</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_arch_linux">Arch Linux</h3>
<div class="paragraph">
<p>To build on Arch Linux (Arch Linux ARM) system:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>sudo pacman -S cmake git gcc make
git clone https://github.com/octaspire/dern.git
<span class="tok-nb">cd</span> dern/build
cmake ..
make</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_haiku">Haiku</h3>
<div class="paragraph">
<p>To build on Haiku (Version Walter (Revision hrev51127) x86_gcc2):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>pkgman install gcc_x86 cmake_x86
git clone https://github.com/octaspire/dern.git
<span class="tok-nb">cd</span> dern/build
<span class="tok-nv">CC</span><span class="tok-o">=</span>gcc-x86 cmake ..
make</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_freebsd">FreeBSD</h3>
<div class="paragraph">
<p>To build on FreeBSD (FreeBSD-11.0-RELEASE-arm-armv6-RPI2) system:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>sudo pkg install git cmake
git clone https://github.com/octaspire/dern.git
<span class="tok-nb">cd</span> dern/build
cmake ..
make</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_netbsd">NetBSD</h3>
<div class="paragraph">
<p>To build on NetBSD (NetBSD-7.1-i386) system:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>sudo pkgin install cmake git
git clone git://github.com/octaspire/dern
<span class="tok-nb">cd</span> dern
perl -pi -e <span class="tok-s1">&#39;s/https/git/&#39;</span> .gitmodules
<span class="tok-nb">cd</span> build
cmake ..
make</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_minix_3">MINIX 3</h3>
<div class="paragraph">
<p>To build from the regular source distribution on MINIX 3 (minix_R3.3.0-588a35b) system:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>su root
pkgin install cmake clang binutils git-base
<span class="tok-nb">exit</span>
git clone git://github.com/octaspire/dern
<span class="tok-nb">cd</span> dern
perl -pi -e <span class="tok-s1">&#39;s/https/git/&#39;</span> .gitmodules
<span class="tok-nb">cd</span> build
cmake ..
make</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_other_systems">Other systems</h3>
<div class="paragraph">
<p>On different systems the required commands can vary. In any case, you should install
a <strong>C compiler</strong>, <strong>cmake</strong> and <strong>git</strong>. Depending on the system, you might need to install
also either <strong>make</strong> or <strong>ninja</strong>.</p>
</div>
<div class="paragraph">
<p>This is all there should be to it; <strong>octaspire core</strong> is included as a git submodule
and it should be updated and be build automatically, so when make finishes, everything
should be ready.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_running_dern">Running Dern</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To run the unit tests:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>test/octaspire-dern-test-runner</code></pre>
</div>
</div>
<div class="paragraph">
<p>To start the REPL with color diagnostics (requires support for ANSI color escapes):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>./octaspire-dern-repl -c</code></pre>
</div>
</div>
<div class="paragraph">
<p>To see the allowed options run:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>./octaspire-dern-repl -h</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Man pages are not ready yet.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_using_the_amalgamated_source">Using the amalgamated source</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>etc</strong>-directory of the source distribution contains amalgamated version
of the source code. All the headers, implementation files and unit tests
are concatenated with a script into a single file. This one file
is all that is needed to use Octaspire Dern. The same single file
can be used to (by giving different compiler flags):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>as an include in a project that wants to embed the Dern language</p>
</li>
<li>
<p>as a stand-alone Dern REPL</p>
</li>
<li>
<p>as a stand-alone unit test runner</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnote_1">
<a href="#_footnoteref_1">1</a>. <a href="https://en.wiktionary.org/wiki/dern" class="bare">https://en.wiktionary.org/wiki/dern</a>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2017-08-01 23:47:18 EEST
</div>
</div>
</body>
</html>