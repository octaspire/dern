<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2018-06-29 Fri 10:00 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Octaspire Dern Manual</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="www.octaspire.com" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="https://octaspire.io/bundle-with-toc.min.css"/>
<script src="https://octaspire.io/bundle-with-toc.min.js" type="text/javascript" ></script>
<style>pre.src {background-color: #303030; color: #e5e5e5;}</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2018 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        displayAlign: "center",
        displayIndent: "0em",

        "HTML-CSS": { scale: 100,
                        linebreaks: { automatic: "false" },
                        webFont: "TeX"
                       },
        SVG: {scale: 100,
              linebreaks: { automatic: "false" },
              font: "TeX"},
        NativeMML: {scale: 100},
        TeX: { equationNumbers: {autoNumber: "AMS"},
               MultLineWidth: "85%",
               TagSide: "right",
               TagIndent: ".8em"
             }
});
</script>
<script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML"></script>
</head>
<body>
<div id="content">
<h1 class="title">Octaspire Dern Manual</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org885403c">1. About</a></li>
<li><a href="#orgc8de449">2. Building the amalgamated source release</a>
<ul>
<li><a href="#org1480d41">2.1. Linux, FreeBSD, OpenBSD, NetBSD, OpenIndiana, DragonFly BSD, MidnightBSD, MINIX 3, Haiku, macOS, Termux, AROS</a></li>
<li><a href="#orge0f60b9">2.2. Plan9</a></li>
<li><a href="#orgbabcff7">2.3. Plan9 on ARM architecture</a></li>
<li><a href="#org4df787d">2.4. Windows using MinGW and Git</a></li>
<li><a href="#orgc92b99e">2.5. ReactOS</a></li>
<li><a href="#org80fa4e3">2.6. AmigaOS 4.x</a></li>
</ul>
</li>
<li><a href="#org7dc765d">3. Hello world</a></li>
<li><a href="#orgbdc6b28">4. Values</a></li>
<li><a href="#orgecefe15">5. Single and multiline comments, making script files executable</a></li>
<li><a href="#org9c241ce">6. Binding names to values with <code>define</code></a>
<ul>
<li><a href="#orge975951">6.1. Binding in other environments than the current one</a></li>
</ul>
</li>
<li><a href="#orgfa9c98d">7. Iteration</a></li>
<li><a href="#orga21a9d3">8. Comparing and changing values, predicates</a></li>
<li><a href="#orgc06e440">9. Removing the last value from a vector</a></li>
<li><a href="#orgaf624fc">10. Branching and selection</a></li>
<li><a href="#org78c66a5">11. Selecting values from collections</a></li>
<li><a href="#orgf768510">12. Accessing and manipulating command line arguments and environment variables</a></li>
<li><a href="#orgf84a2ac">13. Formatted and regular printing</a></li>
<li><a href="#org6042b7f">14. Formatted string creation</a></li>
<li><a href="#orgbb97136">15. Functions with variable number of arguments</a></li>
<li><a href="#org881198a">16. Environments</a></li>
<li><a href="#orgf6abdb6">17. Getting help with <code>howto</code></a></li>
<li><a href="#orgba5ca35">18. Returning from functions early</a></li>
<li><a href="#orgd6706ef">19. Evaluating values</a></li>
<li><a href="#org6b15543">20. Input and output ports</a></li>
<li><a href="#org0a8528a">21. Converting between types</a></li>
<li><a href="#org123d3e5">22. Searching and indexing</a></li>
<li><a href="#org804fbd1">23. Loading libraries with <code>require</code></a>
<ul>
<li><a href="#org5b9fa57">23.1. Building and using a binary library in Haiku</a></li>
<li><a href="#org738ab1b">23.2. Building and using a binary library in MINIX 3</a></li>
<li><a href="#org2932337">23.3. Building and using a binary library in Linux</a></li>
<li><a href="#org421fd11">23.4. Building and using a binary library in FreeBSD</a></li>
<li><a href="#orgf5a02e7">23.5. Building and using a binary library in NetBSD</a></li>
</ul>
</li>
<li><a href="#org9f944cf">24. Using custom library loader with <code>require</code></a></li>
<li><a href="#orgcab30a2">25. Embedding in C programs</a></li>
<li><a href="#orgb958fcd">26. Tool support</a></li>
<li><a href="#org09c6484">27. Using the development repository</a>
<ul>
<li><a href="#orgf2ebe6a">27.1. Raspberry Pi, Debian and Ubuntu</a></li>
<li><a href="#org8fb2827">27.2. Arch Linux</a></li>
<li><a href="#orgd6ce023">27.3. Haiku</a></li>
<li><a href="#orgdb2a47d">27.4. FreeBSD</a></li>
<li><a href="#orgefed063">27.5. NetBSD</a></li>
<li><a href="#org34a4bfa">27.6. MINIX 3</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-org885403c" class="outline-2">
<h2 id="org885403c"><span class="section-number-2">1</span> About</h2>
<div class="outline-text-2" id="text-1">
<p>
Octaspire Dern<sup><a id="fnr.1" class="footref" href="#fn.1">1</a></sup> is a platform independent programming language in
standard C99. It is a dialect of Lisp with influences from Scheme,
Emacs Lisp and C. It runs in Amiga, Plan9, Unix, Windows and almost
anything between.
</p>

<p>
Dern is dynamically typed language with <b>lexical scoping</b> and has <b>mark and sweep</b>
garbage collector. Functions in Dern are first class values. Unlike Lisp, that
uses linked lists as its major data structure, Dern uses vectors.
</p>

<p>
Dern is written in standard <b>C99</b> and depends only on a C compiler,
standard library and <b>octaspire-core</b> library. Dern should compile cleanly
without any warnings using <code>-Wall -Wextra</code> on any compiler supporting a subset
of C99. Currently it is tested with <b>gcc</b>, <b>clang</b>, <b>Tiny C Compiler (tcc)</b>,
<b>Portable C compiler (pcc)</b> and Plan9&rsquo;s <b>8c</b>.
</p>

<p>
Dern supports imperative and functional programming. It has atomic types
<code>integer</code>, <code>real</code>, (utf-8) <code>string</code>, (utf-8) <code>character</code>, (utf-8) <code>symbol</code>, <code>boolean</code>,
<code>nil</code>, (input/output) <code>port</code>, <code>hash-map</code>, <code>list</code>, <code>queue</code>, <code>environment</code>,
first class <code>function</code>, <code>special</code> and <code>builtin</code>. As non-atomic type it has <code>vector</code>.
So, where in scheme <code>'(1 2 3)</code> is a list, in Dern it is a vector.
</p>

<p>
Every variable and function definition in Dern must be documented by a
<b>documentation string</b>. Dern also makes sure that every formal function
parameter is documented in the documentation of a function definition.
The documentation can be accessed with <code>doc</code>-function. <code>howto</code> is
another useful function. You can give it examples of function arguments
and expected result and it will tell you what functions you can call to
get the expected result from the given arguments.
</p>

<p>
Dern can also be extended with functions written in C; C-functions can be registered
as <code>builtin</code> or <code>special</code>. Arguments to builtins are evaluated normally, but to specials
are not, so specials can be used to implement special forms like <code>if</code>, etc. When
defining your own builtins and specials, you can tell Dern whether the function
can be tested by <code>howto</code> or not.
</p>

<p>
Dern has also a library system, that allows one to load libraries using builtin <code>require</code>.
On most systems Dern also supports loading of binary libraries (.so, .dll or .dylib  files).
For the end user, it doesn&rsquo;t matter whether the library she loaded was binary or written in
Dern; it can be used exactly the same way.
</p>

<p>
By using the amalgamated version of Dern, you need only one file. This same single source
file, <b>octaspire-dern-amalgamated.c</b>, can be compiled into (1) stand-alone unit test runner,
(2) interactive Dern-REPL and (3) used as a single header file library in programs that want
to embed the Dern-language. The file contains also the source for the Octaspire Core library.
The amalgamated source release is the recommended way of using Dern; there is only one file
to keep track of, it is easy to use with any build system, and the resulting machine code
even runs faster.
</p>

<p>
Dern is portable and is tested and known to run in Linux, FreeBSD, OpenBSD, NetBSD,
OpenIndiana, DragonFly BSD, MidnightBSD, MINIX 3, Haiku, Windows, ReactOS, macOS, Termux,
Plan9, AROS and Amiga.
The <b>how-to-build</b>-directory of the amalgamated source release contains a build script
for all tested platforms.
</p>

<p>
Please note, that this is the first language I have ever designed or implemented. There
are also a lot of features not yet implemented and probably bugs not yet fixed. The interpreter
is currently also just a tree walker, and not a faster bytecode vm.
</p>

<p>
Dern uses
<a href="http://semver.org">Semantic Versioning 2.0.0</a> version numbering scheme.
As long as the MAJOR version number is zero anything can change at any time,
even in backwards incompatible manner.
</p>
</div>
</div>

<div id="outline-container-orgc8de449" class="outline-2">
<h2 id="orgc8de449"><span class="section-number-2">2</span> Building the amalgamated source release</h2>
<div class="outline-text-2" id="text-2">
<p>
The amalgamated source release is the recommended way of using Dern, if you don&rsquo;t need to
modify Dern itself. To use the amalgamated release, you will need only a C compiler and
C standard library supporting a subset of C99.
</p>
</div>

<div id="outline-container-org1480d41" class="outline-3">
<h3 id="org1480d41"><span class="section-number-3">2.1</span> Linux, FreeBSD, OpenBSD, NetBSD, OpenIndiana, DragonFly BSD, MidnightBSD, MINIX 3, Haiku, macOS, Termux, AROS</h3>
<div class="outline-text-3" id="text-2-1">
<div class="org-src-container">
<pre class="src src-sh">curl -O octaspire.com/dern.tar.bz2
curl -O https://octaspire.io/dern.tar.bz2.sha512
sha512sum -c dern.tar.bz2.sha512
tar jxf dern.tar.bz2
<span style="color: #DCDCCC; font-weight: bold;">cd</span> dern
sh how-to-build/YOUR_PLATFORM_NAME_HERE.XX
</pre>
</div>

<p>
replace <b>YOUR<sub>PLATFORM</sub><sub>NAME</sub><sub>HERE.XX</sub></b> with <b>FreeBSD.sh</b>, <b>NetBSD.sh</b>, <b>OpenBSD.sh</b>,
<b>OpenIndiana.sh</b>, <b>DragonFlyBSD.sh</b>, <b>MidnightBSD</b>, <b>linux.sh</b>, <b>minix3.sh</b>,
<b>haiku.sh</b>, <b>macOS.sh</b>, <b>termux.sh</b> or <b>AROS.sh</b>.
More scripts for different platforms will be added later.
</p>
</div>
</div>

<div id="outline-container-orge0f60b9" class="outline-3">
<h3 id="orge0f60b9"><span class="section-number-3">2.2</span> Plan9</h3>
<div class="outline-text-3" id="text-2-2">
<div class="org-src-container">
<pre class="src src-sh">hget http://octaspire.com/dern.tar.bz2 &gt; dern.tar.bz2
tar xf dern.tar.bz2
<span style="color: #DCDCCC; font-weight: bold;">cd</span> dern/*
rc how-to-build/Plan9.sh
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbabcff7" class="outline-3">
<h3 id="orgbabcff7"><span class="section-number-3">2.3</span> Plan9 on ARM architecture</h3>
<div class="outline-text-3" id="text-2-3">
<div class="org-src-container">
<pre class="src src-sh">hget http://octaspire.com/dern.tar.bz2 &gt; dern.tar.bz2
tar xf dern.tar.bz2
<span style="color: #DCDCCC; font-weight: bold;">cd</span> dern/*
rc how-to-build/Plan9-arm.sh
</pre>
</div>
</div>
</div>

<div id="outline-container-org4df787d" class="outline-3">
<h3 id="org4df787d"><span class="section-number-3">2.4</span> Windows using MinGW and Git</h3>
<div class="outline-text-3" id="text-2-4">
<p>
Download and install <b>MinGW</b> from
<a href="http://www.mingw.org">www.mingw.org</a> into a directory, for example into <code>C:\MinGW</code>.
Install <b>GCC</b> compiler.
Add <code>MinGW\bin</code> into the <code>PATH</code>
(for example, if you installed into <code>C:\MinGW</code>, add <code>C:\MinGW\bin</code> into the <code>PATH</code>).
</p>

<p>
Download and install <a href="https://git-scm.com/download/win">Git for Windows</a>.
</p>

<p>
Start <b>Git Bash</b> and run the following commands:
</p>

<div class="org-src-container">
<pre class="src src-sh">git clone https://github.com/octaspire/dern.git
<span style="color: #DCDCCC; font-weight: bold;">cd</span> dern/release
how-to-build/windows.sh
</pre>
</div>

<p>
Start <b>Windows Command Prompt</b> and change directory to the same release directory, as
above. Run examples and programs in the <b>Command Prompt</b> window
(NOT in the Git Bash window).
</p>
</div>
</div>

<div id="outline-container-orgc92b99e" class="outline-3">
<h3 id="orgc92b99e"><span class="section-number-3">2.5</span> ReactOS</h3>
<div class="outline-text-3" id="text-2-5">
<p>
Use <b>ReactOS Applications Manager</b> to install <b>CodeBlocks with GCC compiler</b> and
a <b>web browser</b> and <b>7-Zip</b>. Remember the path where you installed CodeBlocks.
Add <b>CodeBlocks\MinGW\bin</b> and <b>CodeBlocks\MinGW</b> into the <b>PATH</b>.
Use a web browser to download
<a href="https://octaspire.io/dern.tar.bz2">Dern release</a>.
Extract the file two times using 7-Zip, first into <b>dern.tar</b> and then into <b>dern</b>.
Go to the path where you extracted the archive and into the <b>version-x.y.z</b> directory.
Run command <b>how-to-build\ReactOS.bat</b>. If you need, you can download curses and SDL2
libraries and headers from
<a href="https://octaspire.io/dern-windeps.zip">here</a>.
Extract the archive and move the contents into the <b>version-x.y.z</b> directory.
</p>
</div>
</div>

<div id="outline-container-org80fa4e3" class="outline-3">
<h3 id="org80fa4e3"><span class="section-number-3">2.6</span> AmigaOS 4.x</h3>
<div class="outline-text-3" id="text-2-6">
<p>
Download and install
<a href="http://www.hyperion-entertainment.biz/index.php/downloads?view=download&amp;layout=form&amp;file=82">AmigaOS SDK</a>.
Download and extract
<a href="http://aminet.net/util/arc/bzip2.lha">bzip2</a> to get `bzip2<sub>68k</sub>` executable.
Download the
<a href="http://octaspire.com/dern.tar.bz2">amalgamated Dern source release</a>.
</p>

<p>
Open Shell window and run the following commands:
</p>

<div class="org-src-container">
<pre class="src src-sh">bzip2_68k -dk dern.tar.bz2
tar xf dern.tar
<span style="color: #DCDCCC; font-weight: bold;">cd</span> dern
sh how-to-build/AmigaOS41.sh
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org7dc765d" class="outline-2">
<h2 id="org7dc765d"><span class="section-number-2">3</span> Hello world</h2>
<div class="outline-text-2" id="text-3">
<p>
Here we have a version of the classic &rsquo;Hello World&rsquo;-program in Octaspire Dern.
Instead of just printing &rsquo;Hello, World!&rsquo;, it is a bit more complex to give
you some feeling for the language. If you are in Unix-like system and
have <b>octaspire-dern-repl</b> in somewhere on your PATH, you can make the
script executable using the shebang. You can also run the file by
<code>octaspire-dern-repl hello-world.dern</code> or by writing it or parts
of it directly to the interactive REPL.
</p>

<div class="org-src-container">
<pre class="src src-octaspire-dern"><span style="color: #7F9F7F;">#!/usr/bin/env octaspire-dern-repl</span>
<span style="color: #7F9F7F;">This is a multiline comment.    !#</span>

<span style="color: #7F9F7F;">; 1. Print once 'Hello, World!' and newline</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">println</span> <span style="color: #CC9393;">[Hello, World!]</span><span style="color: #ff8c00;">)</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">println</span><span style="color: #ff8c00;">)</span>

<span style="color: #7F9F7F;">; 2. Print 11 times 'Hello x World!', x is 0 .. 10</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">for</span> i from <span style="color: #ff1493;">{</span>D+0<span style="color: #ff1493;">}</span> to <span style="color: #ff1493;">{</span>D+10<span style="color: #ff1493;">}</span>
  <span style="color: #ff1493;">(</span><span style="color: #DCDCCC; font-weight: bold;">println</span> <span style="color: #CC9393;">[Hello {} World!]</span> i<span style="color: #ff1493;">)</span><span style="color: #ff8c00;">)</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">println</span><span style="color: #ff8c00;">)</span>

<span style="color: #7F9F7F;">; 3. Print greetings to everybody on the vector</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">define</span> names <span style="color: #DCDCCC; font-weight: bold;">as</span> '<span style="color: #ff1493;">(</span>John Alice Mark<span style="color: #ff1493;">)</span> <span style="color: #CC9393;">[Greetings list]</span><span style="color: #ff8c00;">)</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">for</span> i <span style="color: #DCDCCC; font-weight: bold;">in</span> names <span style="color: #ff1493;">(</span><span style="color: #DCDCCC; font-weight: bold;">println</span> <span style="color: #CC9393;">[Happy holidays, {}!]</span> i<span style="color: #ff1493;">)</span><span style="color: #ff8c00;">)</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">println</span><span style="color: #ff8c00;">)</span>

<span style="color: #7F9F7F;">; 4. Add new name, 'Lola', to the names to be greeted</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">+=</span> names 'Lola<span style="color: #ff8c00;">)</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">for</span> i <span style="color: #DCDCCC; font-weight: bold;">in</span> names <span style="color: #ff1493;">(</span><span style="color: #DCDCCC; font-weight: bold;">println</span> <span style="color: #CC9393;">[Happy holidays, {}!]</span> i<span style="color: #ff1493;">)</span><span style="color: #ff8c00;">)</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">println</span><span style="color: #ff8c00;">)</span>

<span style="color: #7F9F7F;">; 5. Remove one name, 'Mark'</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">-=</span> names 'Mark<span style="color: #ff8c00;">)</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">for</span> i <span style="color: #DCDCCC; font-weight: bold;">in</span> names <span style="color: #ff1493;">(</span><span style="color: #DCDCCC; font-weight: bold;">println</span> <span style="color: #CC9393;">[Happy holidays, {}!]</span> i<span style="color: #ff1493;">)</span><span style="color: #ff8c00;">)</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">println</span><span style="color: #ff8c00;">)</span>

<span style="color: #7F9F7F;">; 6. Define new function to greet people and use it</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">define</span> greeter <span style="color: #DCDCCC; font-weight: bold;">as</span> <span style="color: #ff1493;">(</span><span style="color: #DCDCCC; font-weight: bold;">fn</span> <span style="color: #7fff00;">(</span>greeting name<span style="color: #7fff00;">)</span>
    <span style="color: #7fff00;">(</span><span style="color: #DCDCCC; font-weight: bold;">println</span> <span style="color: #CC9393;">[{}, {}!]</span> greeting name<span style="color: #7fff00;">)</span><span style="color: #ff1493;">)</span>
  <span style="color: #CC9393;">[My greeter function]</span> '<span style="color: #ff1493;">(</span>greeting <span style="color: #CC9393;">[the greeting]</span>
                          name <span style="color: #CC9393;">[who to greet]</span><span style="color: #ff1493;">)</span>
                          <span style="color: #DCDCCC; font-weight: bold;">howto-no</span><span style="color: #ff8c00;">)</span>

<span style="color: #ff8c00;">(</span>greeter 'Hi 'Alice<span style="color: #ff8c00;">)</span>

<span style="color: #7F9F7F;">; 7. Redefine greeter-function with early exit</span>
<span style="color: #7F9F7F;">; using 'return'</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">define</span> grumpy <span style="color: #DCDCCC; font-weight: bold;">as</span> <span style="color: #BFEBBF;">true</span> <span style="color: #CC9393;">[is our hero grumpy, or not]</span><span style="color: #ff8c00;">)</span>

<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">define</span> greeter <span style="color: #DCDCCC; font-weight: bold;">as</span> <span style="color: #ff1493;">(</span><span style="color: #DCDCCC; font-weight: bold;">fn</span> <span style="color: #7fff00;">(</span>greeting name<span style="color: #7fff00;">)</span>
    <span style="color: #7fff00;">(</span><span style="color: #DCDCCC; font-weight: bold;">if</span> grumpy <span style="color: #00bfff;">(</span><span style="color: #DCDCCC; font-weight: bold;">return</span> <span style="color: #CC9393;">[I'm grumpy and don't greet]</span><span style="color: #00bfff;">)</span><span style="color: #7fff00;">)</span>
    <span style="color: #7fff00;">(</span><span style="color: #DCDCCC; font-weight: bold;">println</span> <span style="color: #CC9393;">[{}, {}!]</span> greeting name<span style="color: #7fff00;">)</span>
    <span style="color: #7fff00;">(</span><span style="color: #DCDCCC; font-weight: bold;">string-format</span> <span style="color: #CC9393;">[I greeted "{}", as asked]</span> name<span style="color: #7fff00;">)</span><span style="color: #ff1493;">)</span>
  <span style="color: #CC9393;">[My greeter function]</span> '<span style="color: #ff1493;">(</span>greeting <span style="color: #CC9393;">[the greeting]</span>
                          name <span style="color: #CC9393;">[who to greet]</span><span style="color: #ff1493;">)</span>
                          <span style="color: #DCDCCC; font-weight: bold;">howto-no</span><span style="color: #ff8c00;">)</span>

<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">println</span> <span style="color: #ff1493;">(</span>greeter 'Hi 'Alice<span style="color: #ff1493;">)</span><span style="color: #ff8c00;">)</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">=</span> grumpy <span style="color: #BFEBBF;">false</span><span style="color: #ff8c00;">)</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">println</span> <span style="color: #ff1493;">(</span>greeter 'Hi 'Alice<span style="color: #ff1493;">)</span><span style="color: #ff8c00;">)</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">println</span><span style="color: #ff8c00;">)</span>

<span style="color: #7F9F7F;">; 8. Add names and custom greetings into a hash map</span>
<span style="color: #7F9F7F;">; and use it to greet people</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">define</span> names <span style="color: #DCDCCC; font-weight: bold;">as</span> <span style="color: #ff1493;">(</span><span style="color: #DCDCCC; font-weight: bold;">hash-map</span> 'John 'Hi
                           'Lola 'Hello
                           'Mike 'Bonjour<span style="color: #ff1493;">)</span>
                        <span style="color: #CC9393;">[My custom greetings]</span><span style="color: #ff8c00;">)</span>

<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">for</span> i <span style="color: #DCDCCC; font-weight: bold;">in</span> names <span style="color: #ff1493;">(</span>greeter <span style="color: #7fff00;">(</span>ln@ i <span style="color: #00bfff;">{</span>D+1<span style="color: #00bfff;">}</span><span style="color: #7fff00;">)</span> <span style="color: #7fff00;">(</span>ln@ i <span style="color: #00bfff;">{</span>D+0<span style="color: #00bfff;">}</span><span style="color: #7fff00;">)</span><span style="color: #ff1493;">)</span><span style="color: #ff8c00;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbdc6b28" class="outline-2">
<h2 id="orgbdc6b28"><span class="section-number-2">4</span> Values</h2>
<div class="outline-text-2" id="text-4">
<div class="org-src-container">
<pre class="src src-octaspire-dern"><span style="color: #ff8c00;">{</span>D+128<span style="color: #ff8c00;">}</span>              <span style="color: #7F9F7F;">; These are integers</span>
<span style="color: #ff8c00;">{</span>D-100<span style="color: #ff8c00;">}</span>

<span style="color: #ff8c00;">{</span>B+1001<span style="color: #ff8c00;">}</span>             <span style="color: #7F9F7F;">;   9 in binary</span>
<span style="color: #ff8c00;">{</span>B-10011<span style="color: #ff8c00;">}</span>            <span style="color: #7F9F7F;">; -19 in binary</span>

<span style="color: #ff8c00;">{</span>O+764<span style="color: #ff8c00;">}</span>              <span style="color: #7F9F7F;">;  500 in octal</span>
<span style="color: #ff8c00;">{</span>O-764<span style="color: #ff8c00;">}</span>              <span style="color: #7F9F7F;">; -500 in octal</span>

<span style="color: #ff8c00;">{</span>X+4B5<span style="color: #ff8c00;">}</span>              <span style="color: #7F9F7F;">; 1205 in hexadecimal</span>
<span style="color: #ff8c00;">{</span>X-FF<span style="color: #ff8c00;">}</span>               <span style="color: #7F9F7F;">; -255 in hexadecimal</span>

<span style="color: #ff8c00;">{</span>D+100 000 000<span style="color: #ff8c00;">}</span>      <span style="color: #7F9F7F;">; Spaces can be used</span>

<span style="color: #ff8c00;">{</span>D+3.14<span style="color: #ff8c00;">}</span>             <span style="color: #7F9F7F;">; These are real</span>
<span style="color: #ff8c00;">{</span>D-1.12<span style="color: #ff8c00;">}</span>

<span style="color: #CC9393;">[Hello]</span>           <span style="color: #7F9F7F;">; These are strings (utf-8)</span>
<span style="color: #CC9393;">[Hell|6F|]</span>        <span style="color: #7F9F7F;">; Hello</span>
<span style="color: #CC9393;">[Hello|newline|]</span>  <span style="color: #7F9F7F;">; Hello and newline</span>
<span style="color: #CC9393;">[&#31169;&#12399;&#12460;&#12521;&#12473;&#12434;&#39135;&#12409;&#12425;&#12428;&#12414;&#12377;&#12290;&#12381;&#12428;&#12399;&#31169;&#12434;&#20663;&#12388;&#12369;&#12414;&#12379;&#12435;&#12290;]</span>
<span style="color: #CC9393;">|a|</span>               <span style="color: #7F9F7F;">; These are characters (utf-8)</span>
<span style="color: #CC9393;">|newline|</span>         <span style="color: #7F9F7F;">; \n</span>
<span style="color: #CC9393;">|tab|</span>             <span style="color: #7F9F7F;">; \t</span>
<span style="color: #CC9393;">|bar|</span>             <span style="color: #7F9F7F;">; |</span>
<span style="color: #CC9393;">|string-start|</span>    <span style="color: #7F9F7F;">; [</span>
<span style="color: #CC9393;">|string-end|</span>      <span style="color: #7F9F7F;">; ]</span>
<span style="color: #CC9393;">|61|</span>              <span style="color: #7F9F7F;">; a in hexadecimal notation</span>
<span style="color: #CC9393;">|7A|</span>              <span style="color: #7F9F7F;">; z in hexadecimal notation</span>
<span style="color: #CC9393;">|30DC|</span>            <span style="color: #7F9F7F;">; &#12508; in hexadecimal notation</span>
<span style="color: #BFEBBF;">true</span>              <span style="color: #7F9F7F;">; These are booleans</span>
<span style="color: #BFEBBF;">false</span>
<span style="color: #BFEBBF;">nil</span>               <span style="color: #7F9F7F;">; Nil</span>
'<span style="color: #ff8c00;">(</span><span style="color: #ff1493;">{</span>D+1<span style="color: #ff1493;">}</span> <span style="color: #ff1493;">{</span>D+2<span style="color: #ff1493;">}</span> <span style="color: #CC9393;">|a|</span> <span style="color: #CC9393;">[cat]</span><span style="color: #ff8c00;">)</span>      <span style="color: #7F9F7F;">; These are vectors</span>
'<span style="color: #ff8c00;">()</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">hash-map</span> 'John <span style="color: #CC9393;">[likes cats]</span>  <span style="color: #7F9F7F;">; This is hash map</span>
          'Lisa <span style="color: #CC9393;">[likes dogs]</span>
          'Mike '<span style="color: #ff1493;">(</span><span style="color: #CC9393;">[likes numbers]</span> <span style="color: #7fff00;">{</span>D+1<span style="color: #7fff00;">}</span> <span style="color: #7fff00;">{</span>D+2<span style="color: #7fff00;">}</span>
                                  <span style="color: #7fff00;">{</span>D+3<span style="color: #7fff00;">}</span> <span style="color: #7fff00;">{</span>D+4<span style="color: #7fff00;">}</span><span style="color: #ff1493;">)</span>
           <span style="color: #ff1493;">{</span>D+1<span style="color: #ff1493;">}</span>    <span style="color: #CC9393;">|a|</span>
           <span style="color: #CC9393;">[Hi]</span> <span style="color: #ff1493;">{</span>D+2<span style="color: #ff1493;">}</span><span style="color: #ff8c00;">)</span>
</pre>
</div>

<p>
The text after character <code>;</code> is a <b>single line comment</b>. Single line comments run until the end
of the line. Dern has also <b>multiline comments</b> that are written between <code>#!</code> and <code>!#</code>.
Note that string delimiters in Dern are <code>[</code> and <code>]</code> and not <code>"</code>;
this way dern code can be written inside C-programs without escaping.
</p>

<p>
Strings can be embedded in strings like this:
</p>

<div class="org-src-container">
<pre class="src src-octaspire-dern"><span style="color: #CC9393;">[string |string-start|with another inside|string-end|]</span>
</pre>
</div>

<p>
This can be useful sometimes, for example, if you need to evaluate a string as
a program and need it to have strings inside.
</p>
</div>
</div>

<div id="outline-container-orgecefe15" class="outline-2">
<h2 id="orgecefe15"><span class="section-number-2">5</span> Single and multiline comments, making script files executable</h2>
<div class="outline-text-2" id="text-5">
<p>
Below are examples of single and multiline comments:
</p>

<div class="org-src-container">
<pre class="src src-octaspire-dern"><span style="color: #7F9F7F;">; This is single line comment.</span>

<span style="color: #7F9F7F;">#! This is multiline comment.</span>
<span style="color: #7F9F7F;">   It can contain multiple lines...</span>
<span style="color: #7F9F7F;">   ... !#</span>
</pre>
</div>

<p>
Multiline comments can be used to make script files executable in UNIX-like systems:
</p>

<div class="org-src-container">
<pre class="src src-octaspire-dern"><span style="color: #7F9F7F;">#!/usr/bin/env octaspire-dern-repl</span>
<span style="color: #7F9F7F;">!#</span>

<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">println</span> <span style="color: #CC9393;">[Hello World]</span><span style="color: #ff8c00;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org9c241ce" class="outline-2">
<h2 id="org9c241ce"><span class="section-number-2">6</span> Binding names to values with <code>define</code></h2>
<div class="outline-text-2" id="text-6">
<div class="org-src-container">
<pre class="src src-octaspire-dern"><span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">define</span> pi <span style="color: #DCDCCC; font-weight: bold;">as</span> <span style="color: #ff1493;">{</span>D+3.14<span style="color: #ff1493;">}</span> <span style="color: #CC9393;">[value for pi]</span><span style="color: #ff8c00;">)</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">define</span> names <span style="color: #DCDCCC; font-weight: bold;">as</span> '<span style="color: #ff1493;">(</span>John Lisa Mark<span style="color: #ff1493;">)</span> <span style="color: #CC9393;">[names list]</span><span style="color: #ff8c00;">)</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">define</span> double <span style="color: #DCDCCC; font-weight: bold;">as</span> <span style="color: #ff1493;">(</span><span style="color: #DCDCCC; font-weight: bold;">fn</span> <span style="color: #7fff00;">(</span>x<span style="color: #7fff00;">)</span> <span style="color: #7fff00;">(</span><span style="color: #DCDCCC; font-weight: bold;">*</span> <span style="color: #00bfff;">{</span>D+2<span style="color: #00bfff;">}</span> x<span style="color: #7fff00;">)</span><span style="color: #ff1493;">)</span> <span style="color: #CC9393;">[doubles nums]</span>
    '<span style="color: #ff1493;">(</span>x <span style="color: #CC9393;">[this is doubled]</span><span style="color: #ff1493;">)</span> <span style="color: #DCDCCC; font-weight: bold;">howto-ok</span><span style="color: #ff8c00;">)</span>
</pre>
</div>

<p>
Here we bind three values to a name: one real, one vector and one function taking one argument.
Here is an example of using those names:
</p>

<div class="org-src-container">
<pre class="src src-octaspire-dern">pi
names
<span style="color: #ff8c00;">(</span>double <span style="color: #ff1493;">{</span>D+1<span style="color: #ff1493;">}</span><span style="color: #ff8c00;">)</span>
</pre>
</div>

<p>
And to see the documentation for these values:
</p>

<div class="org-src-container">
<pre class="src src-octaspire-dern"><span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">doc</span> pi<span style="color: #ff8c00;">)</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">doc</span> names<span style="color: #ff8c00;">)</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">doc</span> double<span style="color: #ff8c00;">)</span>
</pre>
</div>

<p>
The documentation of the function contains also documentation for the parameters.
</p>

<p>
Function <code>doc</code> can also be used with builtins and specials defined by the standard
library or user in C.
</p>

<p>
Please note that at the time of writing most of the functions
in Dern&rsquo;s standard library are not yet documented properly. This is a work in progress.
</p>
</div>

<div id="outline-container-orge975951" class="outline-3">
<h3 id="orge975951"><span class="section-number-3">6.1</span> Binding in other environments than the current one</h3>
<div class="outline-text-3" id="text-6-1">
<p>
By using an explicit environment argument as the first argument to <code>define</code>, we can bind
names to values in other environments than the current one. Example:
</p>

<div class="org-src-container">
<pre class="src src-octaspire-dern"><span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">define</span> myEnv <span style="color: #DCDCCC; font-weight: bold;">as</span> <span style="color: #ff1493;">(</span><span style="color: #DCDCCC; font-weight: bold;">env-new</span><span style="color: #ff1493;">)</span> <span style="color: #CC9393;">[my own environment]</span><span style="color: #ff8c00;">)</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">define</span> pi <span style="color: #DCDCCC; font-weight: bold;">as</span> <span style="color: #ff1493;">{</span>D+3.14<span style="color: #ff1493;">}</span> <span style="color: #CC9393;">[value for pi]</span> <span style="color: #DCDCCC; font-weight: bold;">in</span> myEnv<span style="color: #ff8c00;">)</span>

pi                  <span style="color: #7F9F7F;">; &lt;error&gt;: Unbound symbol 'pi'</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">eval</span> pi myEnv<span style="color: #ff8c00;">)</span>     <span style="color: #7F9F7F;">; 3.14</span>
</pre>
</div>

<p>
In the example above, <code>pi</code> is undefined in the current (global) environment, but it
is defined in the <code>myEnv</code>-environment. We use special <code>eval</code> to evaluate <code>pi</code> in the
<code>myEnv</code>-environment.
</p>
</div>
</div>
</div>

<div id="outline-container-orgfa9c98d" class="outline-2">
<h2 id="orgfa9c98d"><span class="section-number-2">7</span> Iteration</h2>
<div class="outline-text-2" id="text-7">
<p>
Dern has two looping constructs: <code>while</code> and <code>for</code>. For can be used numerically, with a
container (vector, string, hash-map, etc.) and with (input) <b>ports</b>.
Below is couple of examples:
</p>

<div class="org-src-container">
<pre class="src src-octaspire-dern"><span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">define</span> i <span style="color: #DCDCCC; font-weight: bold;">as</span> <span style="color: #ff1493;">{</span>D+0<span style="color: #ff1493;">}</span> <span style="color: #CC9393;">[my counter]</span><span style="color: #ff8c00;">)</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">while</span> <span style="color: #ff1493;">(</span><span style="color: #DCDCCC; font-weight: bold;">&lt;=</span> i <span style="color: #7fff00;">{</span>D+10<span style="color: #7fff00;">}</span><span style="color: #ff1493;">)</span> <span style="color: #ff1493;">(</span><span style="color: #DCDCCC; font-weight: bold;">println</span> <span style="color: #CC9393;">[Going at {}]</span> i<span style="color: #ff1493;">)</span> <span style="color: #ff1493;">(</span><span style="color: #DCDCCC; font-weight: bold;">++</span> i<span style="color: #ff1493;">)</span><span style="color: #ff8c00;">)</span>
</pre>
</div>

<p>
Numerical for:
</p>

<div class="org-src-container">
<pre class="src src-octaspire-dern"><span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">for</span> i from <span style="color: #ff1493;">{</span>D+0<span style="color: #ff1493;">}</span> to <span style="color: #ff1493;">{</span>D+10<span style="color: #ff1493;">}</span> <span style="color: #ff1493;">(</span><span style="color: #DCDCCC; font-weight: bold;">println</span> <span style="color: #CC9393;">[Hello {}!]</span> i<span style="color: #ff1493;">)</span><span style="color: #ff8c00;">)</span>
</pre>
</div>

<p>
Container for:
</p>

<div class="org-src-container">
<pre class="src src-octaspire-dern"><span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">define</span> names <span style="color: #DCDCCC; font-weight: bold;">as</span> '<span style="color: #ff1493;">(</span>John Mark Lisa<span style="color: #ff1493;">)</span> <span style="color: #CC9393;">[names list]</span><span style="color: #ff8c00;">)</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">for</span> i <span style="color: #DCDCCC; font-weight: bold;">in</span> names <span style="color: #ff1493;">(</span><span style="color: #DCDCCC; font-weight: bold;">println</span> <span style="color: #CC9393;">[Hello {} World!]</span> i<span style="color: #ff1493;">)</span><span style="color: #ff8c00;">)</span>
</pre>
</div>

<p>
Both the <b>numerical for</b> and <b>container for</b> support the use of optional <code>step</code> to change the
way the iterator is incremented:
</p>

<div class="org-src-container">
<pre class="src src-octaspire-dern"><span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">for</span> i from <span style="color: #ff1493;">{</span>D+0<span style="color: #ff1493;">}</span> to <span style="color: #ff1493;">{</span>D+10<span style="color: #ff1493;">}</span> step <span style="color: #ff1493;">{</span>D+3<span style="color: #ff1493;">}</span>
  <span style="color: #ff1493;">(</span><span style="color: #DCDCCC; font-weight: bold;">println</span> <span style="color: #CC9393;">[Hello {}!]</span> i<span style="color: #ff1493;">)</span><span style="color: #ff8c00;">)</span>

<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">define</span> names <span style="color: #DCDCCC; font-weight: bold;">as</span> '<span style="color: #ff1493;">(</span>John Mark Lisa<span style="color: #ff1493;">)</span> <span style="color: #CC9393;">[names list]</span><span style="color: #ff8c00;">)</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">for</span> i <span style="color: #DCDCCC; font-weight: bold;">in</span> names step <span style="color: #ff1493;">{</span>D+2<span style="color: #ff1493;">}</span>
  <span style="color: #ff1493;">(</span><span style="color: #DCDCCC; font-weight: bold;">println</span> <span style="color: #CC9393;">[Hello {} World!]</span> i<span style="color: #ff1493;">)</span><span style="color: #ff8c00;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orga21a9d3" class="outline-2">
<h2 id="orga21a9d3"><span class="section-number-2">8</span> Comparing and changing values, predicates</h2>
<div class="outline-text-2" id="text-8">
<p>
Here are few examples:
</p>

<div class="org-src-container">
<pre class="src src-octaspire-dern"><span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">&lt;</span>  <span style="color: #ff1493;">{</span>D+1<span style="color: #ff1493;">}</span> <span style="color: #ff1493;">{</span>D+2<span style="color: #ff1493;">}</span><span style="color: #ff8c00;">)</span>   <span style="color: #7F9F7F;">; true</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">&lt;</span>  <span style="color: #ff1493;">{</span>D+2<span style="color: #ff1493;">}</span> <span style="color: #ff1493;">{</span>D+2<span style="color: #ff1493;">}</span><span style="color: #ff8c00;">)</span>   <span style="color: #7F9F7F;">; false</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">&gt;</span>  <span style="color: #ff1493;">{</span>D+2<span style="color: #ff1493;">}</span> <span style="color: #ff1493;">{</span>D+1<span style="color: #ff1493;">}</span><span style="color: #ff8c00;">)</span>   <span style="color: #7F9F7F;">; true</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">&lt;=</span> <span style="color: #ff1493;">{</span>D+1<span style="color: #ff1493;">}</span> <span style="color: #ff1493;">{</span>D+1<span style="color: #ff1493;">}</span><span style="color: #ff8c00;">)</span>   <span style="color: #7F9F7F;">; true</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">&gt;=</span> <span style="color: #ff1493;">{</span>D+1<span style="color: #ff1493;">}</span> <span style="color: #ff1493;">{</span>D+1<span style="color: #ff1493;">}</span><span style="color: #ff8c00;">)</span>   <span style="color: #7F9F7F;">; true</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">==</span> <span style="color: #ff1493;">{</span>D+3<span style="color: #ff1493;">}</span> <span style="color: #ff1493;">{</span>D+3<span style="color: #ff1493;">}</span><span style="color: #ff8c00;">)</span>   <span style="color: #7F9F7F;">; true</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">==</span> <span style="color: #ff1493;">{</span>D+3<span style="color: #ff1493;">}</span> <span style="color: #ff1493;">{</span>D+1<span style="color: #ff1493;">}</span><span style="color: #ff8c00;">)</span>   <span style="color: #7F9F7F;">; false</span>
<span style="color: #ff8c00;">(</span>!<span style="color: #DCDCCC; font-weight: bold;">=</span> <span style="color: #ff1493;">{</span>D+3<span style="color: #ff1493;">}</span> <span style="color: #ff1493;">{</span>D+1<span style="color: #ff1493;">}</span><span style="color: #ff8c00;">)</span>   <span style="color: #7F9F7F;">; true</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">+</span> <span style="color: #ff1493;">{</span>D+1<span style="color: #ff1493;">}</span><span style="color: #ff8c00;">)</span>      <span style="color: #7F9F7F;">;  1</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">+</span> <span style="color: #ff1493;">{</span>D+1<span style="color: #ff1493;">}</span> <span style="color: #ff1493;">{</span>D+1<span style="color: #ff1493;">}</span><span style="color: #ff8c00;">)</span>    <span style="color: #7F9F7F;">;  2</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">-</span> <span style="color: #ff1493;">{</span>D+1<span style="color: #ff1493;">}</span><span style="color: #ff8c00;">)</span>      <span style="color: #7F9F7F;">; -1</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">-</span> <span style="color: #ff1493;">{</span>D+1<span style="color: #ff1493;">}</span> <span style="color: #ff1493;">{</span>D+2<span style="color: #ff1493;">}</span> <span style="color: #ff1493;">{</span>D+3<span style="color: #ff1493;">}</span><span style="color: #ff8c00;">)</span>  <span style="color: #7F9F7F;">; -4</span>

<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">not</span> <span style="color: #BFEBBF;">true</span><span style="color: #ff8c00;">)</span>     <span style="color: #7F9F7F;">; false</span>

<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">uid</span> <span style="color: #DCDCCC; font-weight: bold;">+</span><span style="color: #ff8c00;">)</span>        <span style="color: #7F9F7F;">; unique id of +</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">===</span> <span style="color: #DCDCCC; font-weight: bold;">+</span> <span style="color: #DCDCCC; font-weight: bold;">+</span><span style="color: #ff8c00;">)</span>      <span style="color: #7F9F7F;">; compare using unique id</span>

<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">len</span> '<span style="color: #ff1493;">(</span><span style="color: #7fff00;">{</span>D+1<span style="color: #7fff00;">}</span> <span style="color: #7fff00;">{</span>D+2<span style="color: #7fff00;">}</span> <span style="color: #7fff00;">{</span>D+3<span style="color: #7fff00;">}</span><span style="color: #ff1493;">)</span><span style="color: #ff8c00;">)</span>  <span style="color: #7F9F7F;">; length of vector:   3</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">len</span> <span style="color: #CC9393;">[abc]</span><span style="color: #ff8c00;">)</span>                 <span style="color: #7F9F7F;">; length of string:   3</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">len</span> <span style="color: #ff1493;">(</span><span style="color: #DCDCCC; font-weight: bold;">hash-map</span> <span style="color: #7fff00;">{</span>D+1<span style="color: #7fff00;">}</span> <span style="color: #CC9393;">|a|</span><span style="color: #ff1493;">)</span><span style="color: #ff8c00;">)</span>  <span style="color: #7F9F7F;">; length of hash-map: 1</span>

<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">define</span> number <span style="color: #DCDCCC; font-weight: bold;">as</span> <span style="color: #ff1493;">{</span>D+1<span style="color: #ff1493;">}</span> <span style="color: #CC9393;">[my number]</span><span style="color: #ff8c00;">)</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">++</span> number<span style="color: #ff8c00;">)</span>                      <span style="color: #7F9F7F;">; number is 2</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">--</span> number<span style="color: #ff8c00;">)</span>                      <span style="color: #7F9F7F;">; number is 1</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">+=</span> number <span style="color: #ff1493;">{</span>D+2<span style="color: #ff1493;">}</span><span style="color: #ff8c00;">)</span>                <span style="color: #7F9F7F;">; number is 3</span>

<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">+</span> <span style="color: #CC9393;">[Hello]</span> <span style="color: #CC9393;">[ ]</span> <span style="color: #CC9393;">[World.]</span> <span style="color: #CC9393;">[ Bye.]</span><span style="color: #ff8c00;">)</span> <span style="color: #7F9F7F;">; Hello World. Bye.</span>

<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">define</span> greeting <span style="color: #DCDCCC; font-weight: bold;">as</span> <span style="color: #CC9393;">[Hello]</span> <span style="color: #CC9393;">[my greeting]</span><span style="color: #ff8c00;">)</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">+=</span> greeting <span style="color: #CC9393;">[ World!]</span><span style="color: #ff8c00;">)</span>          <span style="color: #7F9F7F;">; Hello World!</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">+=</span> greeting <span style="color: #CC9393;">|!|</span><span style="color: #ff8c00;">)</span>                <span style="color: #7F9F7F;">; Hello World!!</span>

<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">+=</span> '<span style="color: #ff1493;">(</span><span style="color: #7fff00;">{</span>D+1<span style="color: #7fff00;">}</span> <span style="color: #7fff00;">{</span>D+2<span style="color: #7fff00;">}</span> <span style="color: #7fff00;">{</span>D+3<span style="color: #7fff00;">}</span><span style="color: #ff1493;">)</span> '<span style="color: #ff1493;">(</span><span style="color: #7fff00;">{</span>D+4<span style="color: #7fff00;">}</span> <span style="color: #7fff00;">{</span>D+5<span style="color: #7fff00;">}</span> <span style="color: #7fff00;">{</span>D+6<span style="color: #7fff00;">}</span><span style="color: #ff1493;">)</span><span style="color: #ff8c00;">)</span>
<span style="color: #7F9F7F;">; (1 2 3 (4 5 6))</span>

<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">define</span> capitals <span style="color: #DCDCCC; font-weight: bold;">as</span> <span style="color: #ff1493;">(</span><span style="color: #DCDCCC; font-weight: bold;">hash-map</span> <span style="color: #CC9393;">[United Kingdom]</span>
                                <span style="color: #CC9393;">[London]</span>
                              <span style="color: #CC9393;">[Spain]</span> <span style="color: #CC9393;">[Madrid]</span><span style="color: #ff1493;">)</span>
    <span style="color: #CC9393;">[country -&gt; capital]</span><span style="color: #ff8c00;">)</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">+=</span> capitals <span style="color: #CC9393;">[Nepal]</span> <span style="color: #CC9393;">[Kathmandu]</span><span style="color: #ff8c00;">)</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">+=</span> capitals '<span style="color: #ff1493;">(</span><span style="color: #CC9393;">[Norway]</span> <span style="color: #CC9393;">[Oslo]</span> <span style="color: #CC9393;">[Poland]</span> <span style="color: #CC9393;">[Warsaw]</span><span style="color: #ff1493;">)</span><span style="color: #ff8c00;">)</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">+=</span> capitals <span style="color: #ff1493;">(</span><span style="color: #DCDCCC; font-weight: bold;">hash-map</span> <span style="color: #CC9393;">[Peru]</span> <span style="color: #CC9393;">[Lima]</span><span style="color: #ff1493;">)</span><span style="color: #ff8c00;">)</span>

<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">-=</span> <span style="color: #ff1493;">{</span>D+10<span style="color: #ff1493;">}</span> <span style="color: #ff1493;">{</span>D+1<span style="color: #ff1493;">}</span> <span style="color: #ff1493;">{</span>D+2<span style="color: #ff1493;">}</span> <span style="color: #ff1493;">{</span>D+3<span style="color: #ff1493;">}</span><span style="color: #ff8c00;">)</span>             <span style="color: #7F9F7F;">; 4</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">-=</span> <span style="color: #CC9393;">|x|</span> <span style="color: #ff1493;">{</span>D+2<span style="color: #ff1493;">}</span><span style="color: #ff8c00;">)</span>                            <span style="color: #7F9F7F;">; |v|</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">-=</span> <span style="color: #CC9393;">|x|</span> <span style="color: #CC9393;">|!|</span><span style="color: #ff8c00;">)</span>                              <span style="color: #7F9F7F;">; |W|</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">-=</span> <span style="color: #CC9393;">[abba]</span> <span style="color: #CC9393;">|a|</span><span style="color: #ff8c00;">)</span>                           <span style="color: #7F9F7F;">; [bb]</span>

<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">-=</span> <span style="color: #ff1493;">(</span><span style="color: #DCDCCC; font-weight: bold;">hash-map</span> <span style="color: #7fff00;">{</span>D+1<span style="color: #7fff00;">}</span> <span style="color: #CC9393;">|a|</span> <span style="color: #7fff00;">{</span>D+2<span style="color: #7fff00;">}</span> <span style="color: #CC9393;">|b|</span><span style="color: #ff1493;">)</span> <span style="color: #ff1493;">{</span>D+1<span style="color: #ff1493;">}</span><span style="color: #ff8c00;">)</span>
<span style="color: #7F9F7F;">; (hash-map 2 |b|)</span>

<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">-=</span> '<span style="color: #ff1493;">(</span><span style="color: #7fff00;">{</span>D+1<span style="color: #7fff00;">}</span> <span style="color: #7fff00;">{</span>D+1<span style="color: #7fff00;">}</span> <span style="color: #7fff00;">{</span>D+2<span style="color: #7fff00;">}</span> <span style="color: #7fff00;">{</span>D+2<span style="color: #7fff00;">}</span> <span style="color: #7fff00;">{</span>D+3<span style="color: #7fff00;">}</span><span style="color: #ff1493;">)</span> <span style="color: #ff1493;">{</span>D+1<span style="color: #ff1493;">}</span> <span style="color: #ff1493;">{</span>D+2<span style="color: #ff1493;">}</span><span style="color: #ff8c00;">)</span>
<span style="color: #7F9F7F;">; (3)</span>

<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">define</span> v <span style="color: #DCDCCC; font-weight: bold;">as</span> '<span style="color: #ff1493;">(</span><span style="color: #7fff00;">{</span>D+1<span style="color: #7fff00;">}</span> <span style="color: #7fff00;">{</span>D+2<span style="color: #7fff00;">}</span> <span style="color: #7fff00;">{</span>D+3<span style="color: #7fff00;">}</span> <span style="color: #7fff00;">{</span>D+3<span style="color: #7fff00;">}</span><span style="color: #ff1493;">)</span> <span style="color: #CC9393;">[v]</span><span style="color: #ff8c00;">)</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">-=</span> v <span style="color: #ff1493;">(</span>ln@ v <span style="color: #7fff00;">{</span>D-1<span style="color: #7fff00;">}</span><span style="color: #ff1493;">)</span><span style="color: #ff8c00;">)</span>             <span style="color: #7F9F7F;">; (1 2)</span>

<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">define</span> v <span style="color: #DCDCCC; font-weight: bold;">as</span> '<span style="color: #ff1493;">(</span><span style="color: #7fff00;">{</span>D+1<span style="color: #7fff00;">}</span> <span style="color: #7fff00;">{</span>D+2<span style="color: #7fff00;">}</span> <span style="color: #7fff00;">{</span>D+3<span style="color: #7fff00;">}</span> <span style="color: #7fff00;">{</span>D+3<span style="color: #7fff00;">}</span><span style="color: #ff1493;">)</span> <span style="color: #CC9393;">[v]</span><span style="color: #ff8c00;">)</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">-==</span> v <span style="color: #ff1493;">(</span>ln@ v <span style="color: #7fff00;">{</span>D-1<span style="color: #7fff00;">}</span><span style="color: #ff1493;">)</span><span style="color: #ff8c00;">)</span>            <span style="color: #7F9F7F;">; (1 2 3)</span>
</pre>
</div>

<p>
Operators <code>++</code>, <code>--</code>, <code>+=</code>, <code>-=</code>, <code>==</code> and <code>!=</code> are similar to those in C. Note also that
<b>the operands need not to be numbers</b>. You can, for example, use <code>+=</code> to push values to the
back of a vector, add characters into a string, write values into a port, etc.
<code>-==</code> removes values from a supported collection by comparing the unique identifiers
of values. It removes only values that are the same (equal values might not be the
same).
</p>

<p>
Please note: all the examples above should work, but support for non-numeric types is not finished
on most of the operators. Using those operators with non-numeric arguments
aborts the program or returns error. Complete support for non numeric operands
for the above operators should be implemented in the standard library eventually.
</p>
</div>
</div>

<div id="outline-container-orgc06e440" class="outline-2">
<h2 id="orgc06e440"><span class="section-number-2">9</span> Removing the last value from a vector</h2>
<div class="outline-text-2" id="text-9">
<p>
Compare these two cases:
</p>

<div class="org-src-container">
<pre class="src src-octaspire-dern"><span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">define</span> v <span style="color: #DCDCCC; font-weight: bold;">as</span> '<span style="color: #ff1493;">(</span><span style="color: #7fff00;">{</span>D+1<span style="color: #7fff00;">}</span> <span style="color: #7fff00;">{</span>D+2<span style="color: #7fff00;">}</span> <span style="color: #7fff00;">{</span>D+3<span style="color: #7fff00;">}</span> <span style="color: #7fff00;">{</span>D+3<span style="color: #7fff00;">}</span><span style="color: #ff1493;">)</span> <span style="color: #CC9393;">[v]</span><span style="color: #ff8c00;">)</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">-=</span> v <span style="color: #ff1493;">(</span>ln@ v <span style="color: #7fff00;">{</span>D-1<span style="color: #7fff00;">}</span><span style="color: #ff1493;">)</span><span style="color: #ff8c00;">)</span>             <span style="color: #7F9F7F;">; (1 2)</span>

<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">define</span> v <span style="color: #DCDCCC; font-weight: bold;">as</span> '<span style="color: #ff1493;">(</span><span style="color: #7fff00;">{</span>D+1<span style="color: #7fff00;">}</span> <span style="color: #7fff00;">{</span>D+2<span style="color: #7fff00;">}</span> <span style="color: #7fff00;">{</span>D+3<span style="color: #7fff00;">}</span> <span style="color: #7fff00;">{</span>D+3<span style="color: #7fff00;">}</span><span style="color: #ff1493;">)</span> <span style="color: #CC9393;">[v]</span><span style="color: #ff8c00;">)</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">-==</span> v <span style="color: #ff1493;">(</span>ln@ v <span style="color: #7fff00;">{</span>D-1<span style="color: #7fff00;">}</span><span style="color: #ff1493;">)</span><span style="color: #ff8c00;">)</span>            <span style="color: #7F9F7F;">; (1 2 3)</span>
</pre>
</div>

<p>
The last example removes really only the last value (compared using <code>===</code>).
The first example removes all the values that are equal to the last value
(compared using <code>==</code>).
</p>

<p>
Values can be removed this way from any position by using different indices.
As with other functions, negative indices count from the end of the collection
and positive from the beginning.
</p>

<p>
More efficient way of removing the last value from a collection is to use
the builtin <code>pop-back</code>:
</p>

<div class="org-src-container">
<pre class="src src-octaspire-dern"><span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">define</span> v <span style="color: #DCDCCC; font-weight: bold;">as</span> '<span style="color: #ff1493;">(</span><span style="color: #7fff00;">{</span>D+1<span style="color: #7fff00;">}</span> <span style="color: #7fff00;">{</span>D+2<span style="color: #7fff00;">}</span> <span style="color: #7fff00;">{</span>D+3<span style="color: #7fff00;">}</span> <span style="color: #7fff00;">{</span>D+3<span style="color: #7fff00;">}</span><span style="color: #ff1493;">)</span> <span style="color: #CC9393;">[v]</span><span style="color: #ff8c00;">)</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">pop-back</span> v<span style="color: #ff8c00;">)</span>                  <span style="color: #7F9F7F;">; (1 2 3)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgaf624fc" class="outline-2">
<h2 id="orgaf624fc"><span class="section-number-2">10</span> Branching and selection</h2>
<div class="outline-text-2" id="text-10">
<p>
Here are some examples using <code>if</code>:
</p>

<div class="org-src-container">
<pre class="src src-octaspire-dern"><span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">if</span> <span style="color: #BFEBBF;">true</span>  <span style="color: #CC9393;">[Yes]</span><span style="color: #ff8c00;">)</span>         <span style="color: #7F9F7F;">; Yes</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">if</span> <span style="color: #BFEBBF;">false</span> <span style="color: #CC9393;">[Yes]</span><span style="color: #ff8c00;">)</span>         <span style="color: #7F9F7F;">; nil</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">if</span> <span style="color: #BFEBBF;">false</span> <span style="color: #CC9393;">[Yes]</span> <span style="color: #CC9393;">[No]</span><span style="color: #ff8c00;">)</span>    <span style="color: #7F9F7F;">; No</span>

<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">if</span> <span style="color: #BFEBBF;">true</span>  <span style="color: #ff1493;">(</span><span style="color: #DCDCCC; font-weight: bold;">println</span> <span style="color: #CC9393;">[Yes]</span><span style="color: #ff1493;">)</span> <span style="color: #ff1493;">(</span><span style="color: #DCDCCC; font-weight: bold;">println</span> <span style="color: #CC9393;">[No]</span><span style="color: #ff1493;">)</span><span style="color: #ff8c00;">)</span>
<span style="color: #7F9F7F;">; Prints Yes</span>

<span style="color: #7F9F7F;">; Prints Yes|newline|OK</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">if</span> <span style="color: #BFEBBF;">true</span>  <span style="color: #ff1493;">(</span><span style="color: #DCDCCC; font-weight: bold;">do</span> <span style="color: #7fff00;">(</span><span style="color: #DCDCCC; font-weight: bold;">println</span> <span style="color: #CC9393;">[Yes]</span><span style="color: #7fff00;">)</span> <span style="color: #7fff00;">(</span><span style="color: #DCDCCC; font-weight: bold;">println</span> <span style="color: #CC9393;">[OK]</span><span style="color: #7fff00;">)</span><span style="color: #ff1493;">)</span><span style="color: #ff8c00;">)</span>
</pre>
</div>

<p>
Here are some examples using <code>select</code>:
</p>

<div class="org-src-container">
<pre class="src src-octaspire-dern"><span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">select</span> <span style="color: #BFEBBF;">true</span> <span style="color: #CC9393;">[Yes]</span><span style="color: #ff8c00;">)</span>            <span style="color: #7F9F7F;">; Yes</span>

<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">select</span> <span style="color: #BFEBBF;">false</span> <span style="color: #CC9393;">[No]</span>
        <span style="color: #BFEBBF;">true</span>  <span style="color: #CC9393;">[Yes]</span><span style="color: #ff8c00;">)</span>           <span style="color: #7F9F7F;">; Yes</span>

<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">select</span> default <span style="color: #CC9393;">[Yes]</span><span style="color: #ff8c00;">)</span>         <span style="color: #7F9F7F;">; Yes</span>

<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">select</span> <span style="color: #BFEBBF;">false</span>   <span style="color: #CC9393;">[No]</span>
        default <span style="color: #CC9393;">[Yes]</span><span style="color: #ff8c00;">)</span>         <span style="color: #7F9F7F;">; Yes</span>

<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">select</span> <span style="color: #BFEBBF;">false</span>   <span style="color: #CC9393;">[No]</span>
        <span style="color: #BFEBBF;">true</span>    <span style="color: #CC9393;">[Maybe]</span>
        default <span style="color: #CC9393;">[Yes]</span><span style="color: #ff8c00;">)</span>         <span style="color: #7F9F7F;">; Maybe</span>

<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">select</span> <span style="color: #BFEBBF;">false</span> <span style="color: #CC9393;">[Yes]</span><span style="color: #ff8c00;">)</span>           <span style="color: #7F9F7F;">; nil</span>


<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">define</span> f1 <span style="color: #DCDCCC; font-weight: bold;">as</span> <span style="color: #ff1493;">(</span><span style="color: #DCDCCC; font-weight: bold;">fn</span> <span style="color: #7fff00;">()</span> <span style="color: #BFEBBF;">true</span><span style="color: #ff1493;">)</span>  <span style="color: #CC9393;">[f1]</span> '<span style="color: #ff1493;">()</span> <span style="color: #DCDCCC; font-weight: bold;">howto-no</span><span style="color: #ff8c00;">)</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">define</span> f2 <span style="color: #DCDCCC; font-weight: bold;">as</span> <span style="color: #ff1493;">(</span><span style="color: #DCDCCC; font-weight: bold;">fn</span> <span style="color: #7fff00;">()</span> <span style="color: #BFEBBF;">false</span><span style="color: #ff1493;">)</span> <span style="color: #CC9393;">[f2]</span> '<span style="color: #ff1493;">()</span> <span style="color: #DCDCCC; font-weight: bold;">howto-no</span><span style="color: #ff8c00;">)</span>

<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">select</span> <span style="color: #ff1493;">(</span>f1<span style="color: #ff1493;">)</span>  <span style="color: #CC9393;">[Yes]</span>
        <span style="color: #ff1493;">(</span>f2<span style="color: #ff1493;">)</span>  <span style="color: #CC9393;">[No]</span>
        <span style="color: #BFEBBF;">false</span> <span style="color: #CC9393;">[Maybe]</span><span style="color: #ff8c00;">)</span>         <span style="color: #7F9F7F;">; Yes</span>

<span style="color: #7F9F7F;">; Prints: Sun is shining</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">select</span> <span style="color: #ff1493;">(</span>f1<span style="color: #ff1493;">)</span>  <span style="color: #ff1493;">(</span><span style="color: #DCDCCC; font-weight: bold;">println</span> <span style="color: #CC9393;">[Sun is shining]</span><span style="color: #ff1493;">)</span>
        <span style="color: #ff1493;">(</span>f2<span style="color: #ff1493;">)</span>  <span style="color: #ff1493;">(</span><span style="color: #DCDCCC; font-weight: bold;">println</span> <span style="color: #CC9393;">[It rains]</span><span style="color: #ff1493;">)</span>
        <span style="color: #BFEBBF;">false</span> <span style="color: #CC9393;">[Maybe]</span>
        <span style="color: #BFEBBF;">false</span> <span style="color: #ff1493;">{</span>D+2<span style="color: #ff1493;">}</span>
        <span style="color: #BFEBBF;">false</span> <span style="color: #ff1493;">{</span>D+3.14<span style="color: #ff1493;">}</span>
        <span style="color: #BFEBBF;">false</span> <span style="color: #CC9393;">|a|</span>
        <span style="color: #BFEBBF;">false</span> <span style="color: #CC9393;">[There can be many selectors...]</span><span style="color: #ff8c00;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org78c66a5" class="outline-2">
<h2 id="org78c66a5"><span class="section-number-2">11</span> Selecting values from collections</h2>
<div class="outline-text-2" id="text-11">
<p>
Values can be selected from collections using <code>ln@</code> and copied with <code>cp@</code>.
<code>ln@</code> is pronounced <b>link at</b> and <code>cp@</code> is pronounced <b>copy at</b>.
</p>

<div class="org-src-container">
<pre class="src src-octaspire-dern"><span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">++</span> <span style="color: #ff1493;">(</span>ln@ '<span style="color: #7fff00;">(</span><span style="color: #00bfff;">{</span>D+1<span style="color: #00bfff;">}</span> <span style="color: #00bfff;">{</span>D+2<span style="color: #00bfff;">}</span> <span style="color: #00bfff;">{</span>D+3<span style="color: #00bfff;">}</span><span style="color: #7fff00;">)</span> <span style="color: #7fff00;">{</span>D+1<span style="color: #7fff00;">}</span><span style="color: #ff1493;">)</span><span style="color: #ff8c00;">)</span>   <span style="color: #7F9F7F;">; 3</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">+=</span> <span style="color: #ff1493;">(</span>cp@ <span style="color: #CC9393;">[abc]</span> <span style="color: #7fff00;">{</span>D+1<span style="color: #7fff00;">}</span><span style="color: #ff1493;">)</span> <span style="color: #ff1493;">{</span>D+2<span style="color: #ff1493;">}</span><span style="color: #ff8c00;">)</span><span style="color: #88090B;">)</span>           <span style="color: #7F9F7F;">; |d|</span>
<span style="color: #88090B;">(</span>ln@ <span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">hash-map</span> <span style="color: #CC9393;">|a|</span> <span style="color: #CC9393;">[abc]</span><span style="color: #ff8c00;">)</span> <span style="color: #CC9393;">|a|</span>   'hash<span style="color: #88090B;">)</span>  <span style="color: #7F9F7F;">; [abc]</span>
<span style="color: #88090B;">(</span>ln@ <span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">hash-map</span> <span style="color: #CC9393;">|a|</span> <span style="color: #CC9393;">[abc]</span><span style="color: #ff8c00;">)</span> <span style="color: #ff8c00;">{</span>D+0<span style="color: #ff8c00;">}</span> 'index<span style="color: #88090B;">)</span> <span style="color: #7F9F7F;">; [abc]</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf768510" class="outline-2">
<h2 id="orgf768510"><span class="section-number-2">12</span> Accessing and manipulating command line arguments and environment variables</h2>
<div class="outline-text-2" id="text-12">
<p>
This section is not ready yet. See the example below. More information will
be added later.
</p>

<div class="org-src-container">
<pre class="src src-octaspire-dern"><span style="color: #ff8c00;">(</span>host-get-command-line-arguments<span style="color: #ff8c00;">)</span>
<span style="color: #ff8c00;">(</span>host-get-environment-variables<span style="color: #ff8c00;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf84a2ac" class="outline-2">
<h2 id="orgf84a2ac"><span class="section-number-2">13</span> Formatted and regular printing</h2>
<div class="outline-text-2" id="text-13">
<p>
Here are few examples:
</p>

<div class="org-src-container">
<pre class="src src-octaspire-dern"><span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">print</span>   <span style="color: #CC9393;">[Hi]</span><span style="color: #ff8c00;">)</span>   <span style="color: #7F9F7F;">; Prints Hi without newline</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">println</span> <span style="color: #CC9393;">[Hi]</span><span style="color: #ff8c00;">)</span>   <span style="color: #7F9F7F;">; Prints Hi and newline</span>

<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">define</span> name1  <span style="color: #DCDCCC; font-weight: bold;">as</span> 'Jim   <span style="color: #CC9393;">[some name 1]</span><span style="color: #ff8c00;">)</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">define</span> name2  <span style="color: #DCDCCC; font-weight: bold;">as</span> 'Alice <span style="color: #CC9393;">[some name 2]</span><span style="color: #ff8c00;">)</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">define</span> number <span style="color: #DCDCCC; font-weight: bold;">as</span> <span style="color: #ff1493;">{</span>D+30<span style="color: #ff1493;">}</span> <span style="color: #CC9393;">[some number]</span><span style="color: #ff8c00;">)</span>

<span style="color: #7F9F7F;">; Prints Hi Jim and Alice! It is 30 degrees outside.</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">println</span> <span style="color: #CC9393;">[Hi {} and {}! It is {} degrees outside.]</span>
    name1 name2 number<span style="color: #ff8c00;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org6042b7f" class="outline-2">
<h2 id="org6042b7f"><span class="section-number-2">14</span> Formatted string creation</h2>
<div class="outline-text-2" id="text-14">
<p>
Here are few examples:
</p>

<div class="org-src-container">
<pre class="src src-octaspire-dern"><span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">define</span> name1  <span style="color: #DCDCCC; font-weight: bold;">as</span> 'Jim   <span style="color: #CC9393;">[some name 1]</span><span style="color: #ff8c00;">)</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">define</span> name2  <span style="color: #DCDCCC; font-weight: bold;">as</span> 'Alice <span style="color: #CC9393;">[some name 2]</span><span style="color: #ff8c00;">)</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">define</span> number <span style="color: #DCDCCC; font-weight: bold;">as</span> <span style="color: #ff1493;">{</span>D+30<span style="color: #ff1493;">}</span> <span style="color: #CC9393;">[some number]</span><span style="color: #ff8c00;">)</span>

<span style="color: #7F9F7F;">; Creates a sting</span>
<span style="color: #7F9F7F;">; [Hi Jim and Alice! It is 30 degrees outside]</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">string-format</span>
  <span style="color: #CC9393;">[Hi {} and {}! It is {} degrees outside]</span>
  name1 name2 number<span style="color: #ff8c00;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbb97136" class="outline-2">
<h2 id="orgbb97136"><span class="section-number-2">15</span> Functions with variable number of arguments</h2>
<div class="outline-text-2" id="text-15">
<p>
Here are few examples:
</p>

<div class="org-src-container">
<pre class="src src-octaspire-dern"><span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">define</span> f <span style="color: #DCDCCC; font-weight: bold;">as</span> <span style="color: #ff1493;">(</span><span style="color: #DCDCCC; font-weight: bold;">fn</span> <span style="color: #7fff00;">(</span>x ...<span style="color: #7fff00;">)</span> x<span style="color: #ff1493;">)</span> <span style="color: #CC9393;">[f]</span>
    '<span style="color: #ff1493;">(</span>x <span style="color: #CC9393;">[x]</span> ... <span style="color: #CC9393;">[varargs]</span><span style="color: #ff1493;">)</span> <span style="color: #DCDCCC; font-weight: bold;">howto-no</span><span style="color: #ff8c00;">)</span>

<span style="color: #ff8c00;">(</span>f <span style="color: #ff1493;">{</span>D+1<span style="color: #ff1493;">}</span> <span style="color: #ff1493;">{</span>D+2<span style="color: #ff1493;">}</span> <span style="color: #ff1493;">{</span>D+3<span style="color: #ff1493;">}</span><span style="color: #ff8c00;">)</span>   <span style="color: #7F9F7F;">; (1 2 3)</span>


<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">define</span> f <span style="color: #DCDCCC; font-weight: bold;">as</span> <span style="color: #ff1493;">(</span><span style="color: #DCDCCC; font-weight: bold;">fn</span> <span style="color: #7fff00;">(</span>x y ...<span style="color: #7fff00;">)</span> <span style="color: #7fff00;">(</span><span style="color: #DCDCCC; font-weight: bold;">println</span> x<span style="color: #7fff00;">)</span> <span style="color: #7fff00;">(</span><span style="color: #DCDCCC; font-weight: bold;">println</span> y<span style="color: #7fff00;">)</span><span style="color: #ff1493;">)</span>
    <span style="color: #CC9393;">[f]</span> '<span style="color: #ff1493;">(</span>x <span style="color: #CC9393;">[x]</span> y <span style="color: #CC9393;">[rest of the args]</span> ... <span style="color: #CC9393;">[varargs]</span><span style="color: #ff1493;">)</span>
    <span style="color: #DCDCCC; font-weight: bold;">howto-no</span><span style="color: #ff8c00;">)</span>

<span style="color: #ff8c00;">(</span>f <span style="color: #ff1493;">{</span>D+1<span style="color: #ff1493;">}</span> <span style="color: #ff1493;">{</span>D+2<span style="color: #ff1493;">}</span> <span style="color: #ff1493;">{</span>D+3<span style="color: #ff1493;">}</span><span style="color: #ff8c00;">)</span>   <span style="color: #7F9F7F;">; Prints 1|newline|(2 3)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org881198a" class="outline-2">
<h2 id="org881198a"><span class="section-number-2">16</span> Environments</h2>
<div class="outline-text-2" id="text-16">
<p>
Here are few examples:
</p>

<div class="org-src-container">
<pre class="src src-octaspire-dern"><span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">env-global</span><span style="color: #ff8c00;">)</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">env-current</span><span style="color: #ff8c00;">)</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">env-new</span><span style="color: #ff8c00;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf6abdb6" class="outline-2">
<h2 id="orgf6abdb6"><span class="section-number-2">17</span> Getting help with <code>howto</code></h2>
<div class="outline-text-2" id="text-17">
<p>
Function <code>howto</code> can be used for asking howto do something. It is given first the arguments and then the expected result. It returns a vector containing
a listing of forms to do the task. Not all functions support <code>howto</code>, but many do. Usually functions supporting <code>howto</code> should not have (large) side effects.
When writing Dern functions, one has to decide whether those functions should support <code>howto</code> or not.
</p>

<p>
Here is small example:
</p>

<div class="org-src-container">
<pre class="src src-octaspire-dern"><span style="color: #7F9F7F;">; Enter these forms into the REPL</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">howto</span> <span style="color: #ff1493;">{</span>D+1<span style="color: #ff1493;">}</span> <span style="color: #ff1493;">{</span>D+2<span style="color: #ff1493;">}</span> <span style="color: #ff1493;">{</span>D+3<span style="color: #ff1493;">}</span><span style="color: #ff8c00;">)</span>
<span style="color: #7F9F7F;">; ((+ {D+1} {D+2}) (+ {D+2} {D+1}))</span>

<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">howto</span> <span style="color: #CC9393;">[a]</span> <span style="color: #CC9393;">[b]</span> <span style="color: #CC9393;">[ab]</span><span style="color: #ff8c00;">)</span> <span style="color: #7F9F7F;">; ((+ [a] [b]))</span>

<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">howto</span> '<span style="color: #ff1493;">(</span>John Mike Alice Lola<span style="color: #ff1493;">)</span> 0 'John<span style="color: #ff8c00;">)</span>
<span style="color: #7F9F7F;">; ((ln@ (quote (John Mike Alice Lola)) {D+0})</span>
<span style="color: #7F9F7F;">;  (cp@ (quote (John Mike Alice Lola)) {D+0}))</span>

<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">howto</span> '<span style="color: #ff1493;">(</span>John Mike Alice Lola<span style="color: #ff1493;">)</span> 'Lola '<span style="color: #ff1493;">(</span><span style="color: #7fff00;">{</span>D+3<span style="color: #7fff00;">}</span><span style="color: #ff1493;">)</span><span style="color: #ff8c00;">)</span>
<span style="color: #7F9F7F;">; ((find (quote (John Mike Alice Lola)) (quote Lola)))</span>


<span style="color: #7F9F7F;">; Or print them</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">println</span> <span style="color: #ff1493;">(</span><span style="color: #DCDCCC; font-weight: bold;">howto</span> <span style="color: #7fff00;">{</span>D+1<span style="color: #7fff00;">}</span> <span style="color: #7fff00;">{</span>D+2<span style="color: #7fff00;">}</span> <span style="color: #7fff00;">{</span>D+3<span style="color: #7fff00;">}</span><span style="color: #ff1493;">)</span><span style="color: #ff8c00;">)</span>
<span style="color: #7F9F7F;">; prints ((+ {D+1} {D+2}) (+ {D+2} {D+1}))</span>

<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">println</span> <span style="color: #ff1493;">(</span><span style="color: #DCDCCC; font-weight: bold;">howto</span> <span style="color: #CC9393;">[a]</span> <span style="color: #CC9393;">[b]</span> <span style="color: #CC9393;">[ab]</span><span style="color: #ff1493;">)</span><span style="color: #ff8c00;">)</span> <span style="color: #7F9F7F;">; prints ((+ [a] [b]))</span>

<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">println</span> <span style="color: #ff1493;">(</span><span style="color: #DCDCCC; font-weight: bold;">howto</span> '<span style="color: #7fff00;">(</span>John Mike Alice Lola<span style="color: #7fff00;">)</span> 0 'John<span style="color: #ff1493;">)</span><span style="color: #ff8c00;">)</span>
<span style="color: #7F9F7F;">; prints ((ln@ (quote (John Mike Alice Lola)) {D+0})</span>
<span style="color: #7F9F7F;">;         (cp@ (quote (John Mike Alice Lola)) {D+0}))</span>

<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">println</span> <span style="color: #ff1493;">(</span><span style="color: #DCDCCC; font-weight: bold;">howto</span> '<span style="color: #7fff00;">(</span>John Mike Alice Lola<span style="color: #7fff00;">)</span> 'Lola
                '<span style="color: #7fff00;">(</span><span style="color: #00bfff;">{</span>D+3<span style="color: #00bfff;">}</span><span style="color: #7fff00;">)</span><span style="color: #ff1493;">)</span><span style="color: #ff8c00;">)</span>
<span style="color: #7F9F7F;">; prints ((find (quote (John Mike Alice Lola))</span>
<span style="color: #7F9F7F;">;               (quote Lola)))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgba5ca35" class="outline-2">
<h2 id="orgba5ca35"><span class="section-number-2">18</span> Returning from functions early</h2>
<div class="outline-text-2" id="text-18">
<p>
The value of the last expression of function is usually the return value from that function.
However, by using <code>return</code> one can return early and have multiple exit points from a function.
Small example:
</p>

<div class="org-src-container">
<pre class="src src-octaspire-dern"><span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">define</span> errorCode <span style="color: #DCDCCC; font-weight: bold;">as</span> <span style="color: #ff1493;">{</span>D+1<span style="color: #ff1493;">}</span> <span style="color: #CC9393;">[0 means no error.]</span><span style="color: #ff8c00;">)</span>

<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">define</span> start-engine <span style="color: #DCDCCC; font-weight: bold;">as</span> <span style="color: #ff1493;">(</span><span style="color: #DCDCCC; font-weight: bold;">fn</span> <span style="color: #7fff00;">()</span>
    <span style="color: #7fff00;">(</span><span style="color: #DCDCCC; font-weight: bold;">if</span> <span style="color: #00bfff;">(</span>!<span style="color: #DCDCCC; font-weight: bold;">=</span> errorCode <span style="color: #ffff00;">{</span>D+0<span style="color: #ffff00;">}</span><span style="color: #00bfff;">)</span> <span style="color: #00bfff;">(</span><span style="color: #DCDCCC; font-weight: bold;">return</span> <span style="color: #CC9393;">[Cannot start]</span><span style="color: #00bfff;">)</span><span style="color: #7fff00;">)</span>
    <span style="color: #7F9F7F;">; .... Start the engine here...</span>
    <span style="color: #CC9393;">[Start engine if all OK]</span> '<span style="color: #7fff00;">()</span> <span style="color: #DCDCCC; font-weight: bold;">howto-no</span><span style="color: #ff1493;">)</span><span style="color: #ff8c00;">)</span>
</pre>
</div>

<p>
Function <code>return</code> can be called with zero or one argument. If no arguments are given, then <code>return</code>
will return the value <code>nil</code>. Short example:
</p>

<div class="org-src-container">
<pre class="src src-octaspire-dern"><span style="color: #ff8c00;">(</span><span style="color: #ff1493;">(</span><span style="color: #DCDCCC; font-weight: bold;">fn</span> <span style="color: #7fff00;">()</span> <span style="color: #7fff00;">(</span><span style="color: #DCDCCC; font-weight: bold;">return</span> <span style="color: #BFEBBF;">nil</span><span style="color: #7fff00;">)</span><span style="color: #ff1493;">)</span><span style="color: #ff8c00;">)</span>   <span style="color: #7F9F7F;">; Evaluates into 'nil'.</span>
<span style="color: #ff8c00;">(</span><span style="color: #ff1493;">(</span><span style="color: #DCDCCC; font-weight: bold;">fn</span> <span style="color: #7fff00;">()</span> <span style="color: #7fff00;">(</span><span style="color: #DCDCCC; font-weight: bold;">return</span><span style="color: #7fff00;">)</span><span style="color: #ff1493;">)</span><span style="color: #ff8c00;">)</span>       <span style="color: #7F9F7F;">; Evaluates into 'nil'.</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd6706ef" class="outline-2">
<h2 id="orgd6706ef"><span class="section-number-2">19</span> Evaluating values</h2>
<div class="outline-text-2" id="text-19">
<p>
Special <code>eval</code> can be used to evaluate a given value. It can be called with one or two arguments.
The second argument, if present, must be an environment that is used while evaluating. If no
environment is given, the global environment is used instead.
</p>

<p>
Function <code>eval</code> is useful, for example, in situations where you build the name of the function to be
called at runtime. Small example:
</p>

<div class="org-src-container">
<pre class="src src-octaspire-dern"><span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">define</span> level-next <span style="color: #DCDCCC; font-weight: bold;">as</span> <span style="color: #ff1493;">(</span><span style="color: #DCDCCC; font-weight: bold;">fn</span> <span style="color: #7fff00;">()</span>
    <span style="color: #7fff00;">(</span>level-reset<span style="color: #7fff00;">)</span>

    <span style="color: #7fff00;">(</span><span style="color: #DCDCCC; font-weight: bold;">define</span> lnum <span style="color: #DCDCCC; font-weight: bold;">as</span> <span style="color: #00bfff;">(</span><span style="color: #DCDCCC; font-weight: bold;">+</span> level-current-number <span style="color: #ffff00;">{</span>D+1<span style="color: #ffff00;">}</span><span style="color: #00bfff;">)</span>
        <span style="color: #CC9393;">[level number]</span><span style="color: #7fff00;">)</span>

    <span style="color: #7fff00;">(</span><span style="color: #DCDCCC; font-weight: bold;">if</span> <span style="color: #00bfff;">(</span><span style="color: #DCDCCC; font-weight: bold;">&gt;</span> lnum number-of-levels<span style="color: #00bfff;">)</span> <span style="color: #00bfff;">(</span><span style="color: #DCDCCC; font-weight: bold;">=</span> lnum <span style="color: #ffff00;">{</span>D+1<span style="color: #ffff00;">}</span><span style="color: #00bfff;">)</span><span style="color: #7fff00;">)</span>

    <span style="color: #7fff00;">(</span><span style="color: #DCDCCC; font-weight: bold;">define</span> name-of-fn-to-call <span style="color: #DCDCCC; font-weight: bold;">as</span> 'level-
        <span style="color: #CC9393;">[name of the level builder function to call]</span><span style="color: #7fff00;">)</span>
    <span style="color: #7fff00;">(</span><span style="color: #DCDCCC; font-weight: bold;">+=</span> name-of-fn-to-call lnum<span style="color: #7fff00;">)</span>
    <span style="color: #7fff00;">(</span><span style="color: #DCDCCC; font-weight: bold;">eval</span> <span style="color: #00bfff;">(</span><span style="color: #ffff00;">(</span><span style="color: #DCDCCC; font-weight: bold;">eval</span> name-of-fn-to-call<span style="color: #ffff00;">)</span><span style="color: #00bfff;">)</span><span style="color: #7fff00;">)</span><span style="color: #ff1493;">)</span> <span style="color: #CC9393;">[next level]</span>
        '<span style="color: #ff1493;">()</span> <span style="color: #DCDCCC; font-weight: bold;">howto-no</span><span style="color: #ff8c00;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org6b15543" class="outline-2">
<h2 id="org6b15543"><span class="section-number-2">20</span> Input and output ports</h2>
<div class="outline-text-2" id="text-20">
<p>
Input and output can be done through ports. Ports can be created and attached to different
sources and sinks of data (for example the file system).
</p>

<p>
Here is small example:
</p>

<div class="org-src-container">
<pre class="src src-octaspire-dern"><span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">define</span> f <span style="color: #DCDCCC; font-weight: bold;">as</span> <span style="color: #ff1493;">(</span><span style="color: #DCDCCC; font-weight: bold;">io-file-open</span> <span style="color: #CC9393;">[/path/goes/here.xy]</span><span style="color: #ff1493;">)</span> <span style="color: #CC9393;">[f]</span><span style="color: #ff8c00;">)</span>

<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">port-read</span> f<span style="color: #ff8c00;">)</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">port-read</span> f <span style="color: #ff1493;">{</span>D+3<span style="color: #ff1493;">}</span><span style="color: #ff8c00;">)</span>

<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">port-write</span> f <span style="color: #ff1493;">{</span>D+65<span style="color: #ff1493;">}</span><span style="color: #ff8c00;">)</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">port-write</span> f '<span style="color: #ff1493;">(</span><span style="color: #7fff00;">{</span>D+65<span style="color: #7fff00;">}</span> <span style="color: #7fff00;">{</span>D+66<span style="color: #7fff00;">}</span> <span style="color: #7fff00;">{</span>D+67<span style="color: #7fff00;">}</span><span style="color: #ff1493;">)</span><span style="color: #ff8c00;">)</span>
</pre>
</div>

<p>
Ports can be explicitly closed, but it is not required; port will close automatically when the
garbage collector collects it. Some ports might also support <b>seeking</b>, <b>distance measurement</b>,
<b>length measurement</b> and <b>flushing</b>. Here is another small example:
</p>

<div class="org-src-container">
<pre class="src src-octaspire-dern"><span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">define</span> f <span style="color: #DCDCCC; font-weight: bold;">as</span> <span style="color: #ff1493;">(</span><span style="color: #DCDCCC; font-weight: bold;">io-file-open</span> <span style="color: #CC9393;">[/path/goes/here.xy]</span><span style="color: #ff1493;">)</span> <span style="color: #CC9393;">[f]</span><span style="color: #ff8c00;">)</span>

<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">port-seek</span> f <span style="color: #ff1493;">{</span>D-1<span style="color: #ff1493;">}</span><span style="color: #ff8c00;">)</span> <span style="color: #7F9F7F;">; Seek to the end</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">port-write</span> f <span style="color: #ff1493;">{</span>D+65<span style="color: #ff1493;">}</span><span style="color: #ff8c00;">)</span>

<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">port-seek</span> f <span style="color: #ff1493;">{</span>D+0<span style="color: #ff1493;">}</span><span style="color: #ff8c00;">)</span>  <span style="color: #7F9F7F;">; Seek to the beginning</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">port-write</span> f <span style="color: #ff1493;">{</span>D+65<span style="color: #ff1493;">}</span><span style="color: #ff8c00;">)</span>

<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">port-seek</span> f <span style="color: #ff1493;">{</span>D-2<span style="color: #ff1493;">}</span><span style="color: #ff8c00;">)</span> <span style="color: #7F9F7F;">; Seek to one octet from the end</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">port-write</span> f <span style="color: #ff1493;">{</span>D+66<span style="color: #ff1493;">}</span><span style="color: #ff8c00;">)</span>

<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">port-seek</span> f <span style="color: #ff1493;">{</span>D+1<span style="color: #ff1493;">}</span><span style="color: #ff8c00;">)</span>
<span style="color: #7F9F7F;">; Seek to one octet from the beginning</span>

<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">port-write</span> f <span style="color: #ff1493;">{</span>D+65<span style="color: #ff1493;">}</span><span style="color: #ff8c00;">)</span>

<span style="color: #7F9F7F;">; Seek one octet forward  from the current position</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">port-seek</span> f  <span style="color: #ff1493;">{</span>D+1<span style="color: #ff1493;">}</span> 'from-current<span style="color: #ff8c00;">)</span>

<span style="color: #7F9F7F;">; Seek one octet backward from the current position</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">port-seek</span> f <span style="color: #ff1493;">{</span>D-1<span style="color: #ff1493;">}</span> 'from-current<span style="color: #ff8c00;">)</span>

<span style="color: #7F9F7F;">; Tell the distance (in octets) from</span>
<span style="color: #7F9F7F;">; the beginning of the port</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">port-dist</span> f<span style="color: #ff8c00;">)</span>

<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">port-length</span> f<span style="color: #ff8c00;">)</span>
<span style="color: #7F9F7F;">; Tell the size (in octets) of the port</span>

<span style="color: #7F9F7F;">; Buffer is flushed to disk.</span>
<span style="color: #7F9F7F;">; Happens also automatically on close.</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">port-flush</span> f<span style="color: #ff8c00;">)</span>
<span style="color: #7F9F7F;">; Close port. This happens also automatically.</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">port-close</span> f<span style="color: #ff8c00;">)</span>

<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">port-length</span> f<span style="color: #ff8c00;">)</span> <span style="color: #7F9F7F;">; -1</span>
</pre>
</div>

<p>
Input ports can be iterated with <code>for</code> in similar way that containers are iterated:
</p>

<div class="org-src-container">
<pre class="src src-octaspire-dern"><span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">define</span> f <span style="color: #DCDCCC; font-weight: bold;">as</span> <span style="color: #ff1493;">(</span><span style="color: #DCDCCC; font-weight: bold;">io-file-open</span> <span style="color: #CC9393;">[/path/goes/here.xy]</span><span style="color: #ff1493;">)</span> <span style="color: #CC9393;">[f]</span><span style="color: #ff8c00;">)</span>

<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">for</span> i <span style="color: #DCDCCC; font-weight: bold;">in</span> f <span style="color: #ff1493;">(</span><span style="color: #DCDCCC; font-weight: bold;">println</span> i<span style="color: #ff1493;">)</span><span style="color: #ff8c00;">)</span> <span style="color: #7F9F7F;">; Print every octet</span>

<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">port-seek</span> f <span style="color: #ff1493;">{</span>D+0<span style="color: #ff1493;">}</span><span style="color: #ff8c00;">)</span>      <span style="color: #7F9F7F;">; Seek to the beginning</span>

<span style="color: #7F9F7F;">; Print every other octet</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">for</span> i <span style="color: #DCDCCC; font-weight: bold;">in</span> f step <span style="color: #ff1493;">{</span>D+2<span style="color: #ff1493;">}</span> <span style="color: #ff1493;">(</span><span style="color: #DCDCCC; font-weight: bold;">println</span> i<span style="color: #ff1493;">)</span><span style="color: #ff8c00;">)</span>

<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">port-seek</span> f <span style="color: #ff1493;">{</span>D+0<span style="color: #ff1493;">}</span><span style="color: #ff8c00;">)</span> <span style="color: #7F9F7F;">; Seek to the beginning</span>

<span style="color: #7F9F7F;">; Print every third octet</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">for</span> i <span style="color: #DCDCCC; font-weight: bold;">in</span> f step <span style="color: #ff1493;">{</span>D+3<span style="color: #ff1493;">}</span> <span style="color: #ff1493;">(</span><span style="color: #DCDCCC; font-weight: bold;">println</span> i<span style="color: #ff1493;">)</span><span style="color: #ff8c00;">)</span>
</pre>
</div>

<p>
<code>io-file-open</code> will open a file for reading and writing, <code>input-file-open</code> will open a file
only for reading and <code>output-file-open</code> will open file only for writing.
</p>

<p>
Below is short example about querying a port for supported operations:
</p>

<div class="org-src-container">
<pre class="src src-octaspire-dern"><span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">define</span> f <span style="color: #DCDCCC; font-weight: bold;">as</span> <span style="color: #ff1493;">(</span><span style="color: #DCDCCC; font-weight: bold;">io-file-open</span> <span style="color: #CC9393;">[/path/goes/here.xy]</span><span style="color: #ff1493;">)</span> <span style="color: #CC9393;">[f]</span><span style="color: #ff8c00;">)</span>

<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">port-supports-output?</span> f<span style="color: #ff8c00;">)</span>          <span style="color: #7F9F7F;">; true</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">port-supports-input?</span>  f<span style="color: #ff8c00;">)</span>          <span style="color: #7F9F7F;">; true</span>

<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">define</span> f <span style="color: #DCDCCC; font-weight: bold;">as</span>
    <span style="color: #ff1493;">(</span><span style="color: #DCDCCC; font-weight: bold;">output-file-open</span> <span style="color: #CC9393;">[/path/goes/here.xy]</span><span style="color: #ff1493;">)</span> <span style="color: #CC9393;">[f]</span><span style="color: #ff8c00;">)</span>

<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">port-supports-output?</span> f<span style="color: #ff8c00;">)</span>          <span style="color: #7F9F7F;">; true</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">port-supports-input?</span>  f<span style="color: #ff8c00;">)</span>          <span style="color: #7F9F7F;">; false</span>

<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">define</span> f <span style="color: #DCDCCC; font-weight: bold;">as</span>
    <span style="color: #ff1493;">(</span><span style="color: #DCDCCC; font-weight: bold;">input-file-open</span> <span style="color: #CC9393;">[/path/goes/here.xy]</span><span style="color: #ff1493;">)</span> <span style="color: #CC9393;">[f]</span><span style="color: #ff8c00;">)</span>

<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">port-supports-output?</span> f<span style="color: #ff8c00;">)</span>          <span style="color: #7F9F7F;">; false</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">port-supports-input?</span>  f<span style="color: #ff8c00;">)</span>          <span style="color: #7F9F7F;">; true</span>
</pre>
</div>

<p>
You can use <code>port-write</code> and <code>+=</code> to write to a port octets with values <code>integer</code>, <code>character</code>,
<code>string</code> and <code>vector</code> of these types. Example:
</p>

<div class="org-src-container">
<pre class="src src-octaspire-dern"><span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">define</span> f <span style="color: #DCDCCC; font-weight: bold;">as</span> <span style="color: #ff1493;">(</span><span style="color: #DCDCCC; font-weight: bold;">io-file-open</span> <span style="color: #CC9393;">[/path/goes/here.xy]</span><span style="color: #ff1493;">)</span> <span style="color: #CC9393;">[f]</span><span style="color: #ff8c00;">)</span>

<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">+=</span> f <span style="color: #CC9393;">|a|</span> <span style="color: #CC9393;">|b|</span> <span style="color: #CC9393;">[ cat]</span> <span style="color: #CC9393;">|!|</span><span style="color: #ff8c00;">)</span>  <span style="color: #7F9F7F;">; ab cat!</span>

<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">port-write</span> f '<span style="color: #ff1493;">(</span><span style="color: #7fff00;">{</span>D+65<span style="color: #7fff00;">}</span> <span style="color: #CC9393;">|A|</span> <span style="color: #CC9393;">[ Hi!]</span><span style="color: #ff1493;">)</span><span style="color: #ff8c00;">)</span> <span style="color: #7F9F7F;">; AA Hi!</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org0a8528a" class="outline-2">
<h2 id="org0a8528a"><span class="section-number-2">21</span> Converting between types</h2>
<div class="outline-text-2" id="text-21">
<p>
TODO
</p>
</div>
</div>

<div id="outline-container-org123d3e5" class="outline-2">
<h2 id="org123d3e5"><span class="section-number-2">22</span> Searching and indexing</h2>
<div class="outline-text-2" id="text-22">
<div class="org-src-container">
<pre class="src src-octaspire-dern"><span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">define</span> names <span style="color: #DCDCCC; font-weight: bold;">as</span> '<span style="color: #ff1493;">(</span>Mike John Lola Alice Lola<span style="color: #ff1493;">)</span> <span style="color: #CC9393;">[names]</span><span style="color: #ff8c00;">)</span>

<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">println</span> <span style="color: #ff1493;">(</span><span style="color: #DCDCCC; font-weight: bold;">find</span> names 'Mike<span style="color: #ff1493;">)</span><span style="color: #ff8c00;">)</span>  <span style="color: #7F9F7F;">; prints ({D+0})</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">println</span> <span style="color: #ff1493;">(</span><span style="color: #DCDCCC; font-weight: bold;">find</span> names 'John<span style="color: #ff1493;">)</span><span style="color: #ff8c00;">)</span>  <span style="color: #7F9F7F;">; prints ({D+1})</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">println</span> <span style="color: #ff1493;">(</span><span style="color: #DCDCCC; font-weight: bold;">find</span> names 'Lola<span style="color: #ff1493;">)</span><span style="color: #ff8c00;">)</span>  <span style="color: #7F9F7F;">; prints ({D+2} {D+4})</span>

 <span style="color: #7F9F7F;">; prints (({D+0}) ({D+1}) ({D+2} {D+4}))</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">println</span> <span style="color: #ff1493;">(</span><span style="color: #DCDCCC; font-weight: bold;">find</span> names 'Mike 'John 'Lola<span style="color: #ff1493;">)</span><span style="color: #ff8c00;">)</span>


<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">define</span> rooms <span style="color: #DCDCCC; font-weight: bold;">as</span> <span style="color: #ff1493;">(</span><span style="color: #DCDCCC; font-weight: bold;">hash-map</span> 'Mike <span style="color: #7fff00;">{</span>D+100<span style="color: #7fff00;">}</span>
                           'John <span style="color: #7fff00;">{</span>D+101<span style="color: #7fff00;">}</span>
                           'Lola '<span style="color: #7fff00;">(</span><span style="color: #00bfff;">{</span>D+102<span style="color: #00bfff;">}</span> <span style="color: #00bfff;">{</span>D+103<span style="color: #00bfff;">}</span><span style="color: #7fff00;">)</span>
                           'Alice <span style="color: #7fff00;">{</span>D+104<span style="color: #7fff00;">}</span><span style="color: #ff1493;">)</span>
                 <span style="color: #CC9393;">[room numbers]</span><span style="color: #ff8c00;">)</span>

<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">println</span> <span style="color: #ff1493;">(</span><span style="color: #DCDCCC; font-weight: bold;">find</span> rooms 'Mike<span style="color: #ff1493;">)</span><span style="color: #ff8c00;">)</span> <span style="color: #7F9F7F;">; prints {D+100}</span>

<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">println</span> <span style="color: #ff1493;">(</span><span style="color: #DCDCCC; font-weight: bold;">find</span> rooms 'Lola<span style="color: #ff1493;">)</span><span style="color: #ff8c00;">)</span>
<span style="color: #7F9F7F;">; prints ({D+102} {D+103})</span>

<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">println</span> <span style="color: #ff1493;">(</span><span style="color: #DCDCCC; font-weight: bold;">find</span> rooms 'Nobody<span style="color: #ff1493;">)</span><span style="color: #ff8c00;">)</span> <span style="color: #7F9F7F;">; prints nil</span>


<span style="color: #7F9F7F;">; prints ({D+7} {D+11} {D+15})</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">println</span> <span style="color: #ff1493;">(</span><span style="color: #DCDCCC; font-weight: bold;">find</span> <span style="color: #CC9393;">[012345 abc abc abc]</span> <span style="color: #CC9393;">[abc]</span><span style="color: #ff1493;">)</span><span style="color: #ff8c00;">)</span>
<span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">println</span> <span style="color: #ff1493;">(</span><span style="color: #DCDCCC; font-weight: bold;">find</span> <span style="color: #CC9393;">[012345]</span> <span style="color: #CC9393;">|3|</span><span style="color: #ff1493;">)</span><span style="color: #ff8c00;">)</span> <span style="color: #7F9F7F;">; prints ({D+3})</span>
</pre>
</div>

<p>
TODO
</p>
</div>
</div>

<div id="outline-container-org804fbd1" class="outline-2">
<h2 id="org804fbd1"><span class="section-number-2">23</span> Loading libraries with <code>require</code></h2>
<div class="outline-text-2" id="text-23">
<p>
Dern has support for loading libraries or &ldquo;plugins&rdquo; during run time with the builtin <code>require</code>.
Before loading the requested library, <code>require</code> checks whether the library is already loaded,
and loads it only if it isn&rsquo;t already loaded.
</p>

<p>
It first tries to find a source library (.dern file) with the given name. If it finds, it loads
that. Next it tries to find a binary library (.so file in Unix) and loads that if found.
</p>

<p>
So, in the example below, <code>require</code> tries first to find file named <b>mylib.dern</b> and then,
if the system is Unix, file named <b>libmylib.so</b>.
</p>

<p>
Here is small example:
</p>

<div class="org-src-container">
<pre class="src src-octaspire-dern"><span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">require</span> 'mylib<span style="color: #ff8c00;">)</span>
<span style="color: #ff8c00;">(</span>mylib-say <span style="color: #CC9393;">[Hello world from library]</span><span style="color: #ff8c00;">)</span>
</pre>
</div>

<p>
If <code>mylib</code>-library is required later again, there is no need to search and load it again, because
<code>require</code> know that a library with that name is already loaded.
</p>

<p>
Below is a small example of a binary library for <b>Linux</b>, <b>FreeBSD</b>, <b>NetBSD</b>, <b>Haiku</b> and
<b>MINIX 3</b> systems.
</p>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #5F7F5F;">/***</span>
<span style="color: #7F9F7F;">  To build this file into a shared library in Linux:</span>

<span style="color: #7F9F7F;">  gcc -c -fPIC mylib.c     \</span>
<span style="color: #7F9F7F;">      -I ../../../include  \</span>
<span style="color: #7F9F7F;">      -I ../../../external/octaspire_core/include</span>
<span style="color: #7F9F7F;">  gcc -shared -o libmylib.so mylib.o</span>
<span style="color: #7F9F7F;">***/</span>
<span style="color: #94BFF3;">#include</span> <span style="color: #ff8c00;">&lt;</span><span style="color: #CC9393;">stdio.h</span><span style="color: #ff8c00;">&gt;</span>
<span style="color: #94BFF3;">#include</span> <span style="color: #ff8c00;">&lt;</span><span style="color: #CC9393;">octaspire/core/octaspire_helpers.h</span><span style="color: #ff8c00;">&gt;</span>
<span style="color: #94BFF3;">#include</span> <span style="color: #CC9393;">"octaspire/dern/octaspire_dern_vm.h"</span>
<span style="color: #94BFF3;">#include</span> <span style="color: #CC9393;">"octaspire/dern/octaspire_dern_environment.h"</span>

<span style="color: #7CB8BB;">octaspire_dern_value_t</span> *<span style="color: #93E0E3;">mylib_say</span><span style="color: #ff8c00;">(</span>
    <span style="color: #7CB8BB;">octaspire_dern_vm_t</span> *<span style="color: #DFAF8F;">vm</span>,
    <span style="color: #7CB8BB;">octaspire_dern_value_t</span> *<span style="color: #DFAF8F;">arguments</span>,
    <span style="color: #7CB8BB;">octaspire_dern_value_t</span> *<span style="color: #DFAF8F;">environment</span><span style="color: #ff8c00;">)</span>
<span style="color: #ff8c00;">{</span>
    OCTASPIRE_HELPERS_UNUSED_PARAMETER<span style="color: #ff1493;">(</span>environment<span style="color: #ff1493;">)</span>;

    <span style="color: #F0DFAF; font-weight: bold;">if</span> <span style="color: #ff1493;">(</span>octaspire_dern_value_as_vector_get_length<span style="color: #7fff00;">(</span>
        arguments<span style="color: #7fff00;">)</span> != 1<span style="color: #ff1493;">)</span>
    <span style="color: #ff1493;">{</span>
        <span style="color: #F0DFAF; font-weight: bold;">return</span>
octaspire_dern_vm_create_new_value_error_from_c_string<span style="color: #7fff00;">(</span>
                vm,
                <span style="color: #CC9393;">"mylib-say expects one argument"</span><span style="color: #7fff00;">)</span>;
    <span style="color: #ff1493;">}</span>

    <span style="color: #7CB8BB;">octaspire_dern_value_t</span> <span style="color: #F0DFAF; font-weight: bold;">const</span> * <span style="color: #F0DFAF; font-weight: bold;">const</span> <span style="color: #DFAF8F;">messageVal</span> =
   octaspire_dern_value_as_vector_get_element_at_const<span style="color: #ff1493;">(</span>
            arguments,
            0<span style="color: #ff1493;">)</span>;

    <span style="color: #F0DFAF; font-weight: bold;">if</span> <span style="color: #ff1493;">(</span>messageVal-&gt;typeTag !=
        OCTASPIRE_DERN_VALUE_TAG_STRING<span style="color: #ff1493;">)</span>
    <span style="color: #ff1493;">{</span>
        <span style="color: #F0DFAF; font-weight: bold;">return</span>
octaspire_dern_vm_create_new_value_error_from_c_string<span style="color: #7fff00;">(</span>
                vm,
                <span style="color: #CC9393;">"mylib-say expects string argument"</span><span style="color: #7fff00;">)</span>;
    <span style="color: #ff1493;">}</span>

    printf<span style="color: #ff1493;">(</span><span style="color: #CC9393;">"%s\n"</span>,
           octaspire_dern_value_as_string_get_c_string<span style="color: #7fff00;">(</span>
               messageVal<span style="color: #7fff00;">)</span><span style="color: #ff1493;">)</span>;

    <span style="color: #F0DFAF; font-weight: bold;">return</span> octaspire_dern_vm_create_new_value_boolean<span style="color: #ff1493;">(</span>
        vm,
        <span style="color: #BFEBBF;">true</span><span style="color: #ff1493;">)</span>;
<span style="color: #ff8c00;">}</span>

<span style="color: #7CB8BB;">bool</span> <span style="color: #93E0E3;">mylib_init</span><span style="color: #ff8c00;">(</span>
    <span style="color: #7CB8BB;">octaspire_dern_vm_t</span> * <span style="color: #F0DFAF; font-weight: bold;">const</span> <span style="color: #DFAF8F;">vm</span>,
    <span style="color: #7CB8BB;">octaspire_dern_environment_t</span> * <span style="color: #F0DFAF; font-weight: bold;">const</span> <span style="color: #DFAF8F;">targetEnv</span><span style="color: #ff8c00;">)</span>
<span style="color: #ff8c00;">{</span>
    octaspire_helpers_verify<span style="color: #ff1493;">(</span>vm &amp;&amp; targetEnv<span style="color: #ff1493;">)</span>;

    <span style="color: #F0DFAF; font-weight: bold;">if</span> <span style="color: #ff1493;">(</span>
    <span style="color: #F0DFAF; font-weight: bold;">!</span>octaspire_dern_vm_create_and_register_new_builtin<span style="color: #7fff00;">(</span>
        vm,
        <span style="color: #CC9393;">"mylib-say"</span>,
        mylib_say,
        1,
        <span style="color: #CC9393;">"mylib says something"</span>,
        targetEnv<span style="color: #7fff00;">)</span><span style="color: #ff1493;">)</span>
    <span style="color: #ff1493;">{</span>
        <span style="color: #F0DFAF; font-weight: bold;">return</span> <span style="color: #BFEBBF;">false</span>;
    <span style="color: #ff1493;">}</span>

    <span style="color: #F0DFAF; font-weight: bold;">return</span> <span style="color: #BFEBBF;">true</span>;
<span style="color: #ff8c00;">}</span>
</pre>
</div>

<p>
See directory doc/examples/plugin in the source distribution for an example with Makefiles
for different systems.
</p>
</div>

<div id="outline-container-org5b9fa57" class="outline-3">
<h3 id="org5b9fa57"><span class="section-number-3">23.1</span> Building and using a binary library in Haiku</h3>
<div class="outline-text-3" id="text-23-1">
<p>
Run these commands from the <b>build</b>-directory of the source distribution:
</p>

<div class="org-src-container">
<pre class="src src-sh">make -C ../doc/examples/plugin -f Makefile.Haiku
<span style="color: #DFAF8F;">LIBRARY_PATH</span>=$<span style="color: #DFAF8F;">LIBRARY_PATH</span>:../doc/examples/plugin <span style="color: #CC9393;">\</span>
    ./octaspire-dern-repl -c
</pre>
</div>

<p>
Write into the REPL:
</p>

<div class="org-src-container">
<pre class="src src-octaspire-dern"><span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">require</span> 'mylib<span style="color: #ff8c00;">)</span>
<span style="color: #ff8c00;">(</span>mylib-say <span style="color: #CC9393;">[Hello world from library]</span><span style="color: #ff8c00;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org738ab1b" class="outline-3">
<h3 id="org738ab1b"><span class="section-number-3">23.2</span> Building and using a binary library in MINIX 3</h3>
<div class="outline-text-3" id="text-23-2">
<p>
Run these commands from the <b>build</b>-directory of the source distribution:
</p>

<div class="org-src-container">
<pre class="src src-sh">make -C ../doc/examples/plugin -f Makefile.MINIX3
<span style="color: #DFAF8F;">LD_LIBRARY_PATH</span>=../doc/examples/plugin <span style="color: #CC9393;">\</span>
    ./octaspire-dern-repl -c
</pre>
</div>

<p>
Write into the REPL:
</p>

<div class="org-src-container">
<pre class="src src-octaspire-dern"><span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">require</span> 'mylib<span style="color: #ff8c00;">)</span>
<span style="color: #ff8c00;">(</span>mylib-say <span style="color: #CC9393;">[Hello world from library]</span><span style="color: #ff8c00;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org2932337" class="outline-3">
<h3 id="org2932337"><span class="section-number-3">23.3</span> Building and using a binary library in Linux</h3>
<div class="outline-text-3" id="text-23-3">
<p>
Run these commands from the <b>build</b>-directory of the source distribution:
</p>

<div class="org-src-container">
<pre class="src src-sh">make -C ../doc/examples/plugin
<span style="color: #DFAF8F;">LD_LIBRARY_PATH</span>=../doc/examples/plugin <span style="color: #CC9393;">\</span>
    ./octaspire-dern-repl -c
</pre>
</div>

<p>
Write into the REPL:
</p>

<div class="org-src-container">
<pre class="src src-octaspire-dern"><span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">require</span> 'mylib<span style="color: #ff8c00;">)</span>
<span style="color: #ff8c00;">(</span>mylib-say <span style="color: #CC9393;">[Hello world from library]</span><span style="color: #ff8c00;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org421fd11" class="outline-3">
<h3 id="org421fd11"><span class="section-number-3">23.4</span> Building and using a binary library in FreeBSD</h3>
<div class="outline-text-3" id="text-23-4">
<p>
Run these commands from the <b>build</b>-directory of the source distribution:
</p>

<div class="org-src-container">
<pre class="src src-sh">make -C ../doc/examples/plugin -f Makefile.FreeBSD
<span style="color: #DFAF8F;">LD_LIBRARY_PATH</span>=../doc/examples/plugin <span style="color: #CC9393;">\</span>
    ./octaspire-dern-repl -c
</pre>
</div>

<p>
Write into the REPL:
</p>

<div class="org-src-container">
<pre class="src src-octaspire-dern"><span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">require</span> 'mylib<span style="color: #ff8c00;">)</span>
<span style="color: #ff8c00;">(</span>mylib-say <span style="color: #CC9393;">[Hello world from library]</span><span style="color: #ff8c00;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf5a02e7" class="outline-3">
<h3 id="orgf5a02e7"><span class="section-number-3">23.5</span> Building and using a binary library in NetBSD</h3>
<div class="outline-text-3" id="text-23-5">
<p>
Run these commands from the <b>build</b>-directory of the source distribution:
</p>

<div class="org-src-container">
<pre class="src src-sh">make -C ../doc/examples/plugin
<span style="color: #DFAF8F;">LD_LIBRARY_PATH</span>=../doc/examples/plugin <span style="color: #CC9393;">\</span>
    ./octaspire-dern-repl -c
</pre>
</div>

<p>
Write into the REPL:
</p>

<div class="org-src-container">
<pre class="src src-octaspire-dern"><span style="color: #ff8c00;">(</span><span style="color: #DCDCCC; font-weight: bold;">require</span> 'mylib<span style="color: #ff8c00;">)</span>
<span style="color: #ff8c00;">(</span>mylib-say <span style="color: #CC9393;">[Hello world from library]</span><span style="color: #ff8c00;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org9f944cf" class="outline-2">
<h2 id="org9f944cf"><span class="section-number-2">24</span> Using custom library loader with <code>require</code></h2>
<div class="outline-text-2" id="text-24">
<p>
Sometimes you might want to override the default library searching and loading
functionality and use a custom loader instead. For example, when writing a game
that contains all the resources in a compressed archive or inside the executable
program, or maybe the library must be first downloaded through a socket.
</p>


<div class="org-src-container">
<pre class="src src-c"><span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">...</span>

<span style="color: #7CB8BB;">octaspire_input_t</span> *<span style="color: #93E0E3;">my_custom_loader</span><span style="color: #ff8c00;">(</span>
    <span style="color: #7CB8BB;">char</span> <span style="color: #F0DFAF; font-weight: bold;">const</span> * <span style="color: #F0DFAF; font-weight: bold;">const</span> <span style="color: #DFAF8F;">name</span>,
    <span style="color: #7CB8BB;">octaspire_memory_allocator_t</span> * <span style="color: #F0DFAF; font-weight: bold;">const</span> <span style="color: #DFAF8F;">allocator</span><span style="color: #ff8c00;">)</span>
<span style="color: #ff8c00;">{</span>
    <span style="color: #F0DFAF; font-weight: bold;">if</span> <span style="color: #ff1493;">(</span>strcmp<span style="color: #7fff00;">(</span><span style="color: #CC9393;">"test1.dern"</span>, name<span style="color: #7fff00;">)</span> == 0<span style="color: #ff1493;">)</span>
    <span style="color: #ff1493;">{</span>
        <span style="color: #F0DFAF; font-weight: bold;">return</span> octaspire_input_new_from_c_string<span style="color: #7fff00;">(</span>
            <span style="color: #CC9393;">"(define f1 as (fn (a b) (+ a b)) [f1] "</span>
            <span style="color: #CC9393;">"'(a [a] b [b]) howto-ok)"</span>,
            allocator<span style="color: #7fff00;">)</span>;
    <span style="color: #ff1493;">}</span>
    <span style="color: #F0DFAF; font-weight: bold;">else</span> <span style="color: #F0DFAF; font-weight: bold;">if</span> <span style="color: #ff1493;">(</span>strcmp<span style="color: #7fff00;">(</span><span style="color: #CC9393;">"test2.dern"</span>, name<span style="color: #7fff00;">)</span> == 0<span style="color: #ff1493;">)</span>
    <span style="color: #ff1493;">{</span>
        <span style="color: #F0DFAF; font-weight: bold;">return</span> octaspire_input_new_from_c_string<span style="color: #7fff00;">(</span>
            <span style="color: #CC9393;">"(define f2 as (fn (a b) (* a b)) [f2] "</span>
            <span style="color: #CC9393;">"'(a [a] b [b]) howto-ok)"</span>,
            allocator<span style="color: #7fff00;">)</span>;
    <span style="color: #ff1493;">}</span>

    <span style="color: #F0DFAF; font-weight: bold;">return</span> 0;
<span style="color: #ff8c00;">}</span>

<span style="color: #7CB8BB;">int</span> <span style="color: #93E0E3;">main</span><span style="color: #ff8c00;">(</span><span style="color: #7CB8BB;">void</span><span style="color: #ff8c00;">)</span>
<span style="color: #ff8c00;">{</span>
    <span style="color: #7CB8BB;">octaspire_dern_vm_config_t</span> <span style="color: #DFAF8F;">config</span> =
        octaspire_dern_vm_config_default<span style="color: #ff1493;">()</span>;
    config.preLoaderForRequireSrc = my_custom_loader;

    <span style="color: #7CB8BB;">octaspire_dern_vm_t</span> *<span style="color: #DFAF8F;">vm</span> =
        octaspire_dern_vm_new_with_config<span style="color: #ff1493;">(</span>
            myAllocator,
            myStdio,
            config<span style="color: #ff1493;">)</span>;


    <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">In Dern:</span>
    <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">(require 'test1)</span>
    <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">(require 'test2)</span>
    <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">...</span>
<span style="color: #ff8c00;">}</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcab30a2" class="outline-2">
<h2 id="orgcab30a2"><span class="section-number-2">25</span> Embedding in C programs</h2>
<div class="outline-text-2" id="text-25">
<p>
TODO
</p>
</div>
</div>

<div id="outline-container-orgb958fcd" class="outline-2">
<h2 id="orgb958fcd"><span class="section-number-2">26</span> Tool support</h2>
<div class="outline-text-2" id="text-26">
<p>
<b>etc</b>-directory of the source distribution contains syntax files for <b>vim</b>, <b>emacs</b>,
<b>pygments</b> and <b>GNU source-highlight</b>.
</p>
</div>
</div>

<div id="outline-container-org09c6484" class="outline-2">
<h2 id="org09c6484"><span class="section-number-2">27</span> Using the development repository</h2>
<div class="outline-text-2" id="text-27">
<p>
The amalgamated source release can be used without Make or other build tools;
only a compiler is needed. It is the recommended way of using Dern and is
available from the <b>release</b> directory of the git repository and from the
<b>dern.tar.bz2</b> archives at octaspire.io and octaspire.com. However, when
there is a need to modify Dern itself or to build the documentation, then
some tools are needed and the Makefile in the git repository should be used.
In this case the files to be modified are found from the <b>dev</b> directory.
</p>

<p>
On different systems the required installation commands can vary. In any case, you should install
a <b>C compiler</b> and <b>git</b>. Depending on the system, you might also need to install <b>GNU make</b>.
If you want to build the documentation, you should also install <b>Emacs 26.1</b> or newer.
For code coverage and performance measurement you might need to install additional tools.
</p>

<p>
That&rsquo;s it; <b>octaspire<sub>core</sub></b> and <b>octaspire<sub>dotfiles</sub></b> are included as
git submodules. The Emacs dotfiles are used to set the correct settings
and styling when building the documentation
(documentation is written using Emacs Org mode).
</p>

<p>
Example of using the development repository and the different targets available
in the Makefile:
</p>

<div class="org-src-container">
<pre class="src src-sh">git clone https://github.com/octaspire/dern.git
<span style="color: #DCDCCC; font-weight: bold;">cd</span> dern
make submodules-init
make
make test
make codestyle
make cppcheck
make valgrind
make coverage
make coverage-show
make perf-linux

./octaspire-dern-repl

make amalgamation
release/octaspire-dern-repl

make clean

rm release/octaspire-dern-amalgamated.c
make release/octaspire-dern-amalgamated.c

rm release/documentation/dern-manual.html
make release/documentation/dern-manual.html
</pre>
</div>

<p>
Running <code>make</code> should run <code>make submodules-init</code> automatically if needed
(<code>make submodules-init</code> clones and initializes submodules), but it can be
run also manually when cloning the repository for the first time. There is
no need to run it again later.
</p>

<p>
If you want to update the submodules into the latest commits, you can
run <code>make submodules-pull</code>. It does a git pull on all the submodules.
</p>

<p>
Running <code>make</code> builds the Dern REPL and unit test runner from the separate
Dern source files and then the binary plugins using the amalgamation.
</p>

<p>
Running <code>make amalgamation</code> generates first the amalgamation (only, if the source files
are changed). Then it detects the system and runs the correct build script.
This creates the Dern REPL and unit test runner binaries and also the binary
plugins on some systems.
</p>

<p>
<code>make test</code> runs the unit tests, <code>make codestyle</code> runs the C coding style
checks, <code>make cppcheck</code> runs the cppcheck static analysis on the code,
<code>make valgrind</code> runs the unit tests through Valgrind (dynamic analysis
and memory leak detection) and <code>make coverage</code> generates a unit test
coverage report that can be used for finding code that is not covered
yet by unit tests. <code>make coverage-show</code> generates and shows the coverage
report in a web browser. <code>make perf-linux</code> measures the performance in GNU/Linux
using the unit test runner. <code>make release/documentation/dern-manual.html</code>
builds the documentation.
</p>
</div>

<div id="outline-container-orgf2ebe6a" class="outline-3">
<h3 id="orgf2ebe6a"><span class="section-number-3">27.1</span> Raspberry Pi, Debian and Ubuntu</h3>
<div class="outline-text-3" id="text-27-1">
<p>
To build Dern from the regular source distribution in Raspberry Pi (Raspbian), Debian or Ubuntu (16.04 LTS) system:
</p>

<div class="org-src-container">
<pre class="src src-sh">sudo apt-get install git
git clone https://github.com/octaspire/dern.git
<span style="color: #DCDCCC; font-weight: bold;">cd</span> dern
make submodules-init
make
</pre>
</div>
</div>
</div>

<div id="outline-container-org8fb2827" class="outline-3">
<h3 id="org8fb2827"><span class="section-number-3">27.2</span> Arch Linux</h3>
<div class="outline-text-3" id="text-27-2">
<p>
To build on Arch Linux (Arch Linux ARM) system:
</p>

<div class="org-src-container">
<pre class="src src-sh">sudo pacman -S git gcc make
git clone https://github.com/octaspire/dern.git
<span style="color: #DCDCCC; font-weight: bold;">cd</span> dern
make submodules-init
make
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd6ce023" class="outline-3">
<h3 id="orgd6ce023"><span class="section-number-3">27.3</span> Haiku</h3>
<div class="outline-text-3" id="text-27-3">
<p>
To build on Haiku (Version Walter (Revision hrev51127) x86<sub>gcc2</sub>):
</p>

<div class="org-src-container">
<pre class="src src-sh">pkgman install gcc_x86
git clone https://github.com/octaspire/dern.git
<span style="color: #DCDCCC; font-weight: bold;">cd</span> dern
make submodules-init
<span style="color: #DFAF8F;">CC</span>=gcc-x86 make
</pre>
</div>
</div>
</div>

<div id="outline-container-orgdb2a47d" class="outline-3">
<h3 id="orgdb2a47d"><span class="section-number-3">27.4</span> FreeBSD</h3>
<div class="outline-text-3" id="text-27-4">
<p>
To build on FreeBSD (FreeBSD-11.0-RELEASE-arm-armv6-RPI2) system:
</p>

<div class="org-src-container">
<pre class="src src-sh">sudo pkg install git
git clone https://github.com/octaspire/dern.git
<span style="color: #DCDCCC; font-weight: bold;">cd</span> dern
make submodules-init
make
</pre>
</div>
</div>
</div>

<div id="outline-container-orgefed063" class="outline-3">
<h3 id="orgefed063"><span class="section-number-3">27.5</span> NetBSD</h3>
<div class="outline-text-3" id="text-27-5">
<p>
To build on NetBSD (NetBSD-7.1-i386) system:
</p>

<div class="org-src-container">
<pre class="src src-sh">sudo pkgin install git
git clone git://github.com/octaspire/dern
<span style="color: #DCDCCC; font-weight: bold;">cd</span> dern
perl -pi -e <span style="color: #CC9393;">'s/https/git/'</span> .gitmodules
make submodules-init
make
</pre>
</div>
</div>
</div>

<div id="outline-container-org34a4bfa" class="outline-3">
<h3 id="org34a4bfa"><span class="section-number-3">27.6</span> MINIX 3</h3>
<div class="outline-text-3" id="text-27-6">
<p>
To build from the regular source distribution on MINIX 3 (minix<sub>R3.3.0</sub>-588a35b) system:
</p>

<div class="org-src-container">
<pre class="src src-sh">su root
pkgin install clang binutils git-base
<span style="color: #F0DFAF; font-weight: bold;">exit</span>
git clone git://github.com/octaspire/dern
<span style="color: #DCDCCC; font-weight: bold;">cd</span> dern
perl -pi -e <span style="color: #CC9393;">'s/https/git/'</span> .gitmodules
make submodules-init
make
</pre>
</div>
</div>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1">1</a></sup> <div class="footpara"><p class="footpara">
<a href="https://en.wiktionary.org/wiki/dern">https://en.wiktionary.org/wiki/dern</a>
</p></div></div>


</div>
</div></div>
<div id="postamble" class="status">
<p class="author">Author: www.octaspire.com</p>
<p class="date">Created: 2018-06-29 Fri 10:00</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
