To use asciidoctor to build the documentation with a version of pygments with a lexer for
Dern (the dern repo is in ~/octaspire/dern in this example, but modify paths if needed):

1. Make a directory and clone pygments using mercurial:
-------------------------------------------------------

    mkdir ~/hg
    cd ~/hg
    hg clone http://bitbucket.org/birkenfeld/pygments-main pygments-main


2. Modify pygments by adding Dern into it:
------------------------------------------

diff -r 7941677dc77d pygments/lexers/_mapping.py
--- a/pygments/lexers/_mapping.py       Mon Mar 13 19:16:03 2017 +0000
+++ b/pygments/lexers/_mapping.py       Wed Sep 27 21:10:25 2017 +0300
@@ -122,6 +122,7 @@
    'DartLexer': ('pygments.lexers.javascript', 'Dart', ('dart',), ('*.dart',), ('text/x-dart',)),
    'DebianControlLexer': ('pygments.lexers.installers', 'Debian Control file', ('control', 'debcontrol'), ('control',), ()),
    'DelphiLexer': ('pygments.lexers.pascal', 'Delphi', ('delphi', 'pas', 'pascal', 'objectpascal'), ('*.pas', '*.dpr'), ('text/x-pascal',)),
+   'DernLexer': ('pygments.lexers.dern', 'Dern', ('dern',), ('*', '.', 'd', 'e', 'r', 'n'), ()),
    'DgLexer': ('pygments.lexers.python', 'dg', ('dg',), ('*.dg',), ('text/x-dg',)),
    'DiffLexer': ('pygments.lexers.diff', 'Diff', ('diff', 'udiff'), ('*.diff', '*.patch'), ('text/x-diff', 'text/x-patch')),
    'DjangoLexer': ('pygments.lexers.templates', 'Django/Jinja', ('django', 'jinja'), (), ('application/x-django-templating', 'application/x-jinja')),


3. Create link to the syntax file:
----------------------------------

    cd ~/hg/pygments-main/pygments/lexers
    ln -s ~/octaspire/dern/etc/pygments/dern.py dern.py


4. In directory ~/hg/pygments-main/ give command:
-------------------------------------------------

    make mapfiles


5. Install asciidoctor, asciidoctor-pdf and pygments.rb gems:
-------------------------------------------------------------

    gem install --user-install asciidoctor
    gem install --user-install pygments.rb
    gem install asciidoctor-pdf --pre --user-install

and add the local gem bin-folder into the PATH. (or install with sudo)

